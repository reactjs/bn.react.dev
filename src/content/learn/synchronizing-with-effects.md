---
title: 'Effects ржжрж┐рзЯрзЗ Synchronizing'
---

<Intro>

ржХрж┐ржЫрзБ ржХржорзНржкрзЛржирзЗржирзНржЯржХрзЗ ржмрж╛ржЗрж░рзЗрж░ ржХрзЛржирзЛ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ рж╕рж╛ржерзЗ рж╕рж┐ржВржХрзНрж░рзЛржирж╛ржЗржЬ ржХрж░рждрзЗ рж╣рждрзЗ ржкрж╛рж░рзЗред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржЖржкржирж┐ non-React ржХржорзНржкрзЛржирзЗржирзНржЯржХрзЗ React state ржПрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рзЗ ржирж┐ржпрж╝ржирзНрждрзНрж░ржг ржХрж░рждрзЗ ржЪрж╛ржЗрждрзЗ ржкрж╛рж░рзЗржи, ржПржХржЯрж┐ рж╕рж╛рж░рзНржнрж╛рж░ рж╕ржВржпрзЛржЧ рж╕рзНржерж╛ржкржи ржХрж░рждрзЗ, ржмрж╛ ржпржЦржи ржПржХржЯрж┐ ржХржорзНржкрзЛржирзЗржирзНржЯ рж╕рзНржХрзНрж░рж┐ржирзЗ ржжрзЗржЦрж╛ ржпрж╛рзЯ рждржЦржи ржПржХржЯрж┐ analytics рж▓ржЧ ржкрж╛ржарж╛рждрзЗ ржЪрж╛ржЗрждрзЗ ржкрж╛рж░рзЗржиред *Effect* ржЖржкржирж╛ржХрзЗ рж░рзЗржирзНржбрж╛рж░рзЗрж░ ржкрж░ ржХрж┐ржЫрзБ ржХрзЛржб рж░рж╛ржи ржХрж░рж╛рж░ рж╕рзБржпрзЛржЧ ржжрзЗржпрж╝ ржпрж╛рждрзЗ ржЖржкржирж┐ ржЖржкржирж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯржЯрж┐ React ржПрж░ ржмрж╛ржЗрж░рзЗ ржХрзЛржи рж╕рж┐рж╕рзНржЯрзЗржо ржПрж░ рж╕ржЩрзНржЧрзЗ рж╕рж┐ржВржХрзНрж░рзЛржирж╛ржЗржЬ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред

</Intro>

<YouWillLearn>

- Effects ржХрзА  
- Effects ржХрзАржнрж╛ржмрзЗ events ржерзЗржХрзЗ ржЖрж▓рж╛ржжрж╛ 
- ржХрзАржнрж╛ржмрзЗ ржЖржкржирж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ Effect ржбрж┐ржХрзНрж▓рзЗрзЯрж╛рж░ ржХрж░ржмрзЗржи 
- ржХрзАржнрж╛ржмрзЗ ржЕржХрж╛рж░ржгрзЗ ржХрзЛржи Effect рж░рж┐-рж░рж╛ржирж┐ржВ ржПрзЬрж╛ржмрзЗржи
- ржХрзЗржирзЛ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗрж░ рж╕ржорзЯ Effects ржжрзБржЗржмрж╛рж░ рж░рж╛ржи рж╣рзЯ ржПржмржВ рж╕рзЗржЧрзБрж▓рзЛ ржХрзАржнрж╛ржмрзЗ ржарж┐ржХ ржХрж░ржмрзЗржи

</YouWillLearn>

## Effects ржХрзА ржПржмржВ ржХрзАржнрж╛ржмрзЗ рждрж╛рж░рж╛ events ржерзЗржХрзЗ ржЖрж▓рж╛ржжрж╛? {/*what-are-effects-and-how-are-they-different-from-events*/}

Effects рж╕ржорзНржкрж░рзНржХрзЗ рж╢рзБрж░рзБрж░ ржЖржЧрзЗ, ржЖржкржирж╛рж░ рж░рж┐ржпрж╝рзЗржХрзНржЯ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржнрзЗрждрж░рзЗрж░ ржжрзБржЗ ржкрзНрж░ржХрж╛рж░ рж▓ржЬрж┐ржХрзЗрж░ рж╕рж╛ржерзЗ ржкрж░рж┐ржЪрж┐ржд ржерж╛ржХрждрзЗ рж╣ржмрзЗ:

- **Rendering code** (ржпрж╛ [UI ржПрж░ ржмрж░рзНржгржирж╛](/learn/describing-the-ui) ржЕржзрзНржпрж╛рзЯрзЗ ржкрж░рж┐ржЪрзЯ ржжрзЗржУрзЯрж╛ рж╣ржпрж╝рзЗржЫрзЗ) ржЖржкржирж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржЯржк рж▓рзЗржнрзЗрж▓рзЗ ржерж╛ржХрзЗред ржПржЯрж┐ рж╕рзЗржЦрж╛ржирзЗ ржерж╛ржХрзЗ, ржпрзЗржЦрж╛ржирзЗ ржЖржкржирж┐ props ржПржмржВ state ржирж┐рзЯрзЗ, рждрж╛ржжрзЗрж░ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзЗржи, ржПржмржВ ржЖржкржирж┐ ржпрзЗ JSX рж╕рзНржХрзНрж░рж┐ржирзЗ ржжрзЗржЦрждрзЗ ржЪрж╛ржи рждрж╛ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗржиред [Rendering code ржЕржмрж╢рзНржпржЗ ржкрж┐ржУрж░ рж╣рждрзЗ рж╣ржмрзЗред](/learn/keeping-components-pure) ржПржХржЯрж┐ ржЧржгрж┐ржд рж╕рзВрждрзНрж░рзЗрж░ ржорждрзЛ, ржПржЯрж┐ рж╢рзБржзрзБ ржлрж▓рж╛ржлрж▓ _рж╣рж┐рж╕рж╛ржм_ ржХрж░ржмрзЗ, ржХрж┐ржирзНрждрзБ ржЕржирзНржп ржХрж┐ржЫрзБ ржирж╛ред

- **Event handlers** (ржпрж╛ [Adding Interactivity](/learn/adding-interactivity) ржЕржзрзНржпрж╛ржпрж╝рзЗ ржкрж░рж┐ржЪржпрж╝ ржжрзЗржУржпрж╝рж╛ рж╣ржпрж╝рзЗржЫрзЗ) рж╣рж▓рзЛ ржЖржкржирж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржнрж┐рждрж░рзЗрж░ ржирзЗрж╕рзНржЯрзЗржб ржлрж╛ржВрж╢ржи ржпрж╛ ржмрж┐ржнрж┐ржирзНржи ржЬрж┐ржирж┐рж╕ *ржХрж░рзЗ*, рж╢рзБржзрзБржорж╛рждрзНрж░ рж╣рж┐рж╕рж╛ржм ржХрж░рж╛ржЗ ржПрж░ ржХрж╛ржЬ ржирж╛ред ржПржЯрж┐ ржпрзЗ ржХрж╛ржЬржЧрзБрж▓рзЛ ржХрж░рждрзЗ ржкрж╛рж░рзЗ рж╕рзЗржЧрзБрж▓рзЛ рж╣рждрзЗ ржкрж╛рж░рзЗ ржПржХржЯрж┐ ржЗржиржкрзБржЯ ржлрж┐рж▓рзНржб ржЖржкржбрзЗржЯ ржХрж░рж╛, ржПржХржЯрж┐ ржкржгрзНржп ржХрж┐ржирждрзЗ HTTP POST request ржжрзЗржУржпрж╝рж╛, ржЕржержмрж╛ ржЗржЙржЬрж╛рж░ржХрзЗ ржЕржирзНржп ржПржХржЯрж┐ рж╕рзНржХрзНрж░рж┐ржирзЗ navigate ржХрж░рж╛ред Event handler ржП ["side effects"](https://en.wikipedia.org/wiki/Side_effect_(computer_science)) ржерж╛ржХрзЗ (ржПржЧрзБрж▓рзЛ program ржПрж░ рж╕рзНржЯрзЗржЯ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзЗ) ржпрж╛ ржЗржЙржЬрж╛рж░рзЗрж░ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрзЛржирзЛ ржХрзНрж░рж┐ржпрж╝рж╛рж░ ржжрзНржмрж╛рж░рж╛ ржШржЯрзЗ (ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк  button click ржЕржержмрж╛ typing)ред

ржХржЦржирзЛ ржХржЦржирзЛ ржПржЯрж╛ ржпржерзЗрж╖рзНржЯ ржиржпрж╝ред ржПржХржЯрж┐ `ChatRoom` ржХржорзНржкрзЛржирзЗржирзНржЯ ржПрж░ ржмрзНржпрж╛ржкрж╛рж░рзЗ ржнрж╛ржмрзБржи ржпрзЗржЯрж┐ ржпржЦржиржЗ рж╕рзНржХрзНрж░рж┐ржирзЗ ржжрзГрж╢рзНржпржорж╛ржи рж╣рзЯ рждржЦржиржЗ рждрж╛ржХрзЗ ржЪрзНржпрж╛ржЯ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ ржХрж╛ржирзЗржХрзНржЯ ржХрж░рждрзЗ рж╣ржпрж╝ред ржПржХржЯрж┐ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ ржХрж╛ржирзЗржХрзНржЯ ржХрж░рж╛ pure calculation ржирзЯ (ржПржЯрж┐ ржПржХржЯрж┐ side effect) рждрж╛ржЗ ржПржЯрж┐ рж░рзЗржирзНржбрж╛рж░ ржПрж░ рж╕ржоржпрж╝ рж╕ржорзНржкржирзНржи рж╣рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛ред рждржмрзЗ, click ржПрж░ ржоржд ржХрзЛржи ржирж┐рж░рзНржжрж┐рж╖рзНржЯ event ржирзЗржЗ ржпрж╛рж░ ржХрж╛рж░ржгрзЗ `ChatRoom` ржкрзНрж░ржжрж░рзНрж╢рж┐ржд рж╣рзЯред

***Effects* ржЖржкржирж╛ржХрзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрзЛржирзЛ Event-ржПрж░ ржорж╛ржзрзНржпржорзЗ ржиржпрж╝, ржмрж░ржВ рж░рзЗржирзНржбрж╛рж░рж┐ржВ ржжрзНржмрж╛рж░рж╛ рж╕рзГрж╖рзНржЯ side effect ржЧрзБрж▓рзЛ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рждрзЗ ржжрзЗржпрж╝ред** ржЪрзНржпрж╛ржЯрзЗ message ржкрж╛ржарж╛ржирзЛ ржПржХржЯрж┐ *event* ржХрж╛рж░ржг ржПржЯрж┐ рж╕рж░рж╛рж╕рж░рж┐ ржПржХржЬржи ржЗржЙржЬрж╛рж░рзЗрж░ ржжрзНржмрж╛рж░рж╛ ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рж╛рж░ ржорж╛ржзрзНржпржорзЗ ржШржЯрзЗред рждржмрзЗ, рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ ржХрж╛ржирзЗржХрж╢ржи рж╕рзЗржЯржЖржк ржХрж░рж╛ ржПржХржЯрж┐ *Effect* ржХрж╛рж░ржг ржПржЯрж╛ (ржЕрж░рзНржерж╛рзО рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ ржХрж╛ржирзЗржХрзНржЯрзЗржб рж╣ржУрзЯрж╛) рж╕ржорзНржкржирзНржи рж╣рждрзЗржЗ рж╣ржмрзЗ, ржпрзЗ ржЗржирзНржЯрж╛рж░тАНрзНржпрж╛ржХрж╢ржирзЗрж░ ржХрж╛рж░ржгрзЗржЗ ржХржорзНржкрзЛржирзЗржирзНржЯ ржкрзНрж░ржжрж░рзНрж╢рж┐ржд рж╣рзЛржХ ржирж╛ ржХрзЗржирзЛ рждрж╛рждрзЗ ржХрж┐ржЫрзБ ржЖрж╕рзЗ ржпрж╛рзЯ ржирж╛ред Effects рж╕рзНржХрзНрж░рж┐ржи ржЖржкржбрзЗржЯрзЗрж░ ржкрж░рзЗ ржПржХржЯрж┐ [commit](/learn/render-and-commit) ржПрж░ рж╢рзЗрж╖рзЗ рж░рж╛ржи ржХрж░рзЗред ржХрж┐ржЫрзБ external system (ржпрзЗржоржи network ржЕржержмрж╛ ржПржХржЯрж┐ third-party library) ржПрж░ рж╕рж╛ржерзЗ React component ржЧрзБрж▓рзЛ synchronize ржХрж░рж╛рж░ ржЬржирзНржп ржПржЯрж┐ ржПржХржЯрж┐ ржнрж╛рж▓рзЛ рж╕ржорзЯред

<Note>

ржПржЗ ржкрзЗржЬрзЗ ржПржЦрж╛ржирзЗ ржПржмржВ рж╕рж╛ржоржирзЗ, ржмрзЬ рж╣рж╛рждрзЗрж░ E ржпрзБржХрзНржд "Effect" ржЙржкрж░рзЗрж░ React-specific рж╕ржВржЬрзНржЮрж╛ ржмрзЛржЭрж╛рзЯ, ржЕрж░рзНржерж╛рзО рж░рзЗржирзНржбрж╛рж░рж┐ржВрзЯрзЗрж░ ржлрж▓рзЗ рж╕рзГрж╖рзНржЯ side effectред ржмрж┐рж╕рзНрждрзГржд ржПржЗ ржкрзНрж░рзЛржЧрзНрж░рж╛ржорж┐ржВ concept ржЯрж┐ ржмрзБржЭрж╛рждрзЗ, ржЖржорж░рж╛ ржПржЯрж┐ржХрзЗ "side effect" ржмрж▓ржмрзЛред

</Note>


## ржЖржкржирж╛рж░ ржХрзЛржи Effect ржкрзНрж░рзЯрзЛржЬржи ржирж╛ржУ рж╣рждрзЗ ржкрж╛рж░рзЗ {/*you-might-not-need-an-effect*/}

**ржЕржкрзНрж░рзЯрзЛржЬржирзЗ ржЖржкржирж╛рж░ component ржП Effects ржЕрзНржпрж╛ржб ржХрж░ржмрзЗржи ржирж╛ред** ржоржирзЗ рж░рж╛ржЦржмрзЗржи ржпрзЗ Effect рж╕рж╛ржзрж╛рж░ржгржд ржЖржкржирж╛рж░ React ржХрзЛржбрзЗрж░ ржерзЗржХрзЗ "step out" ржХрж░рждрзЗ ржПржмржВ ржХрж┐ржЫрзБ *ржПржХрзНрж╕ржЯрж╛рж░рзНржирж╛рж▓* рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ рж╕рж╛ржерзЗ synchronize (рж╕рж╛ржоржЮрзНржЬрж╕рзНржп рждрзИрж░рж┐) ржХрж░рждрзЗ ржмрзНржпржмрж╣рзГржд рж╣рзЯред ржПрж░ ржоржзрзНржпрзЗ рж░рзЯрзЗржЫрзЗ browser APIs, third-party widgets, network ржПржмржВ ржЖрж░ржУ ржЕржирзЗржХ ржХрж┐ржЫрзБред ржпржжрж┐ ржЖржкржирж╛рж░ Effect ржЯрж┐ ржХрзЗржмрж▓ ржЕржирзНржп state ржПрж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ ржХрж┐ржЫрзБ state ржХрзЗ рж╕рж╛ржоржЮрзНржЬрж╕рзНржп ржХрж░рзЗ, [рждржмрзЗ ржЖржкржирж╛рж░ ржХрзЛржи Effect ржкрзНрж░рзЯрзЛржЬржи ржирж╛ржУ рж╣рждрзЗ ржкрж╛рж░рзЗред](/learn/you-might-not-need-an-effect)

## ржХрзАржнрж╛ржмрзЗ ржПржХржЯрж┐ Effect рж▓рж┐ржЦржмрзЗржи {/*how-to-write-an-effect*/}

ржПржХржЯрж┐ Effect рж▓рж┐ржЦрждрзЗ, ржПржЗ рждрж┐ржиржЯрж┐ ржзрж╛ржк ржЕржирзБрж╕рж░ржг ржХрж░рзБржиржГ 

1. **Effect ржбрж┐ржХрзНрж▓рзЗрзЯрж╛рж░ ржХрж░рзБржи** By default, ржЖржкржирж╛рж░ Effect ржкрзНрж░рждрзНржпрзЗржХ [commit](/learn/render-and-commit) ржПрж░ ржкрж░ рж░рж╛ржи ржХрж░ржмрзЗред
2. **Effect ржПрж░ dependency ржЧрзБрж▓рзЛ specify ржХрж░рзБржи** ржмрзЗрж╢рж┐рж░ржнрж╛ржЧ Effects ржкрзНрж░рждрзНржпрзЗржХржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░ рж╣ржУрзЯрж╛рж░ ржкрж░рзЗ re-run рж╣ржУрзЯрж╛рж░ ржерзЗржХрзЗ *ржпржЦржи ржкрзНрж░рзЯрзЛржЬржи* рждржЦржи re-run рж╣ржУрзЯрж╛ ржЙржЪрж┐рждред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржПржХржЯрж┐ fade-in animation ржХрзЗржмрж▓ рждржЦржирж┐ ржЯрзНрж░рж┐ржЧрж╛рж░ ржХрж░рж╛ ржЙржЪрж┐ржд ржпржЦржи ржХрзЛржи ржПржХржЯрж┐ component ржжрзГрж╢рзНржпржорж╛ржи рж╣рзЯред ржХрзЛржи chat room ржПрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзЛржЧ рж╕рзНржерж╛ржкржи ржПржмржВ ржмрж┐ржЪрзНржЫрж┐ржирзНржи рждржЦржиржЗ ржШржЯрзЗ ржпржЦржи component ржЯрж┐ ржжрзГрж╢рзНржпржорж╛ржи ржПржмржВ ржЕржжрзГрж╢рзНржпржорж╛ржи рж╣рзЯрзЗ ржпрж╛рзЯ ржмрж╛ ржпржЦржи chat room ржЯрж┐ ржкрж░рж┐ржмрж░рзНрждржи рж╣рзЯред ржЖржкржирж┐ ржХрзАржнрж╛ржмрзЗ *dependencies* specify ржХрж░рж╛рж░ ржорж╛ржзрзНржпржорзЗ ржПржЯрж┐ ржХржирзНржЯрзНрж░рзЛрж▓ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи рждрж╛ рж╢рж┐ржЦрждрзЗ ржкрж╛рж░ржмрзЗржиред
3. **ржкрзНрж░рзЯрзЛржЬржирзЗ cleanup ржЕрзНржпрж╛ржб ржХрж░рзБржи** ржХрж┐ржЫрзБ Effects ржХрзАржнрж╛ржмрзЗ ржерж╛ржорж╛ржирзЛ рж╣ржмрзЗ, undo рж╣ржмрзЗ ржмрж╛ ржПржЧрзБрж▓рзЛ ржпрж╛ ржХрж░ржЫрзЗ рждрж╛ clean up ржХрж░рждрзЗ рж╣ржмрзЗ рждрж╛ specify ржХрж░рзЗ ржжрж┐рждрзЗ рж╣рзЯред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, "connect" ржПрж░ ржЬржирзНржп ржкрзНрж░рзЯрзЛржЬржи "disconnect", "subscribe" ржПрж░ ржЬржирзНржп "unsubscribe", and "fetch" ржПрж░ ржЬржирзНржп ржкрзНрж░рзЯрзЛржЬржи рж╣рзЯржд "cancel" ржЕржержмрж╛ "ignore"ред ржЖржкржирж┐ ржПржХржЯрж┐ *cleanup function* рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ ржХрзАржнрж╛ржмрзЗ ржПржЯрж┐ ржХрж░ржмрзЗржи рждрж╛ рж╢рж┐ржЦржмрзЗржиред

ржЖрж╕рзБржи, ржПржмрж╛рж░ ржкрзНрж░рждрж┐ржЯрж┐ ржзрж╛ржк ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржжрзЗржЦрж┐ред

### ржзрж╛ржк рзз: ржПржХржЯрж┐ Effect ржбрж┐ржХрзНрж▓рзЗрзЯрж╛рж░ {/*step-1-declare-an-effect*/}

ржЖржкржирж╛рж░ component ржП ржХрзЛржи Effect ржбрж┐ржХрзНрж▓рзЗрзЯрж╛рж░ ржХрж░рждрзЗ, [`useEffect` рж╣рзБржХ](/reference/react/useEffect) React ржерзЗржХрзЗ import ржХрж░рзБржи:

```js
import { useEffect } from 'react';
```

ржПрж░ржкрж░рзЗ, ржПржЯрж┐ржХрзЗ ржЖржкржирж╛рж░ component ржПрж░ top level ржП call ржХрж░рзБржи ржПржмржВ Effects ржПрж░ ржоржзрзНржпрзЗ ржХрж┐ржЫрзБ code рж░рж╛ржЦрзБржиред

```js {2-4}
function MyComponent() {
  useEffect(() => {
    // Code here will run after *every* render
  });
  return <div />;
}
```

ржкрзНрж░рждрж┐ржмрж╛рж░ ржпржЦржи component рж░рзЗржирзНржбрж╛рж░ ржХрж░ржмрзЗ, React рж╕рзНржХрж┐ржи ржЖржкржбрзЗржЯ ржХрж░ржмрзЗ *ржПржмржВ ржПрж░ ржкрж░рзЗ* `useEffect` ржПрж░ ржнрж┐рждрж░рзЗрж░ ржХрзЛржб рж░рж╛ржи ржХрж░ржмрзЗред ржЕрж░рзНржерж╛рзО, **`useEffect` ржПржХ ржЯрзБржХрж░рж╛ ржХрзЛржб рж░рж╛ржи рж╣рждрзЗ " ржмрж┐рж▓ржорзНржм ржХрж░рж╛рзЯ " ржпрждржХрзНрж╖ржг ржирж╛ рж░рзЗржирзНржбрж╛рж░ржЯрж┐ рж╕рзНржХрж┐ржирзЗ reflected рж╣рзЯред**

ржЪрж▓рзБржи ржжрзЗржЦрж╛ ржпрж╛ржХ ржХрзАржнрж╛ржмрзЗ ржЖржкржирж┐ Effect ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржХржЯрж┐ external system ржПрж░ рж╕рж╛ржерзЗ synchronize ржХрж░ржмрзЗржиред ржПржХржЯрж┐ `<VideoPlayer>` React component ржПрж░ ржХржерж╛ ржЪрж┐ржирзНрждрж╛ ржХрж░рзБржиред ржПржЯрж┐ ржХржирзНржЯрзНрж░рзЛрж▓ ржХрж░рждрзЗ ржнрж╛рж▓рзЛ рж╣ржмрзЗ ржпржжрж┐ ржПржЯрж┐рждрзЗ ржПржХржЯрж┐ `isPlaying` ржкрзНрж░ржкрж╕ ржкрж╛ржарж╛ржирзЛ рж╣рзЯ ржпрзЗ ржПржЯрж┐ ржЪрж╛рж▓рзБ ржЖржЫрзЗ ржЕржержмрж╛ ржмржирзНржз:

```js
<VideoPlayer isPlaying={isPlaying} />;
```

ржЖржкржирж╛рж░ ржХрж╛рж╕рзНржЯржо `VideoPlayer` component ржЯрж┐ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗрж░ built-in [`<video>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video) tag рж░рзЗржирзНржбрж╛рж░ ржХрж░рзЗ:

```js
function VideoPlayer({ src, isPlaying }) {
  // TODO: do something with isPlaying
  return <video src={src} />;
}
```

рждржмрзЗ, browser ржПрж░ `<video>` tag ржП `isPlaying` ржкрзНрж░ржкрж╕ ржирж╛ржЗред ржПржЯрж┐ ржирж┐рзЯржирзНрждрзНрж░ржгрзЗрж░ ржПржХржорж╛рждрзНрж░ ржЙржкрж╛рзЯ рж╣рж▓рзЛ DOM element ржЯрж┐рждрзЗ ржорзНржпрж╛ржирзБрзЯрж╛рж▓рж┐ [`play()`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/play) ржПржмржВ  [`pause()`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/pause) call ржХрж░рж╛ред **ржЖржкржирж╛ржХрзЗ `isPlaying` ржкрзНрж░ржкрзНрж╕ ржПрж░ value ржЯрж┐ synchronize ржХрж░рждрзЗ рж╣ржмрзЗ, ржпрж╛ `play()` ржПржмржВ `pause()`ржХрзЗ ржХрж▓ ржХрж░рзЗ video ржЯрж┐ ржмрж░рзНрждржорж╛ржирзЗ ржмрж╛ржЬрж╛ржирзЛ ржЙржЪрж┐ржд ржХрж┐ржирж╛ рждрж╛ ржирж┐рж░рзНржжрзЗрж╢ ржХрж░рзЗред**

ржЖржорж╛ржжрзЗрж░ ржкрзНрж░ржержорзЗ `<video>` DOM node ржПрж░ ржПржХржЯрж┐ [ref ржкрзЗрждрзЗ рж╣ржмрзЗ](/learn/manipulating-the-dom-with-refs)ред

рж░рзЗржирзНржбрж╛рж░рж┐ржВ ржПрж░ рж╕ржорзЯ ржЖржкржирж┐ `play()` ржЕржержмрж╛ `pause()` ржХрж▓ ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи, рждржмрзЗ ржПржЯрж┐ рж╕ржарж┐ржХ ржирзЯ:

<Sandpack>

```js
import { useState, useRef, useEffect } from 'react';

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  if (isPlaying) {
    ref.current.play();  // Calling these while rendering isn't allowed.
  } else {
    ref.current.pause(); // Also, this crashes.
  }

  return <video ref={ref} src={src} loop playsInline />;
}

export default function App() {
  const [isPlaying, setIsPlaying] = useState(false);
  return (
    <>
      <button onClick={() => setIsPlaying(!isPlaying)}>
        {isPlaying ? 'Pause' : 'Play'}
      </button>
      <VideoPlayer
        isPlaying={isPlaying}
        src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
      />
    </>
  );
}
```

```css
button { display: block; margin-bottom: 20px; }
video { width: 250px; }
```

</Sandpack>

ржПржЗ ржХрзЛржбржЯрж┐ рж╕ржарж┐ржХ ржирж╛ рж╣ржУрзЯрж╛рж░ ржХрж╛рж░ржг рж╣рж▓рзЛ ржПржЯрж┐ рж░рзЗржирзНржбрж╛рж░рж┐ржВ ржПрж░ рж╕ржорзЯ DOM node ржПрж░ рж╕рж╛ржерзЗ ржХрж┐ржЫрзБ ржПржХржЯрж╛ ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзЗред React ржП, [рж░рзЗржирзНржбрж╛рж░рж┐ржВ JSX ржПрж░ pure calculation рж╣ржУрзЯрж╛ ржЙржЪрж┐ржд](/learn/keeping-components-pure) ржПржмржВ DOM ржХрзЗ modify ржХрж░рзЗ ржПржоржи ржХрзЛржи side effects ржерж╛ржХрж╛ ржЙржЪрж┐ржд ржирзЯред

ржЙржкрж░ржирзНрждрзБ, ржпржЦржи `VideoPlayer` ржХрзЗ ржкрзНрж░ржержоржмрж╛рж░рзЗрж░ ржЬржирзНржп call ржХрж░рж╛ рж╣рзЯ, ржПржЯрж┐рж░ DOM рждржЦржи exist ржХрж░рзЗ ржирж╛! `play()` ржмрж╛ `pause()` ржХрж░рж╛рж░ ржЬржирзНржп ржПржЦрж╛ржирзЗ ржХрзЛржи DOM node ржирж╛ржЗ, ржХрж╛рж░ржг React ржЬрж╛ржирзЗ ржирж╛ ржХрзА DOM рждрзИрж░рж┐ рж╣ржмрзЗ ржпрждржХрзНрж╖ржг ржирж╛ ржЖржкржирж┐ JSX рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗржиред 

ржПржЦрж╛ржирзЗ рж╕ржорж╛ржзрж╛ржиржЯрж┐ рж╣рж▓рзЛ **рж░рзЗржирзНржбрж╛рж░рж┐ржВ calculation ржПрж░ ржмрж╛ржЗрж░рзЗ рж╕рж░рж╛ржирзЛрж░ ржЬржирзНржп `useEffect` ржПрж░ ржжрзНржмрж╛рж░рж╛ side effect ржЯрж┐ wrap ржХрж░рзЗ рж░рж╛ржЦрж╛:**

```js {6,12}
import { useEffect, useRef } from 'react';

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() => {
    if (isPlaying) {
      ref.current.play();
    } else {
      ref.current.pause();
    }
  });

  return <video ref={ref} src={src} loop playsInline />;
}
```

DOM update ржХрзЗ ржПржХржЯрж┐ Effect ржжрж┐рзЯрзЗ wrap ржХрж░рж╛рж░ ржорж╛ржзрзНржпржорзЗ, ржЖржкржирж┐ ржкрзНрж░ржержорзЗ React ржХрзЗ screen ржЯрж┐ ржЖржкржбрзЗржЯ ржХрж░рждрзЗ ржжрж┐ржиред ржПрж░ржкрж░рзЗ ржЖржкржирж╛рж░ Effect рж░рж╛ржи рж╣ржмрзЗред

ржпржЦржи ржЖржкржирж╛рж░ `VideoPlayer` component ржЯрж┐ рж░рзЗржирзНржбрж╛рж░ ржХрж░рзЗ (рж╣рзЯ ржкрзНрж░ржержоржмрж╛рж░ ржмрж╛ ржпржжрж┐ ржПржЯрж┐ ржкрзБржирж░рж╛рзЯ рж░рзЗржирзНржбрж╛рж░ ржХрж░рзЗ), ржХрзЯрзЗржХржЯрж┐ ржЬрж┐ржирж┐рж╕ ржШржЯржмрзЗред ржкрзНрж░ржержорзЗ, React рж╕рзНржХрж┐ржи ржЖржкржбрзЗржЯ ржХрж░ржмрзЗ, `<video>` tag ржЯрж┐ рж╕ржарж┐ржХ ржкрзНрж░ржкрж╕ рж╕рж╣ DOM ржП ржЖржЫрзЗ ржХрж┐ржирж╛ рждрж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░ржмрзЗ ред рждрж╛рж░ржкрж░рзЗ React ржЖржкржирж╛рж░ Effect ржЪрж╛рж▓рж╛ржмрзЗред ржЕржмрж╢рзЗрж╖рзЗ, ржЖржкржирж╛рж░ Effect ржЯрж┐ `isPlaying` ржПрж░ ржорж╛ржирзЗрж░ ржЙржкрж░ depend ржХрж░рзЗ `play()` ржмрж╛ `pause()` ржХрж▓ ржХрж░ржмрзЗред

Play/Pause ржПржХрж╛ржзрж┐ржХржмрж╛рж░ ржЪрж╛ржкрзБржи ржПржмржВ ржжрзЗржЦрзБржи video player ржХрзАржнрж╛ржмрзЗ `isPlaying` ржПрж░ value рждрзЗ synchronize ржерж╛ржХрзЗ:

<Sandpack>

```js
import { useState, useRef, useEffect } from 'react';

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() => {
    if (isPlaying) {
      ref.current.play();
    } else {
      ref.current.pause();
    }
  });

  return <video ref={ref} src={src} loop playsInline />;
}

export default function App() {
  const [isPlaying, setIsPlaying] = useState(false);
  return (
    <>
      <button onClick={() => setIsPlaying(!isPlaying)}>
        {isPlaying ? 'Pause' : 'Play'}
      </button>
      <VideoPlayer
        isPlaying={isPlaying}
        src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
      />
    </>
  );
}
```

```css
button { display: block; margin-bottom: 20px; }
video { width: 250px; }
```

</Sandpack>

ржПржЗ ржЙржжрж╛рж╣рж░ржгрзЗ, ржЖржкржирж┐ ржпрзЗ "external system" React state ржПрж░ рж╕рж╛ржерзЗ synchronize ржХрж░рзЗржЫрзЗржи рждрж╛ рж╣рж▓рзЛ ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржорж┐ржбрж┐рзЯрж╛ APIред ржЖржкржирж┐ legacy non-React code (ржпрзЗржоржи jQuery plugins) ржерзЗржХрзЗ declarative React component ржП wrap ржХрж░рждрзЗ  ржЕржирзБрж░рзВржк ржкржжрзНржзрждрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред 

ржоржирзЗ рж░рж╛ржЦржмрзЗржи ржпрзЗ ржХрзЛржи ржнрж┐ржбрж┐ржУ ржкрзНрж▓рзЗрзЯрж╛рж░ ржХржирзНржЯрзНрж░рзЛрж▓ ржХрж░рж╛ ржкрзНрж░рж╛ржХрзНржЯрж┐ржХрж╛рж▓рж┐ ржЖрж░ржУ ржЬржЯрж┐рж▓ред `play()` ржХрж▓ fail рж╣рждрзЗ ржкрж╛рж░рзЗ, user built-in ржмрзНрж░рж╛ржЙржЬрж╛рж░ control ржЧрзБрж▓рзЛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ play ржмрж╛ pause ржХрж░рждрзЗ ржкрж╛рж░рзЗ, ржПржмржВ ржЖрж░ржУ ржЕржирзЗржХ ржХрж┐ржЫрзБред ржПржЗ ржЙржжрж╛рж╣рж░ржгржЯрж┐ ржЦрзБржмржЗ рж╕рж╣ржЬ ржПржмржВ ржЕрж╕ржорзНржкрзВрж░рзНржгред

<Pitfall>

By default, Effect ржЧрзБрж▓рзЛ *ржкрзНрж░рждрзНржпрзЗржХ* рж░рзЗржирзНржбрж╛рж░рзЗрж░ ржкрж░рзЗ run рж╣рзЯред ржП ржХрж╛рж░ржгрзЗржЗ ржП ржЬрж╛рждрзАрзЯ ржХрзЛржб **infinite loop рждрзИрж░рж┐ ржХрж░рзЗ:**

```js
const [count, setCount] = useState(0);
useEffect(() => {
  setCount(count + 1);
});
```

рж░рзЗржирзНржбрж╛рж░рж┐ржВ ржПрж░ *ржлрж▓рж╕рзНржмрж░рзВржк* Effect ржЪрж▓рзЗред state рж╕рзЗржЯ ржХрж░рж╛ рж░рзЗржирзНржбрж╛рж░рж┐ржВ *ржЯрзНрж░рж┐ржЧрж╛рж░ ржХрж░рзЗ*ред ржПржХржЯрж┐ Effect ржП рж╕ржЩрзНржЧрзЗ рж╕ржЩрзНржЧрзЗ state рж╕рзЗржЯ ржХрж░рж╛ ржпрзЗржи ржПржХржЯрж┐ ржорж╛рж▓рзНржЯрж┐ржкрзНрж▓рж╛ржЧржХрзЗ рждрж╛рж░ ржирж┐ржЬрзЗрж░ ржоржзрзНржпрзЗржЗ ржкрзНрж▓рж╛ржЧ ржХрж░рж╛ред Effect run рж╣рзЯ, ржПржЯрж┐ state рж╕рзЗржЯ ржХрж░рзЗ, ржпрж╛ ржПржХржЯрж┐ re-render рждрзИрж░рж┐ ржХрж░рзЗ, ржпрж╛рж░ ржлрж▓рзЗ Effect ржЯрж┐ run рж╣рзЯ, ржПржЯрж┐ ржЖржмрж╛рж░ state ржЯрж┐ рж╕рзЗржЯ ржХрж░рзЗ, ржПржЯрж┐ ржЕржирзНржп ржПржХржЯрж┐ re-render рждрзИрж░рж┐ ржХрж░рзЗ, ржЖрж░ ржПржнрж╛ржмрзЗржЗ ржЪрж▓рждрзЗ ржерж╛ржХрзЗред

Effect ржЧрзБрж▓рзЛ рж╕рж╛ржзрж╛рж░ржгржд ржЖржкржирж╛рж░ component ржЧрзБрж▓рзЛржХрзЗ ржПржХржЯрж┐ *external* system ржПрж░ рж╕рж╛ржерзЗ synchronize ржХрж░рзЗред ржпржжрж┐ ржХрзЛржи external system ржирж╛ ржерж╛ржХрзЗ ржПржмржВ ржЖржкржирж┐ ржХрзЗржмрж▓ ржЕржирзНржп state ржПрж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ ржХрж┐ржЫрзБ state ржПржбржЬрж╛рж╕рзНржЯ ржХрж░рждрзЗ ржЪрж╛ржи, [ржЖржкржирж╛рж░ ржХрзЛржи Effect ржкрзНрж░рзЯрзЛржЬржи ржирж╛ржУ рж╣рждрзЗ ржкрж╛рж░рзЗред](/learn/you-might-not-need-an-effect)

</Pitfall>

### ржзрж╛ржк рзи: Effect ржПрж░ dependency ржЧрзБрж▓рзЛ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрж░рзБржи {/*step-2-specify-the-effect-dependencies*/}

By default,  Effect ржЧрзБрж▓рзЛ *ржкрзНрж░рждрзНржпрзЗржХ* рж░рзЗржирзНржбрж╛рж░рзЗрж░ ржкрж░рзЗ run рж╣рзЯред ржЕржирзЗржХ рж╕ржорзЯ, ржПржЯрж┐ **ржЖржкржирж┐ ржЪрж╛ржи ржирж╛:**

- ржХржЦржирзЛ ржХржЦржирзЛ, ржПржЯрж┐ slow ржХрж╛ржЬ ржХрж░рзЗред ржПржХржЯрж┐ external system ржПрж░ рж╕рж╛ржерзЗ Synchroniz ржХрж░рж╛ рж╕рж░рзНржмржжрж╛ рждрж╛рзОржХрзНрж╖ржгрж┐ржХ рж╣рзЯ ржирж╛, рж╕рзБрждрж░рж╛ржВ ржЖржкржирж┐ ржПржЯрж┐ ржкрзНрж░рзЯрзЛржЬржи ржирж╛ рж╣рж▓рзЗ ржПржЯрж┐ ржПрзЬрж┐рзЯрзЗ ржпрзЗрждрзЗ ржЪрж╛ржЗрждрзЗ ржкрж╛рж░рзЗржиред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржЖржкржирж┐ ржкрзНрж░рждрж┐ keystoke ржП ржЪрзНржпрж╛ржЯ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ ржкрзБржирж░рж╛ржпрж╝ рж╕ржВржпрзЛржЧ рж╕рзНржерж╛ржкржи ржХрж░рждрзЗ ржЪрж╛ржи ржирж╛ред 
- ржХржЦржирзЛ ржХржЦржирзЛ, ржПржЯрж┐ ржнрзБрж▓ред  ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржЖржкржирж┐ ржкрзНрж░рждрж┐ржЯрж┐ keystroke ржП ржХрзЛржи component ржлрзЗржб-ржЗржи animation ржЯрзНрж░рж┐ржЧрж╛рж░ ржХрж░рждрзЗ ржЪрж╛ржи ржирж╛ред component ржЯрж┐ ржкрзНрж░ржержоржмрж╛рж░рзЗрж░ ржоржд appear рж╣рж▓рзЗ animation ржЯрж┐ ржХрзЗржмрж▓ ржПржХржмрж╛рж░ play рж╣ржУрзЯрж╛ ржЙржЪрж┐рждред

рж╕ржорж╕рзНржпрж╛ржЯрж┐ ржкрзНрж░ржжрж░рзНрж╢ржирзЗрж░ ржХрж░рждрзЗ, ржПржЦрж╛ржирзЗ ржХрзЯрзЗржХржЯрж┐ `console.log` ржХрж▓ ржПржмржВ ржПржХржЯрж┐ ржЯрзЗржХрзНрж╕ржЯ ржЗржиржкрзБржЯ рж╕рж╣ ржкрзВрж░рзНржмржмрж░рзНрждрзА ржЙржжрж╛рж╣рж░ржгржЯрж┐ ржпрзЗржЯрж┐ parent component ржПрж░ рж╕рзНржЯрзЗржЯржХрзЗ update ржХрж░рзЗ ред ржЦрзЗрзЯрж╛рж▓ ржХрж░рзБржи ржХрзАржнрж╛ржмрзЗ typing ржПрж░ ржлрж▓рзЗ Effect ржЯрж┐ re-run рж╣рзЯ:

<Sandpack>

```js
import { useState, useRef, useEffect } from 'react';

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() => {
    if (isPlaying) {
      console.log('Calling video.play()');
      ref.current.play();
    } else {
      console.log('Calling video.pause()');
      ref.current.pause();
    }
  });

  return <video ref={ref} src={src} loop playsInline />;
}

export default function App() {
  const [isPlaying, setIsPlaying] = useState(false);
  const [text, setText] = useState('');
  return (
    <>
      <input value={text} onChange={e => setText(e.target.value)} />
      <button onClick={() => setIsPlaying(!isPlaying)}>
        {isPlaying ? 'Pause' : 'Play'}
      </button>
      <VideoPlayer
        isPlaying={isPlaying}
        src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
      />
    </>
  );
}
```

```css
input, button { display: block; margin-bottom: 20px; }
video { width: 250px; }
```

</Sandpack>

ржЖржкржирж┐ `useEffect` ржПрж░ ржжрзНржмрж┐рждрзАрзЯ ржЖрж░рзНржЧрзБржорзЗржирзНржЯ рж╣рж┐рж╕рж╛ржмрзЗ *dependency* ржПрж░ ржПржХржЯрж┐ array specify ржХрж░рзЗ React ржХрзЗ **ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯржнрж╛ржмрзЗ Effect ржЯрж┐ re-running ржПрзЬрж┐рзЯрзЗ** ржпрзЗрждрзЗ ржмрж▓рждрзЗ ржкрж╛рж░рзЗржиред ржЙржкрж░рзЗрж░ ржЙржжрж╛рж╣рж░ржгрзЗрж░ рззрзк рж▓рж╛ржЗржирзЗ ржПржХржЯрж┐ ржЦрж╛рж▓рж┐ `[]` array ржпрзБржХрзНржд ржХрж░рзЗ рж╢рзБрж░рзБ ржХрж░рзБржи:

```js {3}
  useEffect(() => {
    // ...
  }, []);
```

ржЖржкржирж┐ ржПржХржЯрж┐ error ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗржи ржпрзЗ `React Hook useEffect has a missing dependency: 'isPlaying'`:

<Sandpack>

```js
import { useState, useRef, useEffect } from 'react';

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() => {
    if (isPlaying) {
      console.log('Calling video.play()');
      ref.current.play();
    } else {
      console.log('Calling video.pause()');
      ref.current.pause();
    }
  }, []); // This causes an error

  return <video ref={ref} src={src} loop playsInline />;
}

export default function App() {
  const [isPlaying, setIsPlaying] = useState(false);
  const [text, setText] = useState('');
  return (
    <>
      <input value={text} onChange={e => setText(e.target.value)} />
      <button onClick={() => setIsPlaying(!isPlaying)}>
        {isPlaying ? 'Pause' : 'Play'}
      </button>
      <VideoPlayer
        isPlaying={isPlaying}
        src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
      />
    </>
  );
}
```

```css
input, button { display: block; margin-bottom: 20px; }
video { width: 250px; }
```

</Sandpack>

рж╕ржорж╕рзНржпрж╛ржЯрж┐ рж╣рж▓рзЛ ржЖржкржирж╛рж░ Effect ржПрж░ ржоржзрзНржпрзЗрж░ ржХрзЛржб ржХрж┐ ржХрж░ржмрзЗ рждрж╛ рж╕рж┐ржжрзНржзрж╛ржирзНржд ржирзЗржУрзЯрж╛рж░ ржЬржирзНржп `isPlaying` ржкрзНрж░ржкрж╕рзЗрж░ ржЙржкрж░ *ржирж┐рж░рзНржнрж░ ржХрж░рзЗ*, ржХрж┐ржирзНрждрзБ ржПржЗ dependency ржЯрж┐ рж╕рзНржкрж╖рзНржЯржнрж╛ржмрзЗ declare ржХрж░рж╛ рж╣рзЯржирж┐ред ржПржЗ рж╕ржорж╕рзНржпрж╛ржЯрж┐рж░ рж╕ржорж╛ржзрж╛ржи ржХрж░рждрзЗ, dependency array рждрзЗ `isPlaying` ржпрзБржХрзНржд ржХрж░рзБржи:

```js {2,7}
  useEffect(() => {
    if (isPlaying) { // It's used here...
      // ...
    } else {
      // ...
    }
  }, [isPlaying]); // ...so it must be declared here!
```

ржПржЦржи рж╕ржХрж▓ dependency ржЧрзБрж▓рзЛ declare ржХрж░рж╛ рж╣рзЯрзЗ ржЧрзЗржЫрзЗ, рж╕рзБрждрж░рж╛ржВ ржХрзЛржи error ржирж╛ржЗред `[isPlaying]` ржХрзЗ dependency array рждрзЗ рж░рж╛ржЦрж╛рж░ ржорж╛ржирзЗ рж╣рж▓рзЛ React ржХрзЗ ржмрж▓рж╛ ржпрзЗ ржпржжрж┐ `isPlaying` ржПрж░ ржорж╛ржи ржЖржЧрзЗрж░ рж░рзЗржирзНржбрж╛рж░рзЗ ржпрзЗржоржи ржЫрж┐рж▓ рждрзЗржоржи ржерж╛ржХрзЗ рждржмрзЗ re-running рж╕рзНржХрж┐ржк ржХрж░рждрзЗред ржПржЗ ржкрж░рж┐ржмрж░рзНрждржирзЗрж░ ржХрж╛рж░ржгрзЗ, ржЗржиржкрзБржЯ ржлрж┐рж▓рзНржбржЯрж┐рждрзЗ ржЯрж╛ржЗржк ржХрж░рж╛рж▓рзЗржУ Effect ржЯрж┐ re-run рж╣рзЯ ржирж╛, ржХрж┐ржирзНрждрзБ Play/Pause ржмрж╛ржЯржирзЗ press ржХрж░рж▓рзЗ рж╣рзЯ:

<Sandpack>

```js
import { useState, useRef, useEffect } from 'react';

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() => {
    if (isPlaying) {
      console.log('Calling video.play()');
      ref.current.play();
    } else {
      console.log('Calling video.pause()');
      ref.current.pause();
    }
  }, [isPlaying]);

  return <video ref={ref} src={src} loop playsInline />;
}

export default function App() {
  const [isPlaying, setIsPlaying] = useState(false);
  const [text, setText] = useState('');
  return (
    <>
      <input value={text} onChange={e => setText(e.target.value)} />
      <button onClick={() => setIsPlaying(!isPlaying)}>
        {isPlaying ? 'Pause' : 'Play'}
      </button>
      <VideoPlayer
        isPlaying={isPlaying}
        src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
      />
    </>
  );
}
```

```css
input, button { display: block; margin-bottom: 20px; }
video { width: 250px; }
```

</Sandpack>

dependency array рждрзЗ ржПржХрж╛ржзрж┐ржХ dependency ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред ржпржжрж┐ *рж╕ржмржЧрзБрж▓рзЛ* dependency ржПрж░ value ржЧрзБрж▓рзЛ previous render ржПрж░ ржорждржЗ ржерж╛ржХрзЗ ржХрзЗржмрж▓ рждржЦржиржЗ React Effect ржЯрж┐ re-runn ржХрж░ржмрзЗ ржирж╛ред React dependency value ржЧрзБрж▓рзЛржХрзЗ рждрзБрж▓ржирж╛ ржХрж░рждрзЗ [`Object.is`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is) comparison ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржЬрж╛ржирждрзЗ [`useEffect` reference](/reference/react/useEffect#reference) ржжрзЗржЦрзБржиред 

**рж▓ржХрзНрж╖рзНржп ржХрж░рзБржи ржпрзЗ ржЖржкржирж┐ ржЖржкржирж╛рж░ dependency ржЧрзБрж▓рзЛ "choose" ржХрж░рждрзЗ ржкрж╛рж░ржЫрзЗржи ржирж╛ред** ржЖржкржирж┐ ржпрзЗ dependency ржЧрзБрж▓рзЛ specify ржХрж░рзЗржЫрзЗржи рждрж╛ ржпржжрж┐ ржЖржкржирж┐ Effect ржПрж░ ржоржзрзНржпрзЗ ржпрзЗ ржХрзЛржб рж░рзЗржЦрзЗржЫрзЗржи рждрж╛рж░ ржЙржкрж░ base ржХрж░рзЗ React ржПрж░ expectation ржПрж░ рж╕рж╛ржерзЗ ржирж╛ ржорж┐рж▓рзЗ рждрж╛рж╣рж▓рзЗ ржЖржкржирж┐ ржПржХржЯрж┐ lint error ржкрж╛ржмрзЗржиред ржПржЯрж┐ ржЖржкржирж╛рж░ ржХрзЛржбрзЗ ржЕржирзЗржХ bug ржЦрзБржБржЬрзЗ ржкрж╛рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗ ред ржпржжрж┐ ржЖржкржирж┐ ржХрж┐ржЫрзБ ржХрзЛржб re-run ржХрж░рждрзЗ ржирж╛ ржЪрж╛ржи, [*Effect ржХрзЛржб edit ржХрж░рзБржи* ржпрж╛рждрзЗ ржР  dependency-рж░ "ржкрзНрж░рзЯрзЛржЬржи" ржирж╛ рж╣рзЯред](/learn/lifecycle-of-reactive-effects#what-to-do-when-you-dont-want-to-re-synchronize)

<Pitfall>

dependency array ржЫрж╛рзЬрж╛ ржПржмржВ ржПржХржЯрж┐ *empty* `[]` dependency array рж╕рж╣ ржПржжрзЗрж░ behavior ржЖрж▓рж╛ржжрж╛ рж╣рзЯрзЗ ржерж╛ржХрзЗ:

```js {3,7,11}
useEffect(() => {
  // This runs after every render
});

useEffect(() => {
  // This runs only on mount (when the component appears)
}, []);

useEffect(() => {
  // This runs on mount *and also* if either a or b have changed since the last render
}, [a, b]);
```

ржЖржорж░рж╛ ржкрж░ржмрж░рзНрждрзА step ржП "mount" ржПрж░ ржорж╛ржирзЗ ржХрзА рждрж╛ ржнрж╛рж▓рзЛржнрж╛ржмрзЗ ржжрзЗржЦржмрзЛред

</Pitfall>

<DeepDive>

#### dependency array ржерзЗржХрзЗ ржХрзЗржи ref ржмрж╛ржж ржжрзЗржУрзЯрж╛ рж╣рзЯрзЗржЫрж┐рж▓? {/*why-was-the-ref-omitted-from-the-dependency-array*/}

ржПржЗ Effect ржЯрж┐рждрзЗ `ref` ржПржмржВ `isPlaying` ржЙржнрзЯржЗ ржмрзНржпржмрж╣рж╛рж░ рж╣ржЪрзНржЫрзЗ, ржХрж┐ржирзНрждрзБ ржХрзЗржмрж▓ `isPlaying` ржХрзЗ dependency рж╣рж┐рж╕рж╛ржмрзЗ ржбрж┐ржХрзНрж▓рзЗрзЯрж╛рж░ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ:

```js {9}
function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);
  useEffect(() => {
    if (isPlaying) {
      ref.current.play();
    } else {
      ref.current.pause();
    }
  }, [isPlaying]);
```
ржПрж░ ржХрж╛рж░ржг рж╣рж▓ `ref` object ржПрж░ ржПржХржЯрж┐ *stable identity* рж░рзЯрзЗржЫрзЗ: React ржЧрзНржпрж╛рж░рж╛ржирзНржЯрж┐ ржжрзЗрзЯ ржпрзЗ [ржкрзНрж░рждрж┐ рж░рзЗржирзНржбрж╛рж░рзЗ ржПржХржЗ `useRef` ржХрж▓ ржерзЗржХрзЗ рж╕рж░рзНржмржжрж╛ ржПржХржЗ object ржкрж╛ржмрзЗржи](/reference/react/useRef#returns)ред ржПржЯрж┐ ржХржЦржирзЛ ржкрж░рж┐ржмрж░рзНрждржи рж╣рзЯ ржирж╛, рж╕рзБрждрж░рж╛ржВ  ржПржЯрж┐ ржирж┐ржЬрзЗржЗ Effect ржЯрж┐ re-run рж╣ржУрзЯрж╛рж░ ржХрж╛рж░ржг рж╣рждрзЗ ржкрж╛рж░рзЗржирж╛ред ржЕрждржПржм, ржПржЯрж┐ ржмрж┐ржмрзЗржЪрзНржп ржмрж┐рж╖рзЯ ржирзЯ ржпрзЗ ржЖржкржирж┐ ржПржЯрж┐ include ржХрж░ржЫрзЗржи ржХрж┐ ржХрж░рзЗржи ржирж╛ржЗред  ржПржЯрж┐ Includ ржХрж░рж╛ржУ ржарж┐ржХ ржЖржЫрзЗ:

```js {9}
function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);
  useEffect(() => {
    if (isPlaying) {
      ref.current.play();
    } else {
      ref.current.pause();
    }
  }, [isPlaying, ref]);
```

`useState` ржжрзНржмрж╛рж░рж╛ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рж╛ [`set` function ржЧрзБрж▓рзЛрж░ржУ](/reference/react/useState#setstate) stable identity рж░рзЯрзЗржЫрзЗ, рждрж╛ржЗ ржЖржкржирж┐ ржкрзНрж░рж╛рзЯржЗ ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗржи рждрж╛ржжрзЗрж░ dependencies ржерзЗржХрзЗ ржмрж╛ржж ржжрзЗржУрзЯрж╛ рж╣рзЯрзЗржЫрзЗред ржпржжрж┐ lint ржЖржкржирж╛ржХрзЗ error ржЫрж╛рзЬрж╛ржЗ dependency ржмрж╛ржж ржжрж┐рждрзЗ ржжрзЗрзЯ, рждржмрзЗ ржПржЯрж┐ ржХрж░рж╛ ржирж┐рж░рж╛ржкржжред

always-stable dependency ржмрж╛ржж ржжрзЗржУрзЯрж╛ рждржЦржиржЗ ржХрж╛ржЬ ржХрж░рзЗ ржпржЦржи linter "ржжрзЗржЦрждрзЗ" ржкрж╛рж░рзЗ ржпрж╛ object ржЯрж┐ stableред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржпржжрж┐ ржХрзЛржи parent component ржерзЗржХрзЗ `ref` pass ржХрж░рж╛ рж╣рзЯ, ржЖржкржирж╛ржХрзЗ ржПржХржЯрж┐ dependency array specify ржХрж░рждрзЗ рж╣ржмрзЗред ржпрж╛ржЗрж╣рзЛржХ, ржПржЯрж┐ ржнрж╛рж▓рзЛ ржХрж╛рж░ржг ржЖржкржирж┐ ржЬрж╛ржирждрзЗ ржкрж╛рж░ржмрзЗржи ржирж╛ ржпрзЗ parent component рж╕ржмрж╕ржоржпрж╝ ржПржХржЗ рж░рзЗржл ржкрж╛рж╕ ржХрж░рзЗ ржХрж┐ржирж╛, ржЕржержмрж╛ рж╢рж░рзНрждрж╕рж╛ржкрзЗржХрзНрж╖рзЗ ржмрзЗрж╢ ржХржпрж╝рзЗржХржЯрж┐ рж░рзЗржлрзЗрж░ ржПржХржЯрж┐ ржкрж╛рж╕ ржХрж░рзЗ ржХрж┐ржирж╛ред рж╕рзБрждрж░рж╛ржВ ржЖржкржирж╛рж░ Effect ржирж┐рж░рзНржнрж░ _ржХрж░ржмрзЗ_ ржХрзЛржи ref pass ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ рждрж╛рж░ ржЙржкрж░ред

</DeepDive>

### ржзрж╛ржк рзй: ржкрзНрж░рзЯрзЛржЬржирзЗ cleanup ржпрзЛржЧ ржХрж░рзБржи {/*step-3-add-cleanup-if-needed*/}

ржПржХржЯрж┐ ржнрж┐ржирзНржи ржЙржжрж╛рж╣рж░ржг ржмрж┐ржмрзЗржЪржирж╛ ржХрж░рзБржиред ржЖржкржирж┐ ржПржХржЯрж┐ `ChatRoom` component рж▓рж┐ржЦрзЗржЫрзЗржи ржпрж╛ ржПржЯрж┐ ржкрзНрж░ржжрж░рзНрж╢рж┐ржд рж╣ржУрзЯрж╛рж░ рж╕ржорзЯ chat server ржПрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзЛржЧ рж╕рзНржерж╛ржкржи ржХрж░рж╛ ржжрж░ржХрж╛рж░ред ржЖржкржирж╛ржХрзЗ ржПржХржЯрж┐ `createConnection()` API ржжрзЗржУрзЯрж╛ рж╣рзЯрзЗржЫрзЗ ржпрзЗржЯрж┐ `connect()` ржПржмржВ `disconnect()` method ржПрж░ ржПржХржЯрж┐ object рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗред user ржПрж░ ржХрж╛ржЫрзЗ ржкрзНрж░ржжрж░рзНрж╢рж┐ржд рж╣ржУрзЯрж╛рж░ рж╕ржорзЯ ржЖржкржирж┐ ржХрзАржнрж╛ржмрзЗ component ржЯрж┐ржХрзЗ рж╕ржВржпрзБржХрзНржд рж░рж╛ржЦржмрзЗржи?

Effect logic рж▓рж┐ржЦрзЗ рж╢рзБрж░рзБ ржХрж░рзБржи:

```js
useEffect(() => {
  const connection = createConnection();
  connection.connect();
});
```

ржкрзНрж░рждрзНржпрзЗржХржмрж╛рж░ re-render ржПрж░ ржкрж░рзЗ chat ржПрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзЛржЧ рж╕рзНржерж╛ржкржи ржХрж░рж╛ ржзрзАрж░ рж╣ржмрзЗ, рж╕рзБрждрж░рж╛ржВ ржЖржкржирж┐ dependency array ржпрзБржХрзНржд ржХрж░рзБржи:

```js {4}
useEffect(() => {
  const connection = createConnection();
  connection.connect();
}, []);
```

**Effect ржПрж░ ржнрж┐рждрж░рзЗрж░ ржХрзЛржб ржХрзЛржирзЛ props or state ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржирж╛, рж╕рзБрждрж░рж╛ржВ ржЖржкржирж╛рж░ dependency array ржЯрж┐ `[]` (empty)ред ржПржЯрж┐ React ржХрзЗ рж╢рзБржзрзБржорж╛рждрзНрж░ рждржЦржиржЗ ржПржЗ ржХрзЛржбржЯрж┐ ржЪрж╛рж▓рж╛рждрзЗ ржмрж▓рзЗ ржпржЦржи component ржЯрж┐ "ржорж╛ржЙржирзНржЯ" рж╣ржпрж╝, ржЕрж░рзНржерж╛рзО, ржкрзНрж░ржержоржмрж╛рж░рзЗрж░ ржЬржирзНржп рж╕рзНржХрж┐ржирзЗ ржЙржкрж╕рзНржерж┐ржд рж╣рзЯред**

ржЖрж╕рзБржи code ржЯрж┐ рж░рж╛ржи ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рж┐:

<Sandpack>

```js
import { useEffect } from 'react';
import { createConnection } from './chat.js';

export default function ChatRoom() {
  useEffect(() => {
    const connection = createConnection();
    connection.connect();
  }, []);
  return <h1>Welcome to the chat!</h1>;
}
```

```js src/chat.js
export function createConnection() {
  // A real implementation would actually connect to the server
  return {
    connect() {
      console.log('тЬЕ Connecting...');
    },
    disconnect() {
      console.log('тЭМ Disconnected.');
    }
  };
}
```

```css
input { display: block; margin-bottom: 20px; }
```

</Sandpack>

ржПржЗ Effect ржЯрж┐ ржХрзЗржмрж▓ ржорж╛ржЙржирзНржЯ рж╣ржУрзЯрж╛рж░ рж╕ржорзЯ ржЪрж▓рзЗ, рж╕рзБрждрж░рж╛ржВ ржЖржкржирж┐ ржкрзНрж░рждрзНржпрж╛рж╢рж╛ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи console ржПржХржмрж╛рж░ `"тЬЕ Connecting..."` ржкрзНрж░рж┐ржирзНржЯ рж╣ржмрзЗред **рждржмрзЗ, ржЖржкржирж┐ ржпржжрж┐ console ржЪрзЗржХ ржХрж░рзЗржи, ржжрзЗржЦржмрзЗржи `"тЬЕ Connecting..."` ржжрзБржЗ ржмрж╛рж░ ржкрзНрж░рж┐ржирзНржЯ рж╣рзЯрзЗржЫрзЗред ржХрзЗржи ржПржоржи рж╣ржЪрзНржЫрзЗ?**

ржХрж▓рзНржкржирж╛ ржХрж░рзБржи ржпрзЗ `ChatRoom` ржПрж░ component ржЯрж┐ ржЕржирзЗржХ ржЧрзБрж▓рзЛ ржнрж┐ржирзНржи ржнрж┐ржирзНржи рж╕рзНржХрж┐ржи рж╕рж╣ ржПржХржЯрж┐ ржмрзГрж╣рждрзНрждрж░ app ржПрж░ ржПржХржЯрж┐ ржЕржВрж╢ред ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА рждрж╛ржжрзЗрж░ journey рж╢рзБрж░рзБ ржХрж░рзЗ `ChatRoom` ржкрзЗржЗржЬ ржжрж┐рзЯрзЗред component ржЯрж┐ ржорж╛ржЙржирзНржЯ ржХрж░рзЗ ржПржмржВ `connection.connect()` ржХрзЗ ржХрж▓ ржХрж░рзЗред рждрж╛рж░ржкрж░рзЗ ржХрж▓рзНржкржирж╛ ржХрж░рзБржи ржпрзЗ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржЕржирзНржп рж╕рзНржХрж┐ржирзЗ ржирзЗржнрж┐ржЧрзЗржЯ ржХрж░рзЗржЫрзЗ --ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, Settings ржкрзЗржЗржЬрзЗред ржПржЦржи `ChatRoom` ржПрж░ component ржЖржиржорж╛ржЙржирзНржЯред ржЕржмрж╢рзЗрж╖рзЗ, ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА Back ржП ржХрзНрж▓рж┐ржХ ржХрж░рзЗ ржПржмржВ `ChatRoom` ржЯрж┐ ржЖржмрж╛рж░ ржорж╛ржЙржирзНржЯ ржХрж░рзЗред ржПржЯрж┐ ржПржХржЯрж┐ second connection рж╕рзНржерж╛ржкржи ржХрж░ржмрзЗ--рждржмрзЗ ржкрзНрж░ржержо connection ржЯрж┐ ржХржЦржиржЗ ржмрж┐ржЪрзНржЫрж┐ржирзНржи рж╣рзЯржирж┐! ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржЕрзНржпрж╛ржк ржЬрзБржбрж╝рзЗ ржирзЗржнрж┐ржЧрзЗржЯ ржХрж░рж╛рж░ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ рж╕ржВржпрзЛржЧржЧрзБрж▓рж┐ pulling рж╣рждрзЗ ржерж╛ржХржмрзЗред

ржПржЗ ржзрж░ржирзЗрж░ ржмрж╛ржЧржЧрзБрж▓рж┐ ржмрзНржпрж╛ржкржХ ржорзНржпрж╛ржирзБржпрж╝рж╛рж▓ ржкрж░рзАржХрзНрж╖рж╛ ржЫрж╛ржбрж╝рж╛ рж╕рж╣ржЬржЗ ржорж┐рж╕ рж╣рзЯрзЗ ржпрж╛рзЯред ржЖржкржирж╛ржХрзЗ ржжрзНрж░рзБржд рж╕рзЗржЧрзБрж▓рж┐ рж╢ржирж╛ржХрзНржд ржХрж░рждрзЗ рж╕рж╣рж╛ржпрж╝рждрж╛ ржХрж░рж╛рж░ ржЬржирзНржп, React development ржП ржкрзНрж░рждрж┐ржЯрж┐ component ржХрзЗ рждрж╛рж░ ржкрзНрж░рж╛ржержорж┐ржХ ржорж╛ржЙржирзНржЯрзЗрж░ ржкрж░ржкрж░ржЗ ржкрзБржирж░рж╛ржпрж╝ ржорж╛ржЙржирзНржЯ ржХрж░рзЗред

`"тЬЕ Connecting..."` ржжрзБ'ржмрж╛рж░ log рж╣ржЪрзНржЫрзЗ ржжрзЗржЦрж╛ ржЖржкржирж╛ржХрзЗ ржЖрж╕рж▓ рж╕ржорж╕рзНржпрж╛ржЯрж┐ рж▓ржХрзНрж╖рзНржп ржХрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗ: ржпржЦржи component ржЯрж┐ ржЖржиржорж┐ржЙржЯ рж╣рзЯ ржЖржкржирж╛рж░ ржХрзЛржб рж╕ржВржпрзЛржЧржЯрж┐ ржмржирзНржз ржХрж░рзЗ ржирж╛ред

рж╕ржорж╕рзНржпрж╛ржЯрж┐ рж╕ржорж╛ржзрж╛ржи ржХрж░рждрзЗ, ржЖржкржирж╛рж░ Effect ржерзЗржХрзЗ ржПржХржЯрж┐ *cleanup function* return ржХрж░рзБржи:

```js {4-6}
  useEffect(() => {
    const connection = createConnection();
    connection.connect();
    return () => {
      connection.disconnect();
    };
  }, []);
```

Effect ржкрзБржирж░рж╛рзЯ run рж╣ржУрзЯрж╛рж░ ржЖржЧрзЗ ржкрзНрж░рждрж┐ржмрж╛рж░ ржЖржкржирж╛рж░ cleanup function ржХрзЗ ржХрж▓ ржХрж░ржмрзЗ, ржПржмржВ рж╢рзЗрж╖ рж╕ржорзЯ ржпржЦржи component ржЯрж┐ ржЖржиржорж┐ржЙржЯ ржХрж░рзЗ (рж░рж┐ржорзБржн ржХрж░рж╛ рж╣рзЯ)ред ржЖрж╕рзБржи ржжрзЗржЦрж╛ ржпрж╛ржХ ржпржЦржи cleanup function ржЯрж┐ implemente ржХрж░рж╛ рж╣рзЯ рждржЦржи ржХрж┐ ржШржЯрзЗржГ

<Sandpack>

```js
import { useState, useEffect } from 'react';
import { createConnection } from './chat.js';

export default function ChatRoom() {
  useEffect(() => {
    const connection = createConnection();
    connection.connect();
    return () => connection.disconnect();
  }, []);
  return <h1>Welcome to the chat!</h1>;
}
```

```js src/chat.js
export function createConnection() {
  // A real implementation would actually connect to the server
  return {
    connect() {
      console.log('тЬЕ Connecting...');
    },
    disconnect() {
      console.log('тЭМ Disconnected.');
    }
  };
}
```

```css
input { display: block; margin-bottom: 20px; }
```

</Sandpack>

ржПржЦржи ржЖржкржирж┐ development ржП рждрж┐ржиржЯрж┐ console log ржкрж╛ржмрзЗржи:

1. `"тЬЕ Connecting..."`
2. `"тЭМ Disconnected."`
3. `"тЬЕ Connecting..."`

**ржПржЯрж┐ development ржПрж░ рж╕ржарж┐ржХ behaviorред** ржЖржкржирж╛рж░ component рж░рж┐ржорж╛ржЙржирзНржЯрж┐ржВ ржХрж░рзЗ, React ржпрж╛ржЪрж╛ржЗ ржХрж░рзЗ ржпрзЗ ржирзЗржнрж┐ржЧрзЗржЯ ржХрж░рзЗ рж╕рж╛ржоржирзЗ ржЧрж┐рзЯрзЗ ржПржмржВ ржкрж┐ржЫржирзЗ back ржХрж░рж▓рзЗ ржЖржкржирж╛рж░ ржХрзЛржб ржмрзНрж░рзЗржХ ржХрж░ржмрзЗ ржирж╛ред рж╕ржВржпрзЛржЧ ржмрж┐ржЪрзНржЫрж┐ржирзНржи ржПржмржВ рждрж╛рж░ржкрж░ ржЖржмрж╛рж░ рж╕ржВржпрзЛржЧ рж╕рзНржерж╛ржкржи ржХрж░рж▓рзЗ ржарж┐ржХ ржХрж┐ рж╣ржУрзЯрж╛ ржЙржЪрж┐ржд! ржпржЦржи ржЖржкржирж┐ cleanup ржЯрж┐ ржнрж╛рж▓рзЛржнрж╛ржмрзЗ implement ржХрж░рзЗржи, Effect ржЯрж┐ ржПржХржмрж╛рж░ run ржХрж░рж╛ vs ржПржЯрж┐ ржЪрж╛рж▓рж╛рждрзЗ ржерж╛ржХрж╛, ржПржЯрж┐ cleaning ржХрж░рж╛ ржПржмржВ ржкрзБржирж░рж╛рзЯ run ржХрж░рж╛рж░ ржоржзрзНржпрзЗ ржХрзЛржи ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░ ржжрзГрж╢рзНржпржорж╛ржи ржкрж╛рж░рзНржержХрзНржп ржерж╛ржХрж╛ ржЙржЪрж┐ржд ржиржпрж╝ред ржПржЦрж╛ржирзЗ ржПржХржЯрж┐ ржЕрждрж┐рж░рж┐ржХрзНржд ржХрж╛ржирзЗржХрзНржЯ/ржбрж┐рж╕ржХрж╛ржирзЗржХрзНржЯ ржХрж▓ ржкрзЗржпрж╝рж╛рж░ ржЖржЫрзЗ ржХрж╛рж░ржг React ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗ ржерж╛ржХрж╛ ржмрж╛ржЧржЧрзБрж▓рж┐рж░ ржЬржирзНржп ржЖржкржирж╛рж░ ржХрзЛржб ржкрж░рзАржХрзНрж╖рж╛ ржХрж░ржЫрзЗред ржПржЯрж┐ рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХ--ржПржЯрж┐ржХрзЗ ржжрзБрж░рзЗ рж╕рж░рж┐рзЯрзЗ ржжрзЗржУрзЯрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░ржмрзЗржи ржирж╛!

**production ржП, ржЖржкржирж┐ ржХрзЗржмрж▓ ржПржХржмрж╛рж░ `"тЬЕ Connecting..."` ржкрзНрж░рж┐ржирзНржЯ рж╣рждрзЗ ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗржиред** component ржЧрзБрж▓рзЛ рж░рж┐ржорж╛ржЙржирзНржЯржВ ржХрзЗржмрж▓ development ржПрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржШржЯрзЗ ржпрж╛ ржЖржкржирж╛ржХрзЗ ржПржоржи Effect ржЧрзБрж▓рзЛ ржЦрзБржБржЬрзЗ ржкрзЗрждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗ ржпрж╛ ржХрзНрж▓рж┐ржирж╛ржкрзЗрж░ ржкрзНрж░рзЯрзЛржЬржиред ржЖржкржирж┐ development behavior ржерзЗржХрзЗ ржмрзЗрж░рж┐рзЯрзЗ ржЖрж╕рж╛рж░ ржЬржирзНржп [Strict Mode](/reference/react/StrictMode) ржЕржл ржХрж░рждрзЗ ржкрж╛рж░рзЗржи, рждржмрзЗ ржЖржорж░рж╛ ржПржЯрж┐ ржЪрж╛рж▓рж┐рзЯрзЗ ржпрж╛ржУрзЯрж╛рж░ ржкрж░рж╛ржорж░рзНрж╢ ржжрзЗржЗред ржПржЯрж┐ ржЖржкржирж╛ржХрзЗ ржЙржкрж░рзЗрж░ ржоржд ржЕржирзЗржХ ржЧрзБрж▓рзЛ ржмрж╛ржЧ ржЦрзБржБржЬрзЗ ржкрзЗрждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░ржмрзЗред

## How to handle the Effect firing twice in development? {/*how-to-handle-the-effect-firing-twice-in-development*/}

React ржЗржЪрзНржЫрж╛ржХрзГрждржнрж╛ржмрзЗ ржЖржкржирж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯ ржЧрзБрж▓рзЛржХрзЗ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗ рж░рж┐ржорж╛ржЙржирзНржЯ ржХрж░рзЗ ржпрж╛рждрзЗ рж╢рзЗрж╖ ржЙржжрж╛рж╣рж░ржгрзЗрж░ ржорждрзЛ ржмрж╛ржЧ ржЦрзБржБржЬрзЗ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ред **ржкрзНрж░рж╢рзНржи ржарж┐ржХ ржирзЯ "ржХрзАржнрж╛ржмрзЗ ржПржХржЯрж┐ Effect ржПржХржмрж╛рж░ ржЪрж╛рж▓рж╛рждрзЗ рж╣ржпрж╝", рждржмрзЗ "ржХрзАржнрж╛ржмрзЗ ржЖржорж╛рж░ Effect ржЯрж┐ ржарж┐ржХ ржХрж░ржм ржпрж╛рждрзЗ ржПржЯрж┐ ржкрзБржирж░рж╛ржпрж╝ ржорж╛ржЙржирзНржЯ ржХрж░рж╛рж░ ржкрж░рзЗ ржХрж╛ржЬ ржХрж░рзЗ"ред**

рж╕рж╛ржзрж╛рж░ржгржд, ржЙрждрзНрждрж░ рж╣рж▓ ржХрзНрж▓рж┐ржиржЖржк ржлрж╛ржВрж╢ржи implement ржХрж░рж╛ред ржХрзНрж▓рж┐ржиржЖржк ржлрж╛ржВрж╢ржиржЯрж┐рж░ ржмржирзНржз ржХрж░рж╛ ржЙржЪрж┐ржд ржмрж╛ Effect ржпрж╛ ржХрж┐ржЫрзБ ржХрж░рждрзЗржЫрж▓ рждрж╛ ржкрзВрж░рзНржмрж╛ржмрж╕рзНржерж╛ржпрж╝ ржлрж┐рж░рж┐ржпрж╝рзЗ ржЖржирж╛ ржЙржЪрж┐рждред rule of thumb рж╣рж▓ ржпрзЗ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржПржХржмрж╛рж░ Effect run рж╣ржУрзЯрж╛ (production ржП)  ржПржмржВ ржПржХржЯрж┐ _setup тЖТ cleanup тЖТ setup_ рж╕рж┐ржХрзЛржпрж╝рзЗржирзНрж╕рзЗрж░ (ржпрзЗржоржи ржЖржкржирж┐ development ржП ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗржи) ржоржзрзНржпрзЗ ржкрж╛рж░рзНржержХрзНржп ржХрж░рждрзЗ рж╕ржХрзНрж╖ржо рж╣ржмрзЗ ржирж╛ред

ржЖржкржирж┐ ржпрзЗ Effect ржЧрзБрж▓рзЛ рж▓рж┐ржЦржмрзЗржи рждрж╛рж░ ржмрзЗрж╢рж┐рж░ржнрж╛ржЧржЗ ржирзАржЪрзЗрж░ рж╕рж╛ржзрж╛рж░ржг ржкрзНржпрж╛ржЯрж╛рж░рзНржиржЧрзБрж▓рж┐рж░ ржоржзрзНржпрзЗ ржПржХржЯрж┐рждрзЗ ржлрж┐ржЯ рж╣ржмрзЗрз╖

<Pitfall>

#### Effects рж░рж╛ржи ржХрж░рж╛ ржПржбрж╝рж╛рждрзЗ refs ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи ржирж╛ {/*dont-use-refs-to-prevent-effects-from-firing*/}

ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗ Effects ржжрзБржЗржмрж╛рж░ fire рж╣ржУржпрж╝рж╛ ржерзЗржХрзЗ ржмрж┐рж░ржд рж░рж╛ржЦрж╛рж░ ржПржХржЯрж┐ рж╕рж╛ржзрж╛рж░ржг ржнрзБрж▓ рж╣рж▓рзЛ Effect ржХрзЗ ржПржХржмрж╛рж░рзЗрж░ ржмрзЗрж╢рж┐ run рж╣ржУржпрж╝рж╛ ржерзЗржХрзЗ ржмрж┐рж░ржд рж░рж╛ржЦрждрзЗ ref ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржЖржкржирж┐ ржЙржкрж░рзЗрж░ bug ржЯрж┐ useRef ржжрж┐ржпрж╝рзЗ "ржлрж┐ржХрзНрж╕" ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред
  
```js {1,3-4}
  const connectionRef = useRef(null);
  useEffect(() => {
    // ЁЯЪй This wont fix the bug!!!
    if (!connectionRef.current) {
      connectionRef.current = createConnection();
      connectionRef.current.connect();
    }
  }, []);
```

ржПржЯрж┐ ржХрж░рж╛рж░ ржлрж▓рзЗ ржЖржкржирж┐ development ржП рж╢рзБржзрзБржорж╛рждрзНрж░ ржПржХржмрж╛рж░ `"тЬЕ Connecting..."` ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗржи, ржХрж┐ржирзНрждрзБ ржПржЯрж┐ bug ржЯрж┐ fix ржХрж░рзЗ ржирж╛ред
  
ржпржЦржи ржЗржЙржЬрж╛рж░ navigate ржХрж░рзЗ ржЪрж▓рзЗ ржпрж╛ржпрж╝, connection рждржЦржиржУ ржмржирзНржз рж╣ржпрж╝ржирж╛ ржПржмржВ ржпржЦржи рждрж╛рж░рж╛ ржЖржмрж╛рж░ ржлрж┐рж░рзЗ ржЖрж╕рзЗ, ржПржХржЯрж┐ ржирждрзБржи connection рждрзИрж░рж┐ рж╣ржпрж╝ред User ржпржЦржи app ржЬрзБржбрж╝рзЗ navigate ржХрж░рзЗ, connection ржЧрзБрж▓рзЛ ржЬржорждрзЗ ржерж╛ржХржмрзЗ, ржарж┐ржХ ржпрзЗржоржиржЯрж┐ ржПржЗ "fix" ржПрж░ ржЖржЧрзЗ ржЬржорждрзЗ ржерж╛ржХрждрзЛред

Bug ржЯрж┐ fix ржХрж░рждрзЗ, рж╢рзБржзрзБржорж╛рждрзНрж░ Effect ржХрзЗ ржПржХржмрж╛рж░ run ржХрж░рж╛ржирзЛржЗ ржпржерзЗрж╖рзНржЯ ржиржпрж╝ред Effect ржХрзЗ re-mounting ржПрж░ ржкрж░ ржХрж╛ржЬ ржХрж░рждрзЗ рж╣ржмрзЗ, ржпрж╛рж░ ржорж╛ржирзЗ рж╣рж▓рзЛ connection ржХрзЗ ржЙржкрж░рзЗрж░ solution ржПрж░ ржорждрзЛ clean up ржХрж░рждрзЗ рж╣ржмрзЗред
  
ржХржоржи pattern ржЧрзБрж▓рзЛ ржХрзАржнрж╛ржмрзЗ handle ржХрж░рждрзЗ рж╣ржпрж╝ рждрж╛рж░ ржЬржирзНржп ржирж┐ржЪрзЗрж░ ржЙржжрж╛рж╣рж░ржгржЧрзБрж▓рзЛ ржжрзЗржЦрзБржиред

</Pitfall>

### non-React widgets control ржХрж░рж╛ {/*controlling-non-react-widgets*/}

ржХржЦржирзЛ ржХржЦржирзЛ ржЖржкржирж╛ржХрзЗ UI widget ржЕрзНржпрж╛ржб ржХрж░рждрзЗ рж╣ржмрзЗ ржпрж╛ React ржжрж┐рзЯрзЗ рж▓рзЗржЦрж╛ рж╣ржпрж╝ржирж┐ред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржЖржкржирж┐ ржЖржкржирж╛рж░ ржкрзЗржЗржЬрзЗ ржПржХржЯрж┐ ржорзНржпрж╛ржк component ржЕрзНржпрж╛ржб ржХрж░рзЗржЫрзЗржиред ржПржЯрж┐рждрзЗ ржПржХржЯрж┐ `setZoomLevel()` method рж░рзЯрзЗржЫрзЗ, ржПржмржВ ржЖржкржирж┐ ржЖржкржирж╛рж░ React ржХрзЛржбрзЗ `zoomLevel` рж╕рзНржЯрзЗржЯ variable ржПрж░ рж╕рж╛ржерзЗ zoom level рж╕рж┐ржЩрзНржХ рж░рж╛ржЦрждрзЗ ржЪрж╛ржиред ржЖржкржирж╛рж░ Effect ржПржЯрж┐рж░ ржоржд ржжрзЗржЦрждрзЗ рж╣ржмрзЗ:

```js
useEffect(() => {
  const map = mapRef.current;
  map.setZoomLevel(zoomLevel);
}, [zoomLevel]);
```

ржоржирзЗ рж░рж╛ржЦржмрзЗржи ржпрзЗ ржПржЗ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржХрзЛржи cleanup ржПрж░ ржкрзНрж░ржпрж╝рзЛржЬржи ржирзЗржЗред development ржП, React ржжрзБ'ржмрж╛рж░ Effect ржХрж▓ ржХрж░рзЗ, ржХрж┐ржирзНрждрзБ ржПржЯрж┐ ржХрзЛржи рж╕ржорж╕рзНржпрж╛ ржирзЯ ржХрж╛рж░ржг ржПржХржЗ value рж╕рж╣ `setZoomLevel` ржХрзЗ ржжрзБ'ржмрж╛рж░ ржХрж▓ ржХрж░рж▓рзЗ ржХрж┐ржЫрзБржЗ рж╣ржмрзЗ ржирж╛ред ржПржЯрж┐ ржХрж┐ржЫрзБржЯрж╛ рж╕рзНрж▓рзЛ рж╣рждрзЗ ржкрж╛рж░рзЗ, рждржмрзЗ ржмрзНржпрж╛ржкрж╛рж░ ржирж╛ ржХрж╛рж░ржг ржПржЯрж┐ production ржП ржЕржпржерж╛ рж░рж┐ржорж╛ржЙржирзНржЯ ржХрж░ржмрзЗ ржирж╛ред 

ржХрж┐ржЫрзБ API ржЖржкржирж╛ржХрзЗ ржкрж░ржкрж░ ржжрзБржмрж╛рж░ ржХрж▓ ржХрж░рж╛рж░ allow ржирж╛ржУ ржжрж┐рждрзЗ ржкрж╛рж░рзЗред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржмрж┐рж▓рзНржЯ-ржЗржи [`<dialog>`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLDialogElement) ржЗрж▓рж┐ржорзЗржирзНржЯржЯрж┐ [`showModal`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLDialogElement/showModal) ржорзНржпрж╛ржерзЛржб ржерзНрж░рзЛ ржХрж░рзЗ ржпржжрж┐ ржЖржкржирж┐ ржПржЯрж┐ржХрзЗ ржжрзБржмрж╛рж░ ржХрж▓ ржХрж░рзЗржиред cleanup function ржЯрж┐ ржЗржоржкрзНрж▓рж┐ржорзЗржирзНржЯ ржХрж░рзБржи ржПржмржВ ржбрж╛рзЯрж▓ржЧржЯрж┐ close ржХрж░рзБржи:

```js {4}
useEffect(() => {
  const dialog = dialogRef.current;
  dialog.showModal();
  return () => dialog.close();
}, []);
```

development ржП, ржЖржкржирж╛рж░ Effect `showModal()` ржХрж▓ ржХрж░ржмрзЗ, рждрж╛рж░ржкрж░ immediately `close()` ржХрж▓ ржХрж░ржмрзЗ, ржПржмржВ ржПрж░ржкрж░ ржЖржмрж╛рж░ `showModal()` ржХрж▓ ржХрж░ржмрзЗред `showModal()` ржХрзЗ ржПржХржмрж╛рж░ ржХрж▓ ржХрж░рж╛рж░ ржорждржЗ user-visible behavior ржПржЯрж┐рж░, ржпрзЗржоржиржЯрж┐ ржЖржкржирж┐ production ржП ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗржиред

### Event subscribing {/*subscribing-to-events*/}

ржпржжрж┐ ржЖржкржирж╛рж░ Effect ржХрзЛржи ржХрж┐ржЫрзБ рж╕рж╛ржмрж╕рзНржХрзНрж░рж╛ржЗржм ржХрж░рзЗ, рждржмрзЗ ржХрзНрж▓рж┐ржиржЖржк ржлрж╛ржВрж╢ржиржЯрж┐рж░ рждрж╛ ржЖржирж╕рж╛ржмрж╕рзНржХрзНрж░рж╛ржЗржм ржХрж░рж╛ ржЙржЪрж┐ржд:

```js {6}
useEffect(() => {
  function handleScroll(e) {
    console.log(window.scrollX, window.scrollY);
  }
  window.addEventListener('scroll', handleScroll);
  return () => window.removeEventListener('scroll', handleScroll);
}, []);
```

development ржП, ржЖржкржирж╛рж░ Effect `addEventListener()` ржХрзЗ ржХрж▓ ржХрж░ржмрзЗ, рждрж╛рж░ржкрж░ immediately `removeEventListener()` ржХрзЗ, ржПржмржВ рждрж╛рж░ржкрж░рзЗ ржЖржмрж╛рж░ `addEventListener()` ржХрзЗ ржПржХржЗ handler ржжрж┐рзЯрзЗ ржХрж▓ ржХрж░ржмрзЗред рждрж╛ржЗ ржПржХ рж╕ржоржпрж╝рзЗ рж╢рзБржзрзБржорж╛рждрзНрж░ ржПржХржЯрж┐ subscription ржПржХрзНржЯрж┐ржн ржерж╛ржХржмрзЗред `addEventListener()` ржХрзЗ ржПржХржмрж╛рж░ ржХрж▓ ржХрж░рж╛рж░ ржорждржЗ user-visible behavior ржПржЯрж┐рж░, ржпрзЗржоржиржЯрж┐ ржЖржкржирж┐ production ржП ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗржиред

### animation ржЯрзНрж░рж┐ржЧрж╛рж░ ржХрж░рж╛ {/*triggering-animations*/}

ржпржжрж┐ ржЖржкржирж╛рж░ Effect ржЯрж┐ ржХрж┐ржЫрзБ animate ржХрж░рзЗ, рждржмрзЗ ржЖржкржирж╛рж░ ржХрзНрж▓рж┐ржирж╛ржк function ржЯрж┐рж░ ржЙржЪрж┐ржд initial value ржжрж┐рзЯрзЗ animation ржЯрж┐ reset ржХрж░рж╛:

```js {4-6}
useEffect(() => {
  const node = ref.current;
  node.style.opacity = 1; // Trigger the animation
  return () => {
    node.style.opacity = 0; // Reset to the initial value
  };
}, []);
```

development ржП, opacity рж╕рзЗржЯ ржХрж░рж╛ рж╣ржмрзЗ `1`, ржПрж░ржкрж░рзЗ `0`, ржПржмржВ рждрж╛рж░ржкрж░рзЗ ржЖржмрж╛рж░ `1` ред ржПржЯрж┐ рж╕рж░рж╛рж╕рж░рж┐ `1` ржП рж╕рзЗржЯ ржХрж░рж╛рж░ ржорждржЗ user-visible behavior рж╣ржУрзЯрж╛ ржЙржЪрж┐ржд, ржпрж╛ production ржП ржШржЯржмрзЗред ржЖржкржирж┐ ржпржжрж┐ tweening ржПрж░ ржЬржирзНржп support рж╕рж╣ ржПржХржЯрж┐ third-party ржЕрзНржпрж╛ржирж┐ржорзЗрж╢ржи рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржи, рждржмрзЗ ржЖржкржирж╛рж░ ржХрзНрж▓рж┐ржиржЖржк ржлрж╛ржВрж╢ржиржЯрж┐ ржЯрж╛ржЗржорж▓рж╛ржЗржиржЯрж┐ржХрзЗ рждрж╛рж░ initial state ржкрзБржирж░рж╛ржпрж╝ рж╕рзЗржЯ ржХрж░рж╛ ржЙржЪрж┐рждред

### ржбрж╛ржЯрж╛ Fetch ржХрж░рж╛ {/*fetching-data*/}

ржпржжрж┐ ржЖржкржирж╛рж░ Effect ржЯрж┐ ржХрж┐ржЫрзБ fetch ржХрж░рзЗ, рждржмрзЗ ржЖржкржирж╛рж░ ржХрзНрж▓рж┐ржирж╛ржк function ржЯрж┐рж░ ржЙржЪрж┐ржд рж╣рзЯржд [fetch ржмрж╛рждрж┐рж▓ ржХрж░рж╛](https://developer.mozilla.org/en-US/docs/Web/API/AbortController) ржЕржержмрж╛ ржПрж░ ржлрж▓рж╛ржлрж▓ ignore ржХрж░рж╛:

```js {2,6,13-15}
useEffect(() => {
  let ignore = false;

  async function startFetching() {
    const json = await fetchTodos(userId);
    if (!ignore) {
      setTodos(json);
    }
  }

  startFetching();

  return () => {
    ignore = true;
  };
}, [userId]);
```

ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ рж░рж┐ржХрзБржпрж╝рзЗрж╕рзНржЯ ржпрж╛ ржЗрждрж┐ржоржзрзНржпрзЗ ржШржЯрзЗ ржжрж┐рзЯрзЗржЫрзЗржи, рждрж╛ ржЖржкржирж┐ "ржмрж╛рждрж┐рж▓" ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи ржирж╛, рждржмрзЗ ржЖржкржирж╛рж░ ржХрзНрж▓рж┐ржи-ржЖржк ржлрж╛ржВрж╢ржиржЯрж┐рж░ ржПржЯрж┐ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рждрзЗ рж╣ржмрзЗ ржпрзЗ, ржпрзЗ fetch ржЧрзБрж▓рзЛ _ржЖрж░ ржкрзНрж░рж╛рж╕ржЩрзНржЧрж┐ржХ ржиржпрж╝_ рж╕рзЗржЧрзБрж▓рзЛ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржирзЗ ржкрзНрж░ржнрж╛ржм ржлрзЗрж▓ржмрзЗ ржирж╛ред ржпржжрж┐ `userId` `'Alice'` ржерзЗржХрзЗ `'Bob'` ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзЗ, рждржмрзЗ ржХрзНрж▓рж┐ржи-ржЖржк ржирж┐рж╢рзНржЪрж┐ржд ржХрж░ржмрзЗ ржпрзЗ `'Alice'` рж░рзЗрж╕ржкржирзНрж╕ржЯрж┐ `'Bob'` ржПрж░ ржкрж░рзЗржУ ржпржжрж┐ ржЖрж╕рзЗ рждрж╛рж╣рж▓рзЗржУ рж╕рзЗржЯрж┐ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржирзЗ ржкрзНрж░ржнрж╛ржмрж┐ржд ржХрж░ржмрзЗ ржирж╛ред

**development ржП, ржЖржкржирж┐ Network tab ржП ржжрзБржЯрж┐ fetch ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗржиред** ржПрждрзЗ ржХрзЛржи рж╕ржорж╕рзНржпрж╛ ржирж╛ржЗред  ржЙржкрж░рзЗрж░ ржкржжрзНржзрждрж┐рждрзЗ, ржкрзНрж░ржержо Effect-ржЯрж┐ рждрж╛рзОржХрзНрж╖ржгрж┐ржХржнрж╛ржмрзЗ ржХрзНрж▓рж┐ржи-ржЖржк рж╣ржмрзЗ рждрж╛ржЗ рждрж╛рж░ `ignore` ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓рзЗрж░ ржХржкрж┐ `true` рж╣ржмрзЗред рждрж╛ржЗ, ржпржжрж┐ржУ ржЕрждрж┐рж░рж┐ржХрзНржд ржПржХржЯрж┐ рж░рж┐ржХрзБржпрж╝рзЗрж╕рзНржЯ ржЖржЫрзЗ, рж╕рзБрждрж░рж╛ржВ ржЕрждрж┐рж░рж┐ржХрзНржд ржЕржирзБрж░рзЛржз ржерж╛ржХрж╛ рж╕рждрзНрждрзНржмрзЗржУ, ржПржЯрж┐ state ржХрзЗ ржкрзНрж░ржнрж╛ржмрж┐ржд ржХрж░ржмрзЗ ржирж╛  `if (!ignore)` ржЪрзЗржХ ржХрзЗ ржзржирзНржпржмрж╛ржжред

**production ржП, ржХрзЗржмрж▓ ржПржХржЯрж┐ request ржерж╛ржХржмрзЗред** ржпржжрж┐ development ржПрж░ ржжрзНржмрж┐рждрзАрзЯ request ржЯрж┐ ржЖржкржирж╛ржХрзЗ ржмрж┐рж░ржХрзНржд ржХрж░рзЗ, рждржмрзЗ рж╕рж░рзНржмрзЛрждрзНрждржо ржкржжрзНржзрждрж┐ рж╣рж▓ ржПржоржи ржПржХржЯрж┐ рж╕ржорж╛ржзрж╛ржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛ request ржЧрзБрж▓рж┐ржХрзЗ deduplicate ржХрж░ржмрзЗ ржПржмржВ component ржЧрзБрж▓рзЛ рждрж╛ржжрзЗрж░ response ржЧрзБрж▓рзЛ ржХрзНржпрж╛рж╢ ржХрж░ржмрзЗ:

```js
function TodoList() {
  const todos = useSomeDataLibrary(`/api/user/${userId}/todos`);
  // ...
```

ржПржЯрж┐ рж╢рзБржзрзБржорж╛рждрзНрж░ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ experience ржЗ  improve ржХрж░ржмрзЗ ржирж╛, ржмрж░ржВ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржиржХрзЗ ржжрзНрж░рзБржд ржЕржирзБржнржм ржХрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░ржмрзЗред  ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржпржжрж┐ ржмрзНржпрж╛ржХ ржмрзЛрждрж╛ржо ржЪрж╛ржкрзЗ, рждрж╛ржХрзЗ ржЖржмрж╛рж░ ржХрж┐ржЫрзБ ржбрзЗржЯрж╛ рж▓рзЛржб ржХрж░рждрзЗ ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рждрзЗ рж╣ржпрж╝ ржирж╛ ржХрж╛рж░ржг рж╕рзЗржЯрж┐ ржХрзНржпрж╛рж╢ ржХрж░рж╛ ржерж╛ржХржмрзЗред ржЖржкржирж┐ ржПржоржи ржПржХржЯрж┐ ржХрзНржпрж╛рж╢ ржирж┐ржЬрзЗржЗ рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи ржЕржержмрж╛ Effect ржП ржорзНржпрж╛ржирзБржпрж╝рж╛рж▓ ржлрзЗржЪрж┐ржВржпрж╝рзЗрж░ ржЬржирзНржп ржЕржирзЗржХржЧрзБрж▓рзЛ alternative ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред

<DeepDive>

#### Effect ржбрзЗржЯрж╛ ржлрзЗржЪрж┐ржВржпрж╝рзЗрж░ ржЬржирзНржп ржнрж╛lO Alternatives ржХрзА? {/*what-are-good-alternatives-to-data-fetching-in-effects*/}

Effect ржП `fetch` ржХрж▓ рж▓рзЗржЦрж╛ [ржбрзЗржЯрж╛ ржлрзЗржЪрж┐ржВржпрж╝рзЗрж░ ржЬржирзНржп ржПржХржЯрж┐ ржЬржиржкрзНрж░рж┐ржпрж╝ ржЙржкрж╛ржпрж╝](https://www.robinwieruch.de/react-hooks-fetch-data/), ржмрж┐рж╢рзЗрж╖ржнрж╛ржмрзЗ рж╕ржорзНржкрзВрж░рзНржг ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ-рж╕рж╛ржЗржб ржЕрзНржпрж╛ржкрж╕ржЧрзБрж▓рзЛрждрзЗред рждржмрзЗ, ржПржЯрж┐ ржПржХржЯрж┐ ржЕржирзЗржХржЯрж╛ржЗ ржорзНржпрж╛ржирзБржпрж╝рж╛рж▓ ржкржжрзНржзрждрж┐ ржПржмржВ ржПржЯрж┐рж░ ржХрж┐ржЫрзБ ржЙрж▓рзНрж▓рзЗржЦржпрзЛржЧрзНржп downside рж░рзЯрзЗржЫрзЗ:

- **Effects рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржЪрж▓рждрзЗ ржкрж╛рж░рзЗ ржирж╛ред** ржпрж╛рж░ ржорж╛ржирзЗ, initial рж╕рж╛рж░рзНржнрж╛рж░ ржПржХржЯрж┐ рж▓рзЛржбрж┐ржВ рж╕рзНржЯрзЗржЯ рж╕рж╣ HTML рж░рзЗржирзНржбрж╛рж░ ржХрж░ржмрзЗ ржХрзЛржирзЛ ржбрзЗржЯрж╛ ржЫрж╛ржбрж╝рж╛ржЗред ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ ржХржорзНржкрж┐ржЙржЯрж╛рж░ржХрзЗ рж╕ржорж╕рзНржд ржЬрж╛ржнрж╛рж╕рзНржХрзНрж░рж┐ржкрзНржЯ ржбрж╛ржЙржирж▓рзЛржб ржХрж░рждрзЗ рж╣ржмрзЗ ржПржмржВ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкржЯрж┐ рж░рзЗржирзНржбрж╛рж░ ржХрж░рждрзЗ рж╣ржмрзЗ рж╢рзБржзрзБржорж╛рждрзНрж░ ржПржЯрж┐ discover ржХрж░рждрзЗ ржпрзЗ ржПржЯрж┐рж░ ржПржЦржи ржбрзЗржЯрж╛ рж▓рзЛржб ржХрж░рждрзЗ рж╣ржмрзЗред ржПржЯрж┐ ржЦрзБржм ржПржХржЯрж╛ efficient ржирж╛ред
- **Effects ржП рж╕рж░рж╛рж╕рж░рж┐ ржбрзЗржЯрж╛ ржлрзЗржЪрж┐ржВ "ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржУржпрж╝рж╛ржЯрж╛рж░ржлрж▓" рждрзИрж░рж┐ ржХрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗред** ржЖржкржирж┐ parent ржХржорзНржкрзЛржирзЗржирзНржЯржЯрж┐ рж░рзЗржирзНржбрж╛рж░ ржХрж░рзЗржи, ржПржЯрж┐ ржХрж┐ржЫрзБ ржбрзЗржЯрж╛ ржлрзЗржЪ ржХрж░рзЗ, ржЪрж╛ржЗрж▓рзНржб ржХржорзНржкрзЛржирзЗржирзНржЯржЧрзБрж▓рзЛ рж░рзЗржирзНржбрж╛рж░ рж╣ржпрж╝, ржПржмржВ рждрж╛рж░ржкрж░рзЗ рждрж╛рж░рж╛ рждрж╛ржжрзЗрж░ ржбрзЗржЯрж╛ ржлрзЗржЪ ржХрж░рждрзЗ рж╢рзБрж░рзБ ржХрж░рзЗред ржпржжрж┐ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржЦрзБржм ржлрж╛рж╕рзНржЯ ржирж╛ рж╣ржпрж╝, ржПржЯрж┐ рж╕ржм ржбрзЗржЯрж╛ parallel ржнрж╛ржмрзЗ ржлрзЗржЪ рж╣ржУрзЯрж╛рж░ рждрзБрж▓ржирж╛ржпрж╝ ржЕржирзЗржХржЯрж╛ржЗ ржзрзАрж░ред

- **ржорзВрж▓ржд Effect ржП рж╕рж░рж╛рж╕рж░рж┐ ржбрзЗржЯрж╛ ржлрзЗржЪ ржХрж░рж╛рж░ ржорж╛ржирзЗ ржПржЗ ржпрзЗ, ржЖржкржирж┐ ржбрзЗржЯрж╛ ржкрзНрж░рж┐рж▓рзЛржб ржмрж╛ ржХрзНржпрж╛рж╢ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи ржирж╛ред** ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржпржжрж┐ ржХржорзНржкрзЛржирзЗржирзНржЯржЯрж┐ ржЖржиржорж╛ржЙржирзНржЯ рж╣ржпрж╝ ржПржмржВ ржкрзБржирж░рж╛ржпрж╝ ржорж╛ржЙржирзНржЯ рж╣ржпрж╝, ржПржЯрж┐ржХрзЗ ржкрзБржирж░рж╛ржпрж╝ ржбрж╛ржЯрж╛ ржлрзЗржЪ ржХрж░рждрзЗ рж╣ржмрзЗред
- **ржПржЯрж╛ ржЦрзБржм ржПржХржЯрж╛ ergonomic ржиржпрж╝ред** ржлрзЗржЪ ржХрж▓ рж▓рзЗржЦрж╛рж░ рж╕ржоржпрж╝, ржпрж╛рждрзЗ [рж░рзЗрж╕ ржХржирзНржбрж┐рж╢ржи](https://maxrozen.com/race-conditions-fetching-data-react-with-useeffect) ржПрж░ ржорждрзЛ ржмрж╛ржЧрзЗ suffer ржХрж░рждрзЗ ржирж╛ рж╣рзЯ, рждрж╛рж░ ржЬржирзНржп ржмрзЗрж╢ ржнрж╛рж▓рзЛ ржкрж░рж┐ржорж╛ржгрзЗрж░ ржмржпрж╝рж▓рж╛рж░ржкрзНрж▓рзЗржЯ ржХрзЛржб рж▓рзЗржЦрж╛ рж▓рж╛ржЧрзЗред

- **ржЖржкржирж┐ ржпржжрж┐ ржПржХржЯрж┐ [framework](/learn/start-a-new-react-project#full-stack-frameworks) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржи, рждрж╛рж░ built-in ржбрзЗржЯрж╛ ржлрзЗржЪрж┐ржВ ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред** ржЖржзрзБржирж┐ржХ рж░рж┐ржпрж╝рзНржпрж╛ржХрзНржЯ ржлрзНрж░рзЗржоржУржпрж╝рж╛рж░рзНржХржЧрзБрж▓рж┐рж░ ржоржзрзНржпрзЗ integrated ржбрзЗржЯрж╛ ржлрзЗржЪрж┐ржВ ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ рж░ржпрж╝рзЗржЫрзЗ ржпрж╛ ржХрж╛рж░рзНржпржХрж░ ржПржмржВ ржЙржкрж░рзЗрж░ рж╕ржорж╕рзНржпрж╛ ржЧрзБрж▓рзЛ ржорзБржХрзНрждред
- **ржЕржирзНржпржерж╛ржпрж╝, ржПржХржЯрж┐ ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ-рж╕рж╛ржЗржб ржХрзНржпрж╛рж╢ ржЗржЙржЬ ржХрж░рзБржи ржмрж╛ ржмрж┐рж▓рзНржб ржХрж░рзБржиред** ржЬржиржкрзНрж░рж┐ржпрж╝ ржУржкрзЗржи рж╕рзЛрж░рзНрж╕ рж╕ржорж╛ржзрж╛ржирзЗрж░ ржоржзрзНржпрзЗ [React Query](https://tanstack.com/query/latest), [useSWR](https://swr.vercel.app/), ржПржмржВ [React Router 6.4+.](https://beta.reactrouter.com/en/main/start/overview) рж░ржпрж╝рзЗржЫрзЗред ржЖржкржирж┐ ржПржХржЯрж┐ ржирж┐ржЬрж╕рзНржм рж╕ржорж╛ржзрж╛ржирзЛ рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи ржПржЗ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржЖржкржирж┐ Effect ржЧрзБрж▓рзЛ ржЖржирзНржбрж╛рж░ ржжрзНржпрж╛ рж╣рзБржбрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи, рждржмрзЗ request ржбрж┐ржбрзБржкрзНрж▓рж┐ржХрзЗржЯ ржХрж░рж╛рждрзЗ, response ржХрзНржпрж╛рж╢ ржХрж░рждрзЗ, ржПржмржВ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржУржпрж╝рж╛ржЯрж╛рж░ржлрж▓ ржПрзЬрж╛рждрзЗ рж▓ржЬрж┐ржХ add ржХрж░рзБржиред (ржбрж╛ржЯрж╛ ржкрзНрж░рж┐рж▓рзЛржбрж┐ржВ ржХрж░рзЗ ржмрж╛ ржбрж╛ржЯрж╛ requirement ржЧрзБрж▓рзЛ рж░рж╛ржЙржЯрзЗ hoisting ржХрж░рзЗ)ред

ржпржжрж┐ ржПржЗ ржкржжржХрзНрж╖рзЗржкржЧрзБрж▓рзЛрж░ ржоржзрзНржпрзЗ ржХрзЛржиржЯрж┐ржЗ ржЖржкржирж╛рж░ ржЬржирзНржп ржкрзНрж░ржпрзЛржЬрзНржп ржирж╛ рж╣ржпрж╝, рждржмрзЗ рж╕рж░рж╛рж╕рж░рж┐ Effect-ржП ржбрзЗржЯрж╛ ржлрзЗржЪрж┐ржВ ржЪрж╛рж▓рж┐ржпрж╝рзЗ ржпрзЗрждрзЗ ржкрж╛рж░рзЗржиред"

</DeepDive>

### Analytics рж╕рзЗржирзНржб ржХрж░рж╛ {/*sending-analytics*/}

ржПржЗ ржХрзЛржбржЯрж┐ ржПржХржЯрзБ ржжрзЗржЦрзБржи ржпрзЗржЯрж┐ ржХрзЛржирзЛ ржкрзЗржЬ ржнрж┐ржЬрж┐ржЯ ржХрж░рж╛ рж╣рж▓рзЗ ржПржХржЯрж┐ analytics event рж╕рзЗржирзНржб ржХрж░рзЗржГ

```js
useEffect(() => {
  logVisit(url); // Sends a POST request
}, [url]);
```

ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗрж░ рж╕ржорзЯ, ржкрзНрж░рждрж┐ржЯрж┐ URL-ржПрж░ ржЬржирзНржп `logVisit` ржжрзБржЗржмрж╛рж░ ржХрж▓ ржХрж░рж╛ рж╣ржмрзЗ, ржПрж░ ржЬржирзНржп ржЖржкржирж┐ ржПржЯрж┐ ржлрж┐ржХрзНрж╕ ржХрж░рждрзЗ рждрзОржкрж░ рж╣рзЯрзЗ ржЙржарждрзЗ ржкрж╛рж░рзЗржиред **ржЖржорж░рж╛ рж░рзЗржХржорзЗржирзНржб ржХрж░рж┐ ржПржЗ ржХрзЛржбржЯрж┐ ржпрзЗржоржи ржЖржЫрзЗ рждрзЗржоржиржЗ рж░рж╛ржЦрждрзЗред** ржЖржЧрзЗрж░ ржЙржжрж╛рж╣рж░ржгржЧрзБрж▓рзЛрж░ ржорждрзЛ, ржПржХржмрж╛рж░ ржЪрж╛рж▓рж╛ржирзЛ ржПржмржВ ржжрзБржЗржмрж╛рж░ ржЪрж╛рж▓рж╛ржирзЛрж░ ржоржзрзНржпрзЗ ржХрзЛржирзЛ *ржЗржЙржЬрж╛рж░рзЗрж░-ржХрж╛ржЫрзЗ-ржжрзГрж╢рзНржпржорж╛ржи* ржЖржЪрж░ржгржЧржд ржкрж╛рж░рзНржержХрзНржп ржирзЗржЗред ржмрж╛рж╕рзНрждржм ржжрж┐ржХ ржерзЗржХрзЗ, `logVisit` ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗрж░ рж╕ржорзЯ ржХрж┐ржЫрзБ ржХрж░рж╛ ржЙржЪрж┐ржд ржиржпрж╝ ржХрж╛рж░ржг ржЖржкржирж┐ ржЪрж╛ржи ржирж╛ ржпрзЗ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ ржорзЗрж╢рж┐ржиржЧрзБрж▓рж┐рж░ рж▓ржЧ ржкрзНрж░рзЛржбрж╛ржХрж╢ржи metrics ржПрж░ рж╕рж╛ржерзЗ рж╣ржпржмрж░рж▓ ржЕржмрж╕рзНржерж╛ рж╣рзЛржХред ржЖржкржирж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржлрж╛ржЗрж▓ ржпрждржмрж╛рж░ ржЖржкржирж┐ рж╕рзЗржн ржХрж░рзЗржи рждрждржмрж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯржЯрж┐ рж░рж┐ржорж╛ржЙржирзНржЯ ржХрж░рзЗ, рждрж╛ржЗ ржПржЯрж┐ ржПржоржирж┐рждрзЗржУ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗрж░ рж╕ржорзЯ ржЕржирж░рзНржержХ ржнрж┐ржЬрж┐ржЯ рж▓ржЧ ржХрж░рзЗред

**ржкрзНрж░рзЛржбрж╛ржХрж╢ржирзЗрж░ рж╕ржорзЯ, ржХрзЛржирзЛ ржбрзБржкрзНрж▓рж┐ржХрзЗржЯ ржнрж┐ржЬрж┐ржЯ-рж▓ржЧ ржерж╛ржХржмрзЗ ржирж╛ред**

ржЖржкржирж┐ ржпрзЗ analytics events рж╕рзЗржирзНржб ржХрж░ржЫрзЗржи рждрж╛ ржбрж┐ржмрж╛ржЧ ржХрж░рждрзЗ, ржЖржкржирж┐ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкржХрзЗ ржПржХржЯрж┐ staging environment-ржП deploy ржХрж░рждрзЗ ржкрж╛рж░рзЗржи (ржпрж╛ ржкрзНрж░рзЛржбрж╛ржХрж╢ржи ржорзЛржбрзЗ ржЪрж▓рзЗ) ржЕржержмрж╛ рж╕рж╛ржорзЯрж┐ржХржнрж╛ржмрзЗ [Strict Mode](/reference/react/StrictMode) ржПржмржВ ржПрж░ development-only рж░рж┐ржорж╛ржЙржирзНржЯрж┐ржВ ржЪрзЗржХржЧрзБрж▓рзЛ ржерзЗржХрзЗ opt-out ржХрж░рждрзЗ ржкрж╛рж░рзЗржи (ржмрж╛ ржмржирзНржз ржХрж░рзЗ рж░рж╛ржЦрждрзЗ ржкрж╛рж░рзЗржи)ред ржЖржкржирж┐ Effects ржПрж░ ржкрж░рж┐ржмрж░рзНрждрзЗ route change event hanlder ржерзЗржХрзЗржУ ржЕрзНржпрж╛ржирж╛рж▓рж┐ржЯрж┐ржХрзНрж╕ ржкрж╛ржарж╛рждрзЗ ржкрж╛рж░рзЗржиред ржЖрж░рзЛ рж╕рзВржХрзНрж╖рзНржо ржЕрзНржпрж╛ржирж╛рж▓рж┐ржЯрж┐ржХрзНрж╕рзЗрж░ ржЬржирзНржп, [Intersection Observer](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API) ржХрзЛржи ржХржорзНржкрзЛржирзЗржирзНржЯржЧрзБрж▓рж┐ viewport-ржП ржЖржЫрзЗ ржПржмржВ рж╕рзЗржЧрзБрж▓рзЛ ржХрждржХрзНрж╖ржг ржжрзГрж╢рзНржпржорж╛ржи ржерж╛ржХрзЗ рждрж╛ ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рждрзЗ ржкрж╛рж░рзЗред

### Effect рж╣рж┐рж╕рзЗржмрзЗ ржЧржгрзНржп ржирзЯ: ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи ржЗржирж┐рж╢рж┐рзЯрж╛рж▓рж╛ржЗржЬ ржХрж░рж╛ {/*not-an-effect-initializing-the-application*/}

ржХрж┐ржЫрзБ рж▓ржЬрж┐ржХ рж╢рзБржзрзБржорж╛рждрзНрж░ ржпржЦржи ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи рж╢рзБрж░рзБ рж╣ржпрж╝ рждржЦржи ржПржХржмрж╛рж░ рж░рж╛ржи ржХрж░рж╛ ржЙржЪрж┐рждред ржЖржкржирж┐ ржПржЧрзБрж▓рзЛржХрзЗ ржЖржкржирж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯржЧрзБрж▓рзЛрж░ ржмрж╛ржЗрж░рзЗ рж░рж╛ржЦрждрзЗ ржкрж╛рж░рзЗржиржГ

```js {2-3}
if (typeof window !== 'undefined') { // Check if we're running in the browser.
  checkAuthToken();
  loadDataFromLocalStorage();
}

function App() {
  // ...
}
```

ржПржЯрж┐ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ ржпржЦржи ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржкрзЗржЬржЯрж┐ рж▓рзЛржб ржХрж░ржмрзЗ рждржЦржи ржПржЗ ржзрж░ржирзЗрж░ рж▓ржЬрж┐ржХ рж╢рзБржзрзБржорж╛рждрзНрж░ ржПржХржмрж╛рж░ рж░рж╛ржи ржХрж░ржмрзЗред

### Effect рж╣рж┐рж╕рзЗржмрзЗ ржЧржгрзНржп ржирзЯ: ржПржХржЯрж┐ ржкрзНрж░рзЛржбрж╛ржХрзНржЯ ржХрзЗржирж╛ {/*not-an-effect-buying-a-product*/}

ржХржЦржирзЛ ржХржЦржирзЛ, ржЖржкржирж┐ ржПржХржЯрж┐ ржХрзНрж▓рж┐ржиржЖржк ржлрж╛ржВрж╢ржи рж▓рж┐ржЦрж▓рзЗржУ, Effect-ржЯрж┐ ржжрзБржЗржмрж╛рж░ ржЪрж╛рж▓рж╛ржирзЛрж░ ржкрзНрж░ржнрж╛ржм ржЗржЙржЬрж╛рж░рзЗрж░ ржЪрзЛржЦрзЗ ржкрзЬрж╛ ржерзЗржХрзЗ ржПрзЬрж╛ржирзЛрж░ ржХрзЛржирзЛ ржЙржкрж╛ржпрж╝ ржерж╛ржХрзЗ ржирж╛ред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, рж╣рждрзЗ ржкрж╛рж░рзЗ ржЖржкржирж╛рж░ Effect ржПржХржЯрж┐ ржкрзНрж░рзЛржбрж╛ржХрзНржЯ ржХрзЗржирж╛рж░ ржЬржирзНржп ржПржХржЯрж┐ POST рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ ржкрж╛ржарж╛ржпрж╝ржГ

```js {2-3}
useEffect(() => {
  // ЁЯФ┤ Wrong: This Effect fires twice in development, exposing a problem in the code.
  fetch('/api/buy', { method: 'POST' });
}, []);
```

ржЖржкржирж┐ ржкрзНрж░рзЛржбрж╛ржХрзНржЯржЯрж┐ ржжрзБржЗржмрж╛рж░ ржХрж┐ржирждрзЗ ржЪрж╛ржЗржмрзЗржи ржирж╛ред ржХрж┐ржирзНрждрзБ, ржЖржкржирж╛рж░ ржПржЗ ржзрж░ржирзЗрж░ рж▓ржЬрж┐ржХржХрзЗ ржХрзЗржирзЛ ржПржХржЯрж┐ Effect-ржП рж░рж╛ржЦрж╛ ржЙржЪрж┐ржд ржирж╛, ржПржЯрж╛ржУ рждрж╛рж░ ржПржХржЯрж╛ ржХрж╛рж░ржгред ржХрзА рж╣ржмрзЗ ржпржжрж┐ ржЗржЙржЬрж╛рж░ ржЕржирзНржп ржЖрж░рзЗржХржЯрж┐ ржкрзЗржЬрзЗ ржпрж╛рзЯ рждрж╛рж░ржкрж░ Back ржмрж╛ржЯржи ржЪрж╛ржкрзЗ? ржЖржкржирж╛рж░ Effect рждржЦржи ржЖржмрж╛рж░ рж░рж╛ржи ржХрж░ржмрзЗред ржЖржкржирж┐ ржЪрж╛ржи ржирж╛ ржпрзЗ ржЗржЙржЬрж╛рж░ ржПржХржЯрж┐ ржкрзЗржЬ *visit* ржХрж░рж▓рзЗржЗ ржкрзНрж░рзЛржбрж╛ржХрзНржЯ ржХрзЗржирж╛ рж╣рзЛржХ; ржЖржкржирж┐ ржЪрж╛ржи ржпрзЗ ржЗржЙржЬрж╛рж░ Buy ржмрж╛ржЯржи *click* ржХрж░рж▓рзЗржЗ ржХрзЗржирж╛ рж╣рзЛржХред

Buying ржмрж╛ ржХрзНрж░рзЯ ржХрж░рж╛ рж░рзЗржирзНржбрж╛рж░рж┐ржВрзЯрзЗрж░ ржжрзНржмрж╛рж░рж╛ рж╣ржмрзЗ ржирж╛ ржмрж░ржВ ржПржЯрж╛ ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЗржирзНржЯрж╛рж░рзЗржХрж╢ржирзЗрж░ ржжрзНржмрж╛рж░рж╛ рж╣ржмрзЗред ржПржЯрж╛ рж╢рзБржзрзБ рждржЦржиржЗ рж╣ржмрзЗ ржпржЦржи ржЗржЙржЬрж╛рж░ ржР ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржмрж╛ржЯржиржЯрж┐ ржЪрж╛ржкржмрзЗред **Effect-ржЯрж┐ ржбрж┐рж▓рж┐ржЯ ржХрж░рзЗ `/api/buy` рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯржЯрж┐ Buy ржмрж╛ржЯржирзЗрж░ event handler-ржП рж╕рж░рж┐рзЯрзЗ ржлрзЗрж▓рзБржиржГ**

```js {2-3}
  function handleClick() {
    // тЬЕ Buying is an event because it is caused by a particular interaction.
    fetch('/api/buy', { method: 'POST' });
  }
```

**ржПрждрзЗ ржмрзБржЭрж╛ ржпрж╛рзЯ ржпрзЗ, ржпржжрж┐ рж░рж┐ржорж╛ржЙржирзНржЯрж┐ржВрзЯрзЗрж░ ржХрж╛рж░ржгрзЗ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржирзЗрж░ рж▓ржЬрж┐ржХ ржмрзНрж░рзЗржХ ржХрж░рзЗ, ржПржЯрж╛ рж╕рж╛ржзрж╛рж░ржгржд ржПржЯрж╛ ржкрзНрж░ржХрж╛рж╢ ржХрж░рзЗ ржпрзЗ ржЖржкржирж╛рж░ ржХрзЛржбрзЗ ржмрж╛ржЧ рж░рзЯрзЗржЫрзЗред** ржПржХржЬржи ржЗржЙржЬрж╛рж░рзЗрж░ ржжрзГрж╖рзНржЯрж┐ржХрзЛржг ржерзЗржХрзЗ, ржПржХржЯрж┐ ржкрзЗржЬ ржнрж┐ржЬрж┐ржЯ ржХрж░рж╛рж░ ржоржзрзНржпрзЗ ржПржмржВ рж╕рзЗржЗ ржкрзЗржЬ ржнрж┐ржЬрж┐ржЯ ржХрж░рзЗ, ржПржХржЯрж┐ рж▓рж┐ржЩрзНржХрзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзЗ, рждрж╛рж░ржкрж░ ржмрзНржпрж╛ржХ ржЯрж┐ржкрзЗ ржЖржмрж╛рж░ ржкрзЗржЬ ржжрзЗржЦрж╛рж░ ржоржзрзНржпрзЗ ржХрзЛржирзЛ ржкрж╛рж░рзНржержХрзНржп ржерж╛ржХрж╛ ржЙржЪрж┐ржд ржиржпрж╝ред React ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗ ржПржХржмрж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯржЧрзБрж▓рж┐ржХрзЗ рж░рж┐ржорж╛ржЙржирзНржЯ ржХрж░рзЗ ржпрж╛ржЪрж╛ржЗ ржХрж░рзЗ ржпрзЗ ржЖржкржирж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯржЧрзБрж▓рж┐ ржПржЗ ржирзАрждрж┐ ржорзЗржирзЗ ржЪрж▓рзЗ ржХрж┐ржирж╛ред

## ржорзВрж▓ржХржерж╛ {/*putting-it-all-together*/}

ржПржЗ ржкрзНрж▓рзЗржЧрзНрж░рж╛ржЙржирзНржбржЯрж┐ ржЖржкржирж╛ржХрзЗ ржмрж╛рж╕рзНрждржмрзЗ Effect ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ рждрж╛ "ржПржХржЯрзБ ржЕржирзБржнржм ржХрж░рждрзЗ" рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рждрзЗ ржкрж╛рж░рзЗред

ржПржЗ ржЙржжрж╛рж╣рж░ржгржЯрж┐ Effect рж░рж╛ржи ржХрж░рж╛рж░ рждрж┐ржи рж╕рзЗржХрзЗржирзНржб ржкрж░ ржЗржиржкрзБржЯрзЗрж░ ржЯрзЗржХрзНрж╕ржЯ ржирж┐рзЯрзЗ ржПржХржЯрж┐ console log ржХрж░рж╛рж░ ржЬржирзНржп [`setTimeout`](https://developer.mozilla.org/en-US/docs/Web/API/setTimeout) ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржЫрзЗред ржХрзНрж▓рж┐ржи-ржЖржк ржлрж╛ржВрж╢ржиржЯрж┐ ржЕржкрзЗржХрзНрж╖рж╛рж░ржд timeout ржХрзЗ ржмрж╛ржж ржХрж░рзЗ ржжрзЗрзЯред "Mount the component" ржмрж╛ржЯржиржЯрж┐ ржЪрж╛ржкрж╛рж░ ржорж╛ржзрзНржпржорзЗ рж╢рзБрж░рзБ ржХрж░рзБржиржГ

<Sandpack>

```js
import { useState, useEffect } from 'react';

function Playground() {
  const [text, setText] = useState('a');

  useEffect(() => {
    function onTimeout() {
      console.log('тП░ ' + text);
    }

    console.log('ЁЯФ╡ Schedule "' + text + '" log');
    const timeoutId = setTimeout(onTimeout, 3000);

    return () => {
      console.log('ЁЯЯб Cancel "' + text + '" log');
      clearTimeout(timeoutId);
    };
  }, [text]);

  return (
    <>
      <label>
        What to log:{' '}
        <input
          value={text}
          onChange={e => setText(e.target.value)}
        />
      </label>
      <h1>{text}</h1>
    </>
  );
}

export default function App() {
  const [show, setShow] = useState(false);
  return (
    <>
      <button onClick={() => setShow(!show)}>
        {show ? 'Unmount' : 'Mount'} the component
      </button>
      {show && <hr />}
      {show && <Playground />}
    </>
  );
}
```

</Sandpack>

ржЖржкржирж┐ ржкрзНрж░ржержорзЗ рждрж┐ржиржЯрж┐ рж▓ржЧ ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗржи: `Schedule "a" log`, `Cancel "a" log`, ржПржмржВ ржЖржмрж╛рж░ `Schedule "a" log`ред рждрж┐ржи рж╕рзЗржХрзЗржирзНржб ржкрж░рзЗ `a` рж▓рзЗржЦрж╛ ржЖрж░рзЛ ржПржХржЯрж┐ рж▓ржЧ ржжрзЗржЦрж╛ ржпрж╛ржмрзЗред ржЖржкржирж┐ ржЖржЧрзЗ ржпрж╛ рж╢рж┐ржЦрзЗржЫрзЗржи рж╕рзЗ ржЕржирзБржпрж╛рзЯрзА, ржЕрждрж┐рж░рж┐ржХрзНржд schedule/cancel-ржжрзНржмрзЯрзЗрж░ ржХрж╛рж░ржг React ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗ ржПржХржмрж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯржЯрж┐ ржкрзБржирж░рж╛ржпрж╝ ржорж╛ржЙржирзНржЯ ржХрж░рзЗ ржпрж╛ржЪрж╛ржЗ ржХрж░рзЗ ржпрзЗ ржЖржкржирж┐ ржХрзНрж▓рж┐ржи-ржЖржк ржнрж╛рж▓рзЛржнрж╛ржмрзЗ ржмрж╛рж╕рзНрждржмрж╛ржпрж╝ржи ржХрж░рзЗржЫрзЗржи ржХрж┐ржирж╛ред

ржПржЦржи ржЗржиржкрзБржЯржЯрж┐ ржПржбрж┐ржЯ ржХрж░рзЗ `abc` рж▓рж┐ржЦрзБржиред ржпржжрж┐ ржЖржкржирж┐ ржпржерзЗрж╖рзНржЯ ржжрзНрж░рзБржд ржЯрж╛ржЗржк ржХрж░рзЗржи, рждрж╛рж╣рж▓рзЗ ржЖржкржирж┐ ржжрзЗржЦржмрзЗржи `Schedule "ab" log` ржПрж░ ржкрж░ ржкрж░ржЗ `Cancel "ab" log` ржПржмржВ `Schedule "abc" log`ред **React рж╕рж░рзНржмржжрж╛ ржкрж░ржмрж░рзНрждрзА рж░рзЗржирзНржбрж╛рж░рзЗрж░ Effect-ржПрж░ ржЖржЧрзЗржЗ ржкрзВрж░рзНржмржмрж░рзНрждрзА рж░рзЗржирзНржбрж╛рж░рзЗрж░ Effect ржХрзНрж▓рж┐ржи ржХрж░рзЗред** ржПржЗ ржХрж╛рж░ржгрзЗ ржЖржкржирж┐ ржжрзНрж░рзБржд ржЗржиржкрзБржЯрзЗ ржЯрж╛ржЗржк ржХрж░рж▓рзЗржУ, ржПржХржмрж╛рж░рзЗ рж╕рж░рзНржмрж╛ржзрж┐ржХ ржПржХржЯрж┐ ржЯрж╛ржЗржоржЖржЙржЯ рж╢рж┐ржбрж┐ржЙрж▓ ржХрж░рж╛ рж╣ржмрзЗред ржЗржиржкрзБржЯржЯрж┐ ржХржпрж╝рзЗржХржмрж╛рж░ ржПржбрж┐ржЯ ржХрж░рзБржи ржПржмржВ ржХржирж╕рзЛрж▓ ржжрзЗржЦрзБржи ржпрж╛рждрзЗ Effect-ржЧрзБрж▓рзЛ ржХрзАржнрж╛ржмрзЗ ржХрзНрж▓рж┐ржи рж╣ржпрж╝ рждрж╛ ржЕржирзБржзрж╛ржмржи ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред

ржЗржиржкрзБржЯрзЗ ржХрж┐ржЫрзБ ржЯрж╛ржЗржк ржХрж░рзБржи рждрж╛рж░ржкрж░ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗржЗ "Unmount the component" ржмрж╛ржЯржиржЯрж┐ ржЪрж╛ржкрзБржиред ржЦрзЗрзЯрж╛рж▓ ржХрж░рзБржи ржХрзАржнрж╛ржмрзЗ ржЖржиржорж╛ржЙржирзНржЯ ржХрж░рж▓рзЗ рж╢рзЗрж╖ рж░рзЗржирзНржбрж╛рж░рзЗрж░ Effect-ржЯрж┐ ржХрзНрж▓рж┐ржиржЖржк рж╣рзЯрзЗ ржпрж╛рзЯред ржПржХрзНрж╖рзЗрждрзНрж░рзЗ, ржПржЯрж┐ рж╢рзЗрж╖ ржЯрж╛ржЗржоржЖржЙржЯржЯрж┐ржХрзЗ рж░рж╛ржи ржХрж░рждрзЗ ржкрж╛рж░рж╛рж░ ржЖржЧрзЗржЗ ржХрзНрж▓рж┐рзЯрж╛рж░ ржХрж░рзЗ ржжрзЗрзЯред

рж╕ржмрж╢рзЗрж╖рзЗ, ржЙржкрж░рзЗрж░ ржХржорзНржкрзЛржирзЗржирзНржЯржЯрж┐ ржПржбрж┐ржЯ ржХрж░рзЗ ржХрзНрж▓рж┐ржиржЖржк ржлрж╛ржВрж╢ржиржЯрж┐ржХрзЗ ржХржорзЗржирзНржЯ ржЖржЙржЯ ржХрж░рзЗ ржжрж┐ржи ржпрж╛рждрзЗ ржЯрж╛ржЗржоржЖржЙржЯржЧрзБрж▓рзЛ ржХрзНржпрж╛ржирзНрж╕рзЗрж▓ ржирж╛ рж╣рзЯред ржжрзНрж░рзБржд ржЯрж╛ржЗржк ржХрж░рзЗ `abcde` рж▓рзЗржЦрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред рждрж┐ржи рж╕рзЗржХрзЗржирзНржбрзЗрж░ ржоржзрзНржпрзЗ ржХрж┐ ржШржЯржмрзЗ ржмрж▓рзЗ ржЖржкржирж┐ ржЖрж╢рж╛ ржХрж░рзЗржи? ржЯрж╛ржЗржоржЖржЙржЯрзЗрж░ ржнрж┐рждрж░рзЗрж░ `console.log(text)` ржХрж┐ *рж╕рж░рзНржмрж╢рзЗрж╖* `text` ржкрзНрж░рж┐ржирзНржЯ ржХрж░ржмрзЗ ржПржмржВ ржкрж╛ржБржЪржЯрж┐ `abcde` рж▓ржЧ рждрзИрж░рж┐ ржХрж░ржмрзЗ? ржПржХржЯрзБ ржЯрзНрж░рж╛ржЗ ржХрж░рзЗ ржжрзЗржЦрзБржи ржЖржкржирж┐ ржХрждржЯрзБржХрзБ ржмрзБржЭрзЗржЫрзЗржи рждрж╛ ржЪрзЗржХ ржХрж░рждрзЗред

рждрж┐ржи рж╕рзЗржХрзЗржирзНржб ржкрж░рзЗ, ржЖржкржирж┐ ржкрж╛ржБржЪржЯрж┐ `abcde` рж▓ржЧрзЗрж░ ржкрж░рж┐ржмрж░рзНрждрзЗ ржПржХржЯрж┐ рж▓ржЧрзЗрж░ ржзрж╛рж░рж╛ ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗржи (`a`, `ab`, `abc`, `abcd`, ржПржмржВ `abcde`)ред **ржкрзНрж░рждрзНржпрзЗржХ Effect рждрж╛рж░ рж╕ржВрж╢рзНрж▓рж┐рж╖рзНржЯ рж░рзЗржирзНржбрж╛рж░ ржерзЗржХрзЗ `text` ржнрзНржпрж╛рж▓рзБ "ржХрзНржпрж╛ржкржЪрж╛рж░" ржХрж░рзЗред** `text` рж╕рзНржЯрзЗржЯ ржкрж░рж┐ржмрж░рзНрждржи рж╣рзЯрзЗ ржЧрзЗржЫрзЗ рждрж╛рждрзЗ ржХрж┐ржЫрзБ ржЖрж╕рзЗ ржпрж╛рзЯржирж╛ржГ `text = 'ab'` ржУрзЯрж╛рж▓рж╛ ржПржХржЯрж┐ рж░рзЗржирзНржбрж╛рж░ ржерзЗржХрзЗ ржПржХржЯрж┐ Effect рж╕рж░рзНржмржжрж╛ `'ab'`-ржЗ ржжрзЗржЦржмрзЗред ржЕржирзНржп ржХржерж╛ржпрж╝, ржкрзНрж░рждрзНржпрзЗржХ рж░рзЗржирзНржбрж╛рж░рзЗрж░ Effect-ржЧрзБрж▓рзЛ ржПржХрзЗ ржЕржкрж░рзЗрж░ ржерзЗржХрзЗ ржмрж┐ржЪрзНржЫрж┐ржирзНржиред ржЖржкржирж┐ ржпржжрж┐ ржПржЯрж╛ ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ рждрж╛ ржЬрж╛ржирждрзЗ ржЖржЧрзНрж░рж╣рзА рж╣ржи, рждрж╛рж╣рж▓рзЗ ржЖржкржирж┐ [closure](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures) рж╕ржорзНржкрж░рзНржХрзЗ ржкржбрж╝рждрзЗ ржкрж╛рж░рзЗржиред

<DeepDive>

#### ржкрзНрж░рждрзНржпрзЗржХ рж░рзЗржирзНржбрж╛рж░рзЗрж░ ржирж┐ржЬ ржирж┐ржЬ Effect ржЖржЫрзЗ {/*each-render-has-its-own-effects*/}

ржЖржкржирж┐ `useEffect` ржПрж░ ржмрзНржпрж╛ржкрж╛рж░рзЗ ржоржирзЗ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи рж░рзЗржирзНржбрж╛рж░ ржЖржЙржЯржкрзБржЯрзЗрж░ рж╕рж╛ржерзЗ ржХрзЛржирзЛ ржПржХржЯрж┐ ржХрзНрж░рж┐рзЯрж╛ "рж╕ржорзНржкрзГржХрзНржд" ржХрж░рзЗ ржжрзЗрзЯрж╛ред ржПржЗ Effect-ржЯрж┐ ржжрзЗржЦрзБржиржГ

```js
export default function ChatRoom({ roomId }) {
  useEffect(() => {
    const connection = createConnection(roomId);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]);

  return <h1>Welcome to {roomId}!</h1>;
}
```

ржЪрж▓рзБржи ржжрзЗржЦрж┐ ржЖрж╕рж▓рзЗ ржХрж┐ ржШржЯржЫрзЗ ржпржЦржи ржЗржЙржЬрж╛рж░ ржЕрзНржпрж╛ржкрзЗрж░ ржоржзрзНржпрзЗ ржирзНржпрж╛ржнрж┐ржЧрзЗржЯ ржХрж░рзЗред

#### ржЗржирж┐рж╢рж┐рзЯрж╛рж▓ рж░рзЗржирзНржбрж╛рж░ {/*initial-render*/}

ржЗржЙржЬрж╛рж░ `<ChatRoom roomId="general" />` ржХрж░рж▓рзЛред ржЖржкрж╛рждржд [ржоржирзЗржХрж░рж┐](/learn/state-as-a-snapshot#rendering-takes-a-snapshot-in-time) `roomId` рж╣ржЪрзНржЫрзЗ `'general'`:

```js
  // JSX for the first render (roomId = "general")
  return <h1>Welcome to general!</h1>;
```

**ржЙржХрзНржд Effect-ржЯрж┐ рж░рзЗржирзНржбрж╛рж░рж┐ржВ *ржЖржЙржЯржкрзБржЯрзЗрж░ржУ* ржПржХржЯрж┐ ржЕржВрж╢ред** ржПржЦржи рждрж╛рж╣рж▓рзЗ ржкрзНрж░ржержо рж░рзЗржирзНржбрж╛рж░рзЗрж░ Effect рж╣ржмрзЗржГ

```js
  // Effect for the first render (roomId = "general")
  () => {
    const connection = createConnection('general');
    connection.connect();
    return () => connection.disconnect();
  },
  // Dependencies for the first render (roomId = "general")
  ['general']
```

React ржПржЗ Effect-ржЯрж┐ рж░рж╛ржи ржХрж░рзЗ, ржпрж╛ `'general'` ржЪрзНржпрж╛ржЯ рж░рзБржорзЗрж░ рж╕рж╛ржерзЗ ржХрж╛ржирзЗржХрзНржЯ ржХрж░рзЗред

#### ржПржХржЗ dependency ржирж┐рзЯрзЗ рж░рж┐-рж░рзЗржирзНржбрж╛рж░ {/*re-render-with-same-dependencies*/}

ржзрж░рзБржи `<ChatRoom roomId="general" />` рж░рж┐-рж░рзЗржирзНржбрж╛рж░ ржХрж░рж▓рзЛред JSX ржЖржЙржЯржкрзБржЯ рж╕рзЗржЗржо-ржЗ ржЖржЫрзЗржГ

```js
  // JSX for the second render (roomId = "general")
  return <h1>Welcome to general!</h1>;
```

React ржжрзЗржЦрзЗ ржпрзЗ рж░рзЗржирзНржбрж╛рж░рж┐ржВ ржЖржЙржЯржкрзБржЯ ржПржХржЗ ржЖржЫрзЗ, рждрж╛ржЗ рж╕рзЗ ржЖрж░ DOM ржЖржкржбрзЗржЯ ржХрж░рзЗ ржирж╛ред

ржжрзНржмрж┐рждрзАрзЯ рж░рзЗржирзНржбрж╛рж░рзЗрж░ Effect-ржЯрж┐ ржжрзЗржЦрждрзЗ ржПржоржиржГ

```js
  // Effect for the second render (roomId = "general")
  () => {
    const connection = createConnection('general');
    connection.connect();
    return () => connection.disconnect();
  },
  // Dependencies for the second render (roomId = "general")
  ['general']
```

React рзирзЯ рж░рзЗржирзНржбрж╛рж░рзЗрж░ `['general']` ржПрж░ рж╕рж╛ржерзЗ рззржо рж░рзЗржирзНржбрж╛рж░рзЗрж░ `['general']` рждрзБрж▓ржирж╛ ржХрж░рзЗред **ржпрзЗрж╣рзЗрждрзБ рж╕ржм dependecy ржПржХржЗ ржЖржЫрзЗ, рждрж╛ржЗ React рзирзЯ рж░рзЗржирзНржбрж╛рж░рзЗрж░ Effect-ржЯрж┐ржХрзЗ *ржЗржЧржирзЛрж░* ржХрж░рзЗред** рж╕рзЗржЯрж┐ржХрзЗ ржХржЦржирзЛржЗ ржХрж▓ ржХрж░рж╛ рж╣рзЯржирж╛ред

#### ржнрж┐ржирзНржи dependencies ржирж┐рзЯрзЗ рж░рж┐-рж░рзЗржирзНржбрж╛рж░ {/*re-render-with-different-dependencies*/}

ржПрж░ржкрж░ ржзрж░рзБржи, ржЗржЙржЬрж╛рж░ `<ChatRoom roomId="travel" />` ржнрж┐ржЬрж┐ржЯ ржХрж░рж▓рзЛред ржПржЗржмрж╛рж░, ржХржорзНржкрзЛржирзЗржирзНржЯржЯрж┐ ржЕржирзНржпрж░ржХржо JSX рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗржГ

```js
  // JSX for the third render (roomId = "travel")
  return <h1>Welcome to travel!</h1>;
```

React `"Welcome to general"` ржХрзЗ `"Welcome to travel"` ржП ржмржжрж▓рж╛рждрзЗ DOM ржЖржкржбрзЗржЯ ржХрж░рзЗред

рзйрзЯ рж░рзЗржирзНржбрж╛рж░рзЗрж░ Effect ржжрзЗржЦрждрзЗ ржПржоржи ржжрзЗржЦрж╛ржмрзЗржГ

```js
  // Effect for the third render (roomId = "travel")
  () => {
    const connection = createConnection('travel');
    connection.connect();
    return () => connection.disconnect();
  },
  // Dependencies for the third render (roomId = "travel")
  ['travel']
```

React рзйрзЯ рж░рзЗржирзНржбрж╛рж░рзЗрж░ `['travel']` ржПрж░ рж╕рж╛ржерзЗ рзирзЯ рж░рзЗржирзНржбрж╛рж░рзЗрж░ `['general']` ржПрж░ рждрзБрж▓ржирж╛ ржХрж░рзЗред ржжрзЗржЦрж╛ ржпрж╛ржЪрзНржЫрзЗ ржПржХржЯрж┐ dependency ржмржжрж▓рзЗ ржЧрзЗржЫрзЗржГ `Object.is('travel', 'general')` ржПрж░ ржлрж▓рж╛ржлрж▓ `false` рж╣рзЯред рждрж╛ржЗ ржПржЗ Effect-ржЯрж┐ рж╕рзНржХрж┐ржк ржХрж░рж╛ ржпрж╛ржмрзЗржирж╛ред

**рждрзГрждрзАржпрж╝ рж░рзЗржирзНржбрж╛рж░рзЗрж░ Effect ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рж╛рж░ ржЖржЧрзЗ, React ржХрзЗ рж╕рж░рзНржмрж╢рзЗрж╖ ржпрзЗ Effect _рж░рж╛ржи ржХрж░рзЗржЫрж┐рж▓рзЛ_ рждрж╛ ржХрзНрж▓рж┐ржи-ржЖржк ржХрж░рждрзЗ рж╣ржмрзЗред** рзирзЯ рж░рзЗржирзНржбрж╛рж░рзЗрж░ Effect-ржЯрж┐ рж╕рзНржХрж┐ржк ржХрж░рж╛ рж╣рзЯрзЗржЫрж┐рж▓рзЛ, рждрж╛ржЗ React ржХрзЗ ржкрзНрж░ржержо рж░рзЗржирзНржбрж╛рж░рзЗрж░ Effect ржХрзНрж▓рж┐ржи-ржЖржк ржХрж░рждрзЗ рж╣ржмрзЗред ржЖржкржирж┐ ржпржжрж┐ ржЙржкрж░рзЗ рж╕рзНржХрзНрж░рж▓ ржХрж░рзЗ рззржо рж░рзЗржирзНржбрж╛рж░рзЗрж░ ржУржЦрж╛ржирзЗ ржпрж╛ржи, ржжрзЗржЦржмрзЗржи ржпрзЗ ржПрж░ ржХрзНрж▓рж┐ржи-ржЖржк `createConnection('general')` ржжрж┐ржпрж╝рзЗ рждрзИрж░рж┐ ржХрж░рж╛ ржХрж╛ржирзЗржХрж╢ржирзЗрж░ ржЙржкрж░ `disconnect()` ржХрж▓ ржХрж░рзЗред ржПржЯрж┐ ржЕрзНржпрж╛ржкржХрзЗ `'general'` ржЪрзНржпрж╛ржЯ рж░рзБржо ржерзЗржХрзЗ ржбрж┐рж╕ржХрж╛ржирзЗржХрзНржЯ ржХрж░рзЗ ржжрзЗрзЯред

ржПрж░ ржкрж░рзЗ, React рзйрзЯ рж░рзЗржирзНржбрж╛рж░рзЗрж░ Effect рж░рж╛ржи ржХрж░рзЗ ржПржмржВ `'travel'` ржЪрзНржпрж╛ржЯ рж░рзБржорзЗрж░ рж╕рж╛ржерзЗ ржХрж╛ржирзЗржХрзНржЯ ржХрж░рзЗред

#### ржЖржиржорж╛ржЙржирзНржЯ {/*unmount*/}

рж╕ржмрж╢рзЗрж╖рзЗ, ржзрж░рзБржи ржЗржЙржЬрж╛рж░ ржЕржирзНржп ржкрзЗржЬрзЗ ржЪрж▓рзЗ ржЧрзЗрж▓, ржПржмржВ `ChatRoom` ржХржорзНржкрзЛржирзЗржирзНржЯржЯрж┐ ржЖржиржорж╛ржЙржирзНржЯ рж╣рж▓рзЛред рж░рж┐ржпрж╝рзЗржХрзНржЯ рждржЦржи рж╕рж░рзНржмрж╢рзЗрж╖ Effect-ржПрж░ ржХрзНрж▓рж┐ржи-ржЖржк ржлрж╛ржВрж╢ржиржЯрж┐ рж░рж╛ржи ржХрж░рзЗред рж╕рж░рзНржмрж╢рзЗрж╖ Effect-ржЯрж┐ ржЫрж┐рж▓ рждрзГрждрзАржпрж╝ рж░рзЗржирзНржбрж╛рж░ ржерзЗржХрзЗред рждрзГрждрзАржпрж╝ рж░рзЗржирзНржбрж╛рж░рзЗрж░ ржХрзНрж▓рж┐ржи-ржЖржк `createConnection('travel')` ржХрж╛ржирзЗржХрж╢ржиржЯрж┐ ржХрзЗржЯрзЗ ржжрзЗржпрж╝ред ржлрж▓рзЗ ржЕрзНржпрж╛ржкржЯрж┐ `'travel'` рж░рзБржо ржерзЗржХрзЗ ржбрж┐рж╕ржХрж╛ржирзЗржХрзНржЯ рж╣ржпрж╝рзЗ ржпрж╛ржпрж╝ред

#### рж╢рзБржзрзБржорж╛рждрзНрж░ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрж░ рж╕ржорзЯ ржжрзЗржЦрж╛ ржпрж╛ржпрж╝ ржПржоржи ржХрж┐ржЫрзБ ржЖржЪрж░ржг {/*development-only-behaviors*/}

ржпржЦржи [рж╕рзНржЯрзНрж░рж┐ржХрзНржЯ ржорзЛржб](/reference/react/StrictMode) ржЪрж╛рж▓рзБ ржерж╛ржХрзЗ, рж░рж┐ржпрж╝рзЗржХрзНржЯ ржкрзНрж░рждрж┐ржЯрж┐ ржХржорзНржкрзЛржирзЗржирзНржЯржХрзЗ ржорж╛ржЙржирзНржЯ рж╣ржУржпрж╝рж╛рж░ ржкрж░ ржПржХржмрж╛рж░ ржкрзБржиржГ-ржорж╛ржЙржирзНржЯ (remount) ржХрж░рзЗ (рж╕рзНржЯрзЗржЯ ржПржмржВ DOM ржЕржкрж░рж┐ржмрж░рзНрждрж┐ржд ржерж╛ржХрзЗ)ред ржПржЯрж┐ ржЖржкржирж╛ржХрзЗ [ржПржоржи Effect ржЦрзБржБржЬрзЗ ржмрзЗрж░ ржХрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗ ржпрзЗржЧрзБрж▓рзЛрж░ ржХрзНрж▓рж┐ржи-ржЖржк ржкрзНрж░ржпрж╝рзЛржЬржи](#step-3-add-cleanup-if-needed) ржПржмржВ рж░рзЗрж╕ ржХржирзНржбрж┐рж╢ржирзЗрж░ ржорждрзЛ ржмрж╛ржЧ ржЖржЧрзЗрж░ ржерзЗржХрзЗржЗ ржкрзНрж░ржХрж╛рж╢ ржХрж░рзЗ ржжрзЗрзЯред ржПржЫрж╛ржбрж╝рж╛ржУ, ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗ ржпржЦржиржЗ ржЖржкржирж┐ ржХрзЛржирзЛ ржлрж╛ржЗрж▓ рж╕рзЗржн ржХрж░ржмрзЗржи, рж░рж┐ржпрж╝рзЗржХрзНржЯ Effect-ржЧрзБрж▓рзЛржХрзЗ рж░рж┐-ржорж╛ржЙржирзНржЯ ржХрж░ржмрзЗред ржПржЗ ржЖржЪрж░ржгржЧрзБрж▓рзЛ рж╢рзБржзрзБржорж╛рждрзНрж░ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ ржорзЛржбрзЗржЗ ржжрзЗржЦрж╛ ржпрж╛ржпрж╝ред

</DeepDive>

<Recap>

- Effect ржирж┐ржЬрзЗрж░ рж░рзЗржирзНржбрж╛рж░рзЗрж░ ржХрж╛рж░ржгрзЗржЗ ржШржЯрзЗ, event-ржПрж░ ржорждрзЛ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрзЛржирзЛ ржЗржирзНржЯрж╛рж░тАНрзНржпрж╛ржХрж╢ржирзЗрж░ ржХрж╛рж░ржгрзЗ ржШржЯрзЗ ржирж╛ред
- Effect ржЖржкржирж╛ржХрзЗ ржПржХржЯрж┐ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ рж╕рж╛ржерзЗ ржмрж╛ржЗрж░рзЗрж░ ржХрзЛржирзЛ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ (ржерж╛рж░рзНржб-ржкрж╛рж░рзНржЯрж┐ API, ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржЗрждрзНржпрж╛ржжрж┐) рж╕рж╛ржоржЮрзНржЬрж╕рзНржп рждрзИрж░рж┐ ржХрж░рждрзЗ ржжрзЗрзЯред
- ржбрж┐ржлрж▓рзНржЯ ржЕржмрж╕рзНржерж╛рзЯ, Effect ржкрзНрж░рждрзНржпрзЗржХ рж░рзЗржирзНржбрж╛рж░рзЗрж░ (ржкрзНрж░ржержоржЯрж╛ рж╕рж╣) ржкрж░рзЗ рж░рж╛ржи ржХрж░рзЗред
- ржпржжрж┐ ржХрзЛржирзЛ Effect-ржПрж░ рж╕ржХрж▓ dependecy рж╕рж░рзНржмрж╢рзЗрж╖ рж░рзЗржирзНржбрж╛рж░рзЗрж░ ржЕржмрж┐ржХрж▓ ржерж╛ржХрзЗ рждрж╛рж╣рж▓рзЗ React Effect-ржЯрж┐ржХрзЗ рж╕рзНржХрж┐ржк ржХрж░ржмрзЗред
- ржЖржкржирж┐ dependencies "ржмрж╛ржЫрж╛ржЗ ржХрж░рждрзЗ" ржкрж╛рж░ржмрзЗржи ржирж╛ред рж╕рзЗржЧрзБрж▓рзЛ Effect-ржПрж░ ржнрж┐рждрж░рзЗрж░ ржХрзЛржб ржжрзНржмрж╛рж░рж╛ ржирж┐рж░рзНржзрж╛рж░рж┐ржд рж╣рзЯрзЗ ржерж╛ржХрзЗред
- ржЦрж╛рж▓рж┐ dependecy ржЕрзНржпрж╛рж░рзЗ (`[]`) ржПрж░ рж╕ржорзНржкрж░рзНржХ рж╣рж▓рзЛ ржХржорзНржкрзЛржирзЗржирзНржЯ "mounting" ржПрж░ рж╕рж╛ржерзЗ ржЕрж░рзНржерж╛рзО, ржпржЦржи рж╕рзЗржЯрж┐ рж╕рзНржХрзНрж░рж┐ржирзЗ ржЕрзНржпрж╛ржб ржХрж░рж╛ рж╣рзЯ рждрж╛рж░ рж╕рж╛ржерзЗред
- Strict Mode-ржП, React ржЖржкржирж╛рж░ Effects ржнрж╛рж▓рзЛржнрж╛ржмрзЗ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рж╛рж░ ржЬржирзНржп ржХржорзНржкрзЛржирзЗржирзНржЯрж╕ржорзВрж╣ржХрзЗ ржжрзБржЗржмрж╛рж░ ржХрж░рзЗ ржорж╛ржЙржирзНржЯ ржХрж░рзЗ (ржПржЯрж╛ рж╢рзБржзрзБ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗрж░ рж╕ржорзЯржЗ!)ред
- ржпржжрж┐ ржЖржкржирж╛рж░ Effect ржмрж╛рж░ржВржмрж╛рж░ ржорж╛ржЙржирзНржЯрж┐ржВрзЯрзЗрж░ ржлрж▓рзЗ ржмрзНрж░рзЗржХ ржХрж░рзЗ, ржПрждрзЗ ржмрзБржЭрж╛ ржпрж╛рзЯ ржЖржкржирж╛рж░ ржПржХржЯрж┐ ржХрзНрж▓рж┐ржи-ржЖржк ржлрж╛ржВрж╢ржи рж▓рж┐ржЦрждрзЗ рж╣ржмрзЗред
- Effect ржкрж░ржмрж░рзНрждрзАржмрж╛рж░ рж░рж╛ржи ржХрж░рж╛рж░ ржкрзВрж░рзНржмрзЗ ржПржмржВ ржХржорзНржкрзЛржирзЗржирзНржЯ ржЖржиржорж╛ржЙржирзНржЯрж┐ржВрзЯрзЗрж░ ржПрж░ рж╕ржорзЯ React ржЖржкржирж╛рж░ ржХрзНрж▓рж┐ржи-ржЖржк ржлрж╛ржВрж╢ржи ржХрж▓ ржХрж░рзЗред

</Recap>

<Challenges>

#### ржорж╛ржЙржирзНржЯ рж╣ржУржпрж╝рж╛рж░ рж╕ржоржпрж╝ ржПржХржЯрж┐ ржлрж┐рж▓рзНржбрзЗ ржлрзЛржХрж╛рж╕ ржХрж░рзБржи {/*focus-a-field-on-mount*/}

ржПржЗ ржЙржжрж╛рж╣рж░ржгрзЗ, ржлрж░рзНржоржЯрж┐ ржПржХржЯрж┐ `<MyInput />` ржХржорзНржкрзЛржирзЗржирзНржЯ рж░рзЗржирзНржбрж╛рж░ ржХрж░рзЗред

ржЗржиржкрзБржЯрзЗрж░ [`focus()`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus) ржорзЗржержб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ `MyInput` рж╕рзНржХрзНрж░рж┐ржирзЗ ржжрзЗржЦрж╛ ржпрж╛ржУржпрж╝рж╛рж░ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ ржЕржЯрзЛржорзНржпрж╛ржЯрж┐ржХржнрж╛ржмрзЗ ржлрзЛржХрж╛рж╕ ржХрж░рж╛ржиред ржЗрждрж┐ржоржзрзНржпрзЗ ржПржХржЯрж┐ ржХржорзЗржирзНржЯ ржЖржЙржЯ ржХрж░рж╛ ржЗржоржкрзНрж▓рзЗржорзЗржирзНржЯрзЗрж╢ржи рж░ржпрж╝рзЗржЫрзЗ, ржХрж┐ржирзНрждрзБ ржПржЯрж┐ ржарж┐ржХржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░ржЫрзЗ ржирж╛ред ржПржЯрж┐ ржХрзЗржи ржХрж╛ржЬ ржХрж░ржЫрзЗ ржирж╛ рждрж╛ ржмрзЗрж░ ржХрж░рзБржи ржПржмржВ рж╕ржорж╕рзНржпрж╛ржЯрж┐ ржарж┐ржХ ржХрж░рзБржиред (ржпржжрж┐ ржЖржкржирж┐ `autoFocus` ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ рж╕ржорзНржкрж░рзНржХрзЗ ржЬрзЗржирзЗ ржерж╛ржХрзЗржи, рждрж╛рж╣рж▓рзЗ ржзрж░рзЗ ржирж┐ржи ржпрзЗ ржПржЯрж┐рж░ ржХрзЛржирзЛ ржЕрж╕рзНрждрж┐рждрзНржм ржирзЗржЗржГ ржЖржорж░рж╛ ржПржХржЗ ржлрж╛ржВрж╢ржирж╛рж▓рж┐ржЯрж┐ ржкрзБржирж░рж╛ржпрж╝ ржЗржоржкрзНрж▓рзЗржорзЗржирзНржЯ ржХрж░ржЫрж┐ред)

<Sandpack>

```js src/MyInput.js active
import { useEffect, useRef } from 'react';

export default function MyInput({ value, onChange }) {
  const ref = useRef(null);

  // TODO: This doesn't quite work. Fix it.
  // ref.current.focus()    

  return (
    <input
      ref={ref}
      value={value}
      onChange={onChange}
    />
  );
}
```

```js src/App.js hidden
import { useState } from 'react';
import MyInput from './MyInput.js';

export default function Form() {
  const [show, setShow] = useState(false);
  const [name, setName] = useState('Taylor');
  const [upper, setUpper] = useState(false);
  return (
    <>
      <button onClick={() => setShow(s => !s)}>{show ? 'Hide' : 'Show'} form</button>
      <br />
      <hr />
      {show && (
        <>
          <label>
            Enter your name:
            <MyInput
              value={name}
              onChange={e => setName(e.target.value)}
            />
          </label>
          <label>
            <input
              type="checkbox"
              checked={upper}
              onChange={e => setUpper(e.target.checked)}
            />
            Make it uppercase
          </label>
          <p>Hello, <b>{upper ? name.toUpperCase() : name}</b></p>
        </>
      )}
    </>
  );
}
```

```css
label {
  display: block;
  margin-top: 20px;
  margin-bottom: 20px;
}

body {
  min-height: 150px;
}
```

</Sandpack>


ржЖржкржирж╛рж░ рж╕ржорж╛ржзрж╛ржи ржХрж╛ржЬ ржХрж░ржЫрзЗ ржХрж┐ржирж╛ рждрж╛ ржпрж╛ржЪрж╛ржЗ ржХрж░рждрзЗ, "Show form" ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржи ржПржмржВ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржи ржпрзЗ ржЗржиржкрзБржЯржЯрж┐ ржлрзЛржХрж╛рж╕ ржкрж╛ржЪрзНржЫрзЗ (рж╣рж╛ржЗрж▓рж╛ржЗржЯ рж╣ржЪрзНржЫрзЗ ржПржмржВ ржХрж╛рж░рзНрж╕рж░ ржПрж░ ржнрж┐рждрж░рзЗ ржпрж╛ржЪрзНржЫрзЗ)ред "Hide form" ржХрзНрж▓рж┐ржХ ржХрж░рзБржи ржПржмржВ ржЖржмрж╛рж░ "Show form" ржП ржХрзНрж▓рж┐ржХ ржХрж░рзБржиред ржпрж╛ржЪрж╛ржЗ ржХрж░рзБржи ржпрзЗ ржЗржиржкрзБржЯржЯрж┐ ржЖржмрж╛рж░ рж╣рж╛ржЗрж▓рж╛ржЗржЯ рж╣ржЪрзНржЫрзЗ ржХрж┐ржирж╛ред

`MyInput` рж╢рзБржзрзБржорж╛рждрзНрж░ _ржорж╛ржЙржирзНржЯ рж╣ржУржпрж╝рж╛рж░ рж╕ржоржпрж╝_ ржлрзЛржХрж╛рж╕ ржкрж╛ржмрзЗ, ржкрзНрж░рждрж┐ржЯрж┐ рж░рзЗржирзНржбрж╛рж░рзЗрж░ ржкрж░рзЗ ржиржпрж╝ред ржЗржиржкрзБржЯ рж╕ржарж┐ржХ ржЖржЪрж░ржг ржХрж░ржЫрзЗ ржХрж┐ржирж╛ рждрж╛ ржпрж╛ржЪрж╛ржЗ ржХрж░рждрзЗ, "Show form" ржП ржХрзНрж▓рж┐ржХ ржХрж░рзБржи ржПржмржВ рждрж╛рж░ржкрж░ ржмрж╛рж░ржмрж╛рж░ "Make it uppercase" ржЪрзЗржХржмржХрзНрж╕рзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржиред ржЪрзЗржХржмржХрзНрж╕рзЗ ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ ржПрж░ ржЙржкрж░рзЗрж░ ржЗржиржкрзБржЯржЯрж┐ ржлрзЛржХрж╛рж╕ _ржкрж╛ржУржпрж╝рж╛рж░ ржХржерж╛ ржирж╛_ред

<Solution>

рж░рзЗржирзНржбрж╛рж░рзЗрж░ рж╕ржоржпрж╝ `ref.current.focus()` ржХрж▓ ржХрж░рж╛ ржнрзБрж▓, ржХрж╛рж░ржг ржПржЯрж┐ ржПржХржЯрж┐ *side effect*ред side effect рж╣ржпрж╝ ржПржХржЯрж┐ event handler-ржПрж░ ржоржзрзНржпрзЗ рж░рж╛ржЦрж╛ ржЙржЪрж┐ржд ржЕржержмрж╛ `useEffect` ржПрж░ ржоржзрзНржпрзЗ ржбрж┐ржХрзНрж▓рзЗрзЯрж╛рж░ ржХрж░рж╛ ржЙржЪрж┐рждред ржПржЗ ржХрзНрж╖рзЗрждрзНрж░рзЗ, side effect-ржЯрж┐ ржХрзЛржирзЛ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЗржирзНржЯрж╛рж░тАНрзНржпрж╛ржХрж╢ржирзЗрж░ ржХрж╛рж░ржгрзЗ ржиржпрж╝, ржмрж░ржВ ржХржорзНржкрзЛржирзЗржирзНржЯржЯрж┐ ржкрзНрж░ржжрж░рзНрж╢рж┐ржд рж╣ржУржпрж╝рж╛рж░ ржХрж╛рж░ржгрзЗ ржШржЯрзЗ, рждрж╛ржЗ ржПржЯрж┐ржХрзЗ ржПржХржЯрж┐ Effect-ржП рж░рж╛ржЦрж╛ржЗ ржпрзБржХрзНрждрж┐ржпрзБржХрзНрждред

ржнрзБрж▓ржЯрж┐ рж╕ржВрж╢рзЛржзржи ржХрж░рждрзЗ, `ref.current.focus()` ржХрж▓ржЯрж┐ржХрзЗ ржПржХржЯрж┐ Effect ржбрж┐ржХрзНрж▓рзЗржпрж╝рж╛рж░рзЗрж╢ржирзЗрж░ ржоржзрзНржпрзЗ рж░рж╛ржЦрзБржиред рждрж╛рж░ржкрж░, ржПржЗ Effect-ржЯрж┐ ржпрж╛рждрзЗ рж╢рзБржзрзБржорж╛рждрзНрж░ ржорж╛ржЙржирзНржЯрзЗрж░ рж╕ржоржпрж╝ ржЪрж▓рзЗ, ржкрзНрж░рждрж┐ржЯрж┐ рж░рзЗржирзНржбрж╛рж░рзЗрж░ ржкрж░рзЗ ржиржпрж╝, рждрж╛рж░ ржЬржирзНржп ржЦрж╛рж▓рж┐ `[]` ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ ржпрзЛржЧ ржХрж░рзБржиред

<Sandpack>

```js src/MyInput.js active
import { useEffect, useRef } from 'react';

export default function MyInput({ value, onChange }) {
  const ref = useRef(null);

  useEffect(() => {
    ref.current.focus();
  }, []);

  return (
    <input
      ref={ref}
      value={value}
      onChange={onChange}
    />
  );
}
```

```js src/App.js hidden
import { useState } from 'react';
import MyInput from './MyInput.js';

export default function Form() {
  const [show, setShow] = useState(false);
  const [name, setName] = useState('Taylor');
  const [upper, setUpper] = useState(false);
  return (
    <>
      <button onClick={() => setShow(s => !s)}>{show ? 'Hide' : 'Show'} form</button>
      <br />
      <hr />
      {show && (
        <>
          <label>
            Enter your name:
            <MyInput
              value={name}
              onChange={e => setName(e.target.value)}
            />
          </label>
          <label>
            <input
              type="checkbox"
              checked={upper}
              onChange={e => setUpper(e.target.checked)}
            />
            Make it uppercase
          </label>
          <p>Hello, <b>{upper ? name.toUpperCase() : name}</b></p>
        </>
      )}
    </>
  );
}
```

```css
label {
  display: block;
  margin-top: 20px;
  margin-bottom: 20px;
}

body {
  min-height: 150px;
}
```

</Sandpack>

</Solution>

#### ржХржирзНржбрж┐рж╢ржирж╛рж▓рж┐ ржПржХржЯрж┐ ржлрж┐рж▓рзНржбрзЗ ржлрзЛржХрж╛рж╕ ржХрж░рзБржи {/*focus-a-field-conditionally*/}

ржПржЗ ржлрж░рзНржоржЯрж┐ ржжрзБржЯрж┐ `<MyInput />` ржХржорзНржкрзЛржирзЗржирзНржЯ рж░рзЗржирзНржбрж╛рж░ ржХрж░рзЗред

"Show form" ржЪрж╛ржкрзБржи ржПржмржВ рж▓ржХрзНрж╖рзНржп ржХрж░рзБржи ржпрзЗ ржжрзНржмрж┐рждрзАржпрж╝ ржлрж┐рж▓рзНржбржЯрж┐ ржЕржЯрзЛржорзНржпрж╛ржЯрж┐ржХржнрж╛ржмрзЗ ржлрзЛржХрж╛рж╕ ржкрж╛ржЪрзНржЫрзЗред ржПржЯрж╛ ржШржЯрж╛рж░ ржХрж╛рж░ржг ржЙржнржпрж╝ `<MyInput />` ржХржорзНржкрзЛржирзЗржирзНржЯржЗ ржирж┐ржЬрзЗржжрзЗрж░ ржлрж┐рж▓рзНржбрзЗ ржлрзЛржХрж╛рж╕ ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзЗред ржпржЦржи ржЖржкржирж┐ ржкрж░ржкрж░ ржжрзБржЯрж┐ ржЗржиржкрзБржЯ ржлрж┐рж▓рзНржбрзЗрж░ ржЬржирзНржп `focus()` ржХрж▓ ржХрж░рзЗржи, рж╢рзЗрж╖рзЗрж░ржЯрж┐ рж╕ржмрж╕ржоржпрж╝ "ржЬрж┐рждрзЗ" ржпрж╛ржпрж╝ред

ржзрж░рзБржи ржЖржкржирж┐ ржкрзНрж░ржержо ржлрж┐рж▓рзНржбржЯрж┐ржХрзЗ ржлрзЛржХрж╛рж╕ ржХрж░рждрзЗ ржЪрж╛ржиред ржкрзНрж░ржержо `MyInput` ржХржорзНржкрзЛржирзЗржирзНржЯржЯрж┐ ржПржЦржи ржПржХржЯрж┐ ржмрзБрж▓рж┐ржпрж╝рж╛ржи `shouldFocus` ржкрзНрж░ржк ржкрж╛ржпрж╝ ржпрж╛ `true` рж╕рзЗржЯ ржХрж░рж╛ ржЖржЫрзЗред рж▓ржЬрж┐ржХрзЗ ржПржоржи ржкрж░рж┐ржмрж░рзНрждржи ржЖржирзБржи ржпрж╛рждрзЗ `focus()` ржХрзЗржмрж▓ рждржЦржиржЗ ржХрж▓ ржХрж░рж╛ рж╣ржпрж╝ ржпржЦржи `MyInput` ржП ржкрж╛рж╕ ржХрж░рж╛ `shouldFocus` ржкрзНрж░ржкржЯрж┐ `true` рж╣ржпрж╝ред

<Sandpack>

```js src/MyInput.js active
import { useEffect, useRef } from 'react';

export default function MyInput({ shouldFocus, value, onChange }) {
  const ref = useRef(null);

  // TODO: call focus() only if shouldFocus is true.
  useEffect(() => {
    ref.current.focus();
  }, []);

  return (
    <input
      ref={ref}
      value={value}
      onChange={onChange}
    />
  );
}
```

```js src/App.js hidden
import { useState } from 'react';
import MyInput from './MyInput.js';

export default function Form() {
  const [show, setShow] = useState(false);
  const [firstName, setFirstName] = useState('Taylor');
  const [lastName, setLastName] = useState('Swift');
  const [upper, setUpper] = useState(false);
  const name = firstName + ' ' + lastName;
  return (
    <>
      <button onClick={() => setShow(s => !s)}>{show ? 'Hide' : 'Show'} form</button>
      <br />
      <hr />
      {show && (
        <>
          <label>
            Enter your first name:
            <MyInput
              value={firstName}
              onChange={e => setFirstName(e.target.value)}
              shouldFocus={true}
            />
          </label>
          <label>
            Enter your last name:
            <MyInput
              value={lastName}
              onChange={e => setLastName(e.target.value)}
              shouldFocus={false}
            />
          </label>
          <p>Hello, <b>{upper ? name.toUpperCase() : name}</b></p>
        </>
      )}
    </>
  );
}
```

```css
label {
  display: block;
  margin-top: 20px;
  margin-bottom: 20px;
}

body {
  min-height: 150px;
}
```

</Sandpack>

ржЖржкржирж╛рж░ рж╕ржорж╛ржзрж╛ржи ржпрж╛ржЪрж╛ржЗ ржХрж░рждрзЗ, ржмрж╛рж░ржмрж╛рж░ "Show form" ржПржмржВ "Hide form" ржмрж╛ржЯржирзЗ ржЪрж╛ржк ржжрж┐ржиред ржлрж░рзНржоржЯрж┐ ржкрзНрж░ржжрж░рзНрж╢рж┐ржд рж╣рж▓рзЗ, ржХрзЗржмрж▓ *ржкрзНрж░ржержо* ржЗржиржкрзБржЯржЯрж┐ ржлрзЛржХрж╛рж╕ ржкрж╛ржУржпрж╝рж╛рж░ ржХржерж╛ред ржПрж░ ржХрж╛рж░ржг ржкрзНржпрж╛рж░рзЗржирзНржЯ ржХржорзНржкрзЛржирзЗржирзНржЯ ржкрзНрж░ржержо ржЗржиржкрзБржЯржЯрж┐ржХрзЗ `shouldFocus={true}` ржПржмржВ ржжрзНржмрж┐рждрзАржпрж╝ ржЗржиржкрзБржЯржЯрж┐ржХрзЗ `shouldFocus={false}` ржжрж┐ржпрж╝рзЗ рж░рзЗржирзНржбрж╛рж░ ржХрж░рзЗред ржПржЫрж╛ржбрж╝рж╛ржУ ржЪрзЗржХ ржХрж░рзБржи ржпрзЗ ржЙржнржпрж╝ ржЗржиржкрзБржЯржЗ ржПржЦржиржУ ржХрж╛ржЬ ржХрж░ржЫрзЗ ржПржмржВ ржЖржкржирж┐ ржЙржнржпрж╝ржЯрж┐рждрзЗржЗ ржЯрж╛ржЗржк ржХрж░рждрзЗ ржкрж╛рж░ржЫрзЗржиред

<Hint>

ржЖржкржирж┐ ржХржирзНржбрж┐рж╢ржирж╛рж▓рж┐ ржПржХржЯрж┐ Effect ржбрж┐ржХрзНрж▓рзЗрзЯрж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи ржирж╛, ржХрж┐ржирзНрждрзБ ржЖржкржирж╛рж░ Effect-ржПрж░ ржоржзрзНржпрзЗ ржХржирзНржбрж┐рж╢ржирж╛рж▓ рж▓ржЬрж┐ржХ рж░рж╛ржЦрждрзЗ ржкрж╛рж░рзЗржиред

</Hint>

<Solution>

ржХржирзНржбрж┐рж╢ржирж╛рж▓ рж▓ржЬрж┐ржХржЯрж┐ Effect-ржПрж░ ржнрж┐рждрж░рзЗ рж░рж╛ржЦрзБржиред ржЖржкржирж╛ржХрзЗ `shouldFocus` ржХрзЗ ржПржХржЯрж┐ ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ рж╣рж┐рж╕рзЗржмрзЗ ржЙрж▓рзНрж▓рзЗржЦ ржХрж░рждрзЗ рж╣ржмрзЗ ржХрж╛рж░ржг ржЖржкржирж┐ ржПржЯрж┐ Effect-ржПрж░ ржнрж┐рждрж░рзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржЫрзЗржиред (ржПрж░ ржорж╛ржирзЗ рж╣рж▓ ржпрзЗ ржпржжрж┐ ржХрзЛржирзЛ ржЗржиржкрзБржЯрзЗрж░ `shouldFocus` `false` ржерзЗржХрзЗ `true` рждрзЗ ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣ржпрж╝, рждрж╛рж╣рж▓рзЗ ржПржЯрж┐ ржорж╛ржЙржирзНржЯрзЗрж░ ржкрж░рзЗ ржлрзЛржХрж╛рж╕ ржкрж╛ржмрзЗред)

<Sandpack>

```js src/MyInput.js active
import { useEffect, useRef } from 'react';

export default function MyInput({ shouldFocus, value, onChange }) {
  const ref = useRef(null);

  useEffect(() => {
    if (shouldFocus) {
      ref.current.focus();
    }
  }, [shouldFocus]);

  return (
    <input
      ref={ref}
      value={value}
      onChange={onChange}
    />
  );
}
```

```js src/App.js hidden
import { useState } from 'react';
import MyInput from './MyInput.js';

export default function Form() {
  const [show, setShow] = useState(false);
  const [firstName, setFirstName] = useState('Taylor');
  const [lastName, setLastName] = useState('Swift');
  const [upper, setUpper] = useState(false);
  const name = firstName + ' ' + lastName;
  return (
    <>
      <button onClick={() => setShow(s => !s)}>{show ? 'Hide' : 'Show'} form</button>
      <br />
      <hr />
      {show && (
        <>
          <label>
            Enter your first name:
            <MyInput
              value={firstName}
              onChange={e => setFirstName(e.target.value)}
              shouldFocus={true}
            />
          </label>
          <label>
            Enter your last name:
            <MyInput
              value={lastName}
              onChange={e => setLastName(e.target.value)}
              shouldFocus={false}
            />
          </label>
          <p>Hello, <b>{upper ? name.toUpperCase() : name}</b></p>
        </>
      )}
    </>
  );
}
```

```css
label {
  display: block;
  margin-top: 20px;
  margin-bottom: 20px;
}

body {
  min-height: 150px;
}
```

</Sandpack>

</Solution>

#### ржПржХржЯрж┐ interval ржлрж┐ржХрзНрж╕ ржХрж░рзБржи ржпрзЗржЯрж┐ ржжрзБржЗржмрж╛рж░ ржлрж╛рзЯрж╛рж░ ржХрж░рзЗ {/*fix-an-interval-that-fires-twice*/}

ржПржЗ `Counter` ржХржорзНржкрзЛржирзЗржирзНржЯржЯрж┐ ржПржХржЯрж┐ ржХрж╛ржЙржирзНржЯрж╛рж░ ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рзЗ ржпрж╛ ржкрзНрж░рждрж┐ рж╕рзЗржХрзЗржирзНржбрзЗ ржмрзГржжрзНржзрж┐ ржкрж╛ржУржпрж╝рж╛рж░ ржХржерж╛ред ржорж╛ржЙржирзНржЯ рж╣ржУржпрж╝рж╛рж░ рж╕ржоржпрж╝, ржПржЯрж┐ [`setInterval`](https://developer.mozilla.org/en-US/docs/Web/API/setInterval) ржХрж▓ ржХрж░рзЗред ржПржЯрж┐ ржкрзНрж░рждрж┐ рж╕рзЗржХрзЗржирзНржбрзЗ `onTick` ржЪрж╛рж▓рж╛ржпрж╝ред `onTick` ржлрж╛ржВрж╢ржиржЯрж┐ ржХрж╛ржЙржирзНржЯрж╛рж░ржХрзЗ ржмрж╛ржбрж╝рж╛ржпрж╝ред

рждржмрзЗ, ржкрзНрж░рждрж┐ рж╕рзЗржХрзЗржирзНржбрзЗ ржПржХржмрж╛рж░ ржмрж╛ржбрж╝рж╛ржирзЛрж░ ржкрж░рж┐ржмрж░рзНрждрзЗ, ржПржЯрж┐ ржжрзБржЗржмрж╛рж░ ржмрж╛ржбрж╝ржЫрзЗред ржХрзЗржи ржПржоржи рж╣ржЪрзНржЫрзЗ? ржмрж╛ржЧржЯрж┐рж░ ржХрж╛рж░ржг ржЦрзБржБржЬрзЗ ржмрзЗрж░ ржХрж░рзБржи ржПржмржВ ржПржЯрж┐ ржарж┐ржХ ржХрж░рзБржиред

<Hint>

ржоржирзЗ рж░рж╛ржЦржмрзЗржи ржпрзЗ `setInterval` ржПржХржЯрж┐ ржЗржирзНржЯрж╛рж░ржнрж╛рж▓ ржЖржЗржбрж┐ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ, ржпрж╛ ржЖржкржирж┐ [`clearInterval`](https://developer.mozilla.org/en-US/docs/Web/API/clearInterval) ржП ржкрж╛рж╕ ржХрж░рзЗ ржЗржирзНржЯрж╛рж░ржнрж╛рж▓ ржмржирзНржз ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред

</Hint>

<Sandpack>

```js src/Counter.js active
import { useState, useEffect } from 'react';

export default function Counter() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    function onTick() {
      setCount(c => c + 1);
    }

    setInterval(onTick, 1000);
  }, []);

  return <h1>{count}</h1>;
}
```

```js src/App.js hidden
import { useState } from 'react';
import Counter from './Counter.js';

export default function Form() {
  const [show, setShow] = useState(false);
  return (
    <>
      <button onClick={() => setShow(s => !s)}>{show ? 'Hide' : 'Show'} counter</button>
      <br />
      <hr />
      {show && <Counter />}
    </>
  );
}
```

```css
label {
  display: block;
  margin-top: 20px;
  margin-bottom: 20px;
}

body {
  min-height: 150px;
}
```

</Sandpack>

<Solution>

ржпржЦржи [рж╕рзНржЯрзНрж░рж┐ржХрзНржЯ ржорзЛржб](/reference/react/StrictMode) ржЪрж╛рж▓рзБ ржерж╛ржХрзЗ (ржпрзЗржоржи ржПржЗ рж╕рж╛ржЗржЯрзЗрж░ рж╕рзНржпрж╛ржирзНржбржмржХрзНрж╕ржЧрзБрж▓рж┐рждрзЗ), React ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗ ржкрзНрж░рждрж┐ржЯрж┐ ржХржорзНржкрзЛржирзЗржирзНржЯржХрзЗ ржПржХржмрж╛рж░ рж░рж┐ржорж╛ржЙржирзНржЯ ржХрж░рзЗред ржПрж░ ржлрж▓рзЗ ржЗржирзНржЯрж╛рж░ржнрж╛рж▓ржЯрж┐ ржжрзБржЗржмрж╛рж░ рж╕рзЗржЯ ржЖржк рж╣ржпрж╝, ржПржмржВ ржПржЗ ржХрж╛рж░ржгрзЗ ржкрзНрж░рждрж┐ рж╕рзЗржХрзЗржирзНржбрзЗ ржХрж╛ржЙржирзНржЯрж╛рж░ ржжрзБржЗржмрж╛рж░ ржмрж╛ржбрж╝рзЗред

рждржмрзЗ, React-ржПрж░ ржПржЗ ржЖржЪрж░ржг ржмрж╛ржЧржЯрж┐рж░ *ржХрж╛рж░ржг* ржиржпрж╝: ржмрж╛ржЧржЯрж┐ ржЗрждрж┐ржоржзрзНржпрзЗржЗ ржХрзЛржбрзЗ ржмрж┐ржжрзНржпржорж╛ржиред React-ржПрж░ ржЖржЪрж░ржг ржмрж╛ржЧржЯрж┐ржХрзЗ ржЖрж░ржУ ржмрзЗрж╢рж┐ ржЪрзЛржЦрзЗ ржкрзЬрж╛рж░ ржорждрзЛ ржХрж░рзЗ рждрзЛрж▓рзЗред ржЖрж╕рж▓ ржХрж╛рж░ржг рж╣рж▓ ржпрзЗ ржПржЗ Effect-ржЯрж┐ ржПржХржЯрж┐ process рж╢рзБрж░рзБ ржХрж░рзЗ ржХрж┐ржирзНрждрзБ ржПржЯрж┐ ржХрзНрж▓рж┐ржи-ржЖржк ржХрж░рж╛рж░ ржХрзЛржирзЛ ржЙржкрж╛ржпрж╝ ржкрзНрж░ржжрж╛ржи ржХрж░рзЗ ржирж╛ред

ржПржЗ ржХрзЛржбржЯрж┐ ржлрж┐ржХрзНрж╕ ржХрж░рждрзЗ, `setInterval` ржжрзНржмрж╛рж░рж╛ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рж╛ interval ID рж╕рзНржЯрзЛрж░ ржХрж░рзБржи, ржПржмржВ [`clearInterval`](https://developer.mozilla.org/en-US/docs/Web/API/clearInterval) ржжрж┐ржпрж╝рзЗ ржПржХржЯрж┐ ржХрзНрж▓рж┐ржиржЖржк ржлрж╛ржВрж╢ржи ржЗржоржкрзНрж▓рзЗржорзЗржирзНржЯ ржХрж░рзБржиржГ

<Sandpack>

```js src/Counter.js active
import { useState, useEffect } from 'react';

export default function Counter() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    function onTick() {
      setCount(c => c + 1);
    }

    const intervalId = setInterval(onTick, 1000);
    return () => clearInterval(intervalId);
  }, []);

  return <h1>{count}</h1>;
}
```

```js src/App.js hidden
import { useState } from 'react';
import Counter from './Counter.js';

export default function App() {
  const [show, setShow] = useState(false);
  return (
    <>
      <button onClick={() => setShow(s => !s)}>{show ? 'Hide' : 'Show'} counter</button>
      <br />
      <hr />
      {show && <Counter />}
    </>
  );
}
```

```css
label {
  display: block;
  margin-top: 20px;
  margin-bottom: 20px;
}

body {
  min-height: 150px;
}
```

</Sandpack>

ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗ, React ржПржЦржиржУ ржЖржкржирж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯржЯрж┐ржХрзЗ ржПржХржмрж╛рж░ рж░рж┐ржорж╛ржЙржирзНржЯ ржХрж░ржмрзЗ ржПржЯрж╛ ржпрж╛ржЪрж╛ржЗ ржХрж░рждрзЗ ржпрзЗ ржЖржкржирж┐ ржХрзНрж▓рж┐ржиржЖржк ржнрж╛рж▓рзЛржнрж╛ржмрзЗ ржЗржоржкрзНрж▓рзЗржорзЗржирзНржЯ ржХрж░рзЗржЫрзЗржи ржХрж┐ржирж╛ред рждрж╛ржЗ ржПржХржЯрж┐ `setInterval` ржХрж▓ рж╣ржмрзЗ, рждрж╛рж░ржкрж░ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ `clearInterval`, ржПржмржВ ржЖржмрж╛рж░ `setInterval`ред ржкрзНрж░рзЛржбрж╛ржХрж╢ржирзЗ, ржХрзЗржмрж▓ ржПржХржЯрж┐ `setInterval` ржХрж▓ рж╣ржмрзЗред ржЙржнржпрж╝ ржХрзНрж╖рзЗрждрзНрж░рзЗржЗ ржЗржЙржЬрж╛рж░рзЗрж░-ржХрж╛ржЫрзЗ-ржжрзГрж╢рзНржпржорж╛ржи ржЖржЪрж░ржг ржПржХржЗ ржерж╛ржХржмрзЗржГ ржХрж╛ржЙржирзНржЯрж╛рж░ ржкрзНрж░рждрж┐ рж╕рзЗржХрзЗржирзНржбрзЗ ржПржХржмрж╛рж░ ржмрж╛рзЬржмрзЗред

</Solution>

#### ржПржХржЯрж┐ Effect-ржПрж░ ржоржзрзНржпрзЗ fetching ржлрж┐ржХрзНрж╕ ржХрж░рзБржи {/*fix-fetching-inside-an-effect*/}

ржПржЗ ржХржорзНржкрзЛржирзЗржирзНржЯржЯрж┐ рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рж╛ ржмрзНржпржХрзНрждрж┐рж░ bio ржжрзЗржЦрж╛ржпрж╝ред ржПржЯрж┐ ржорж╛ржЙржирзНржЯрзЗрж░ рж╕ржоржпрж╝ ржПржмржВ ржпржЦржиржЗ `person` ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣ржпрж╝ рждржЦржи `fetchBio(person)` ржирж╛ржоржХ ржПржХржЯрж┐ ржЕрзНржпрж╛рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛рж╕ ржлрж╛ржВрж╢ржи ржХрж▓ ржХрж░рзЗ bio рж▓рзЛржб ржХрж░рзЗред рж╕рзЗржЗ ржЕрзНржпрж╛рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛рж╕ ржлрж╛ржВрж╢ржиржЯрж┐ ржПржХржЯрж┐ [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise) рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ ржпрж╛ рж╢рзЗрж╖ ржкрж░рзНржпржирзНржд ржПржХржЯрж┐ рж╕рзНржЯрзНрж░рж┐ржВ-ржП resolve рж╣ржпрж╝ред ржлрзЗржЪрж┐ржВ рж╢рзЗрж╖ рж╣рж▓рзЗ, ржПржЯрж┐ `setBio` ржХрж▓ ржХрж░рзЗ рж╕рзЗржЗ рж╕рзНржЯрзНрж░рж┐ржВржЯрж┐ рж╕рж┐рж▓рзЗржХрзНржЯ ржмржХрзНрж╕рзЗрж░ ржирж┐ржЪрзЗ ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рзЗред

<Sandpack>

```js src/App.js
import { useState, useEffect } from 'react';
import { fetchBio } from './api.js';

export default function Page() {
  const [person, setPerson] = useState('Alice');
  const [bio, setBio] = useState(null);

  useEffect(() => {
    setBio(null);
    fetchBio(person).then(result => {
      setBio(result);
    });
  }, [person]);

  return (
    <>
      <select value={person} onChange={e => {
        setPerson(e.target.value);
      }}>
        <option value="Alice">Alice</option>
        <option value="Bob">Bob</option>
        <option value="Taylor">Taylor</option>
      </select>
      <hr />
      <p><i>{bio ?? 'Loading...'}</i></p>
    </>
  );
}
```

```js src/api.js hidden
export async function fetchBio(person) {
  const delay = person === 'Bob' ? 2000 : 200;
  return new Promise(resolve => {
    setTimeout(() => {
      resolve('This is ' + person + 'тАЩs bio.');
    }, delay);
  })
}

```

</Sandpack>


ржПржЗ ржХрзЛржбрзЗ ржПржХржЯрж┐ ржмрж╛ржЧ ржЖржЫрзЗред ржкрзНрж░ржержорзЗ "Alice" рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзБржиред рждрж╛рж░ржкрж░ "Bob" рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзБржи ржПржмржВ рждрж╛рж░ ржкрж░ржкрж░ржЗ "Taylor" рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзБржиред ржЖржкржирж┐ ржпржжрж┐ ржПржЯрж╛ ржжрзНрж░рзБржд ржХрж░рзЗржи, рждрж╛рж╣рж▓рзЗ ржЖржкржирж┐ ржмрж╛ржЧржЯрж┐ рж▓ржХрзНрж╖рзНржп ржХрж░ржмрзЗржиржГ Taylor рж╕рж┐рж▓рзЗржХрзНржЯрзЗржб рж╣ржпрж╝рзЗржЫрзЗ, ржХрж┐ржирзНрждрзБ ржирж┐ржЪрзЗрж░ paragraph-ржП рж▓рзЗржЦрж╛ ржЖржЫрзЗ "This is Bob's bio."

ржПржЯрж╛ ржХрзЗржирзЛ рж╣ржЪрзНржЫрзЗ? Effect-ржПрж░ ржоржзрзНржпрзЗрж░ ржмрж╛ржЧржЯрж┐ ржлрж┐ржХрзНрж╕ ржХрж░рзБржиред

<Hint>

ржпржжрж┐ ржПржХржЯрж┐ Effect ржХрж┐ржЫрзБ ржЕрзНржпрж╛рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛рж╕ржнрж╛ржмрзЗ ржлрзЗржЪ ржХрж░рзЗ, рждрж╛рж╣рж▓рзЗ рж╕рж╛ржзрж╛рж░ржгржд ржПржЯрж┐рж░ ржХрзНрж▓рж┐ржиржЖржкрзЗрж░ ржкрзНрж░ржпрж╝рзЛржЬржи рж╣ржпрж╝ред

</Hint>

<Solution>

ржмрж╛ржЧржЯрж┐ ржЯрзНрж░рж┐ржЧрж╛рж░ ржХрж░рждрзЗ, ржЬрж┐ржирж┐рж╕ржЧрзБрж▓рзЛ ржПржЗ ржХрзНрж░ржорзЗ ржШржЯрждрзЗ рж╣ржмрзЗ:

- `'Bob'` рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рж╛ `fetchBio('Bob')` ржЯрзНрж░рж┐ржЧрж╛рж░ ржХрж░рзЗ
- `'Taylor'` рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рж╛ `fetchBio('Taylor')` ржЯрзНрж░рж┐ржЧрж╛рж░ ржХрж░рзЗ
- **`'Taylor'` ржлрзЗржЪ ржХрж░рж╛ `'Bob'` ржлрзЗржЪ ржХрж░рж╛рж░ *ржЖржЧрзЗ* рж╕ржорзНржкржирзНржи рж╣ржпрж╝**
- `'Taylor'` рж░рзЗржирзНржбрж╛рж░рзЗрж░ Effect `setBio('This is Taylor's bio')` ржХрж▓ ржХрж░рзЗ
- `'Bob'` ржлрзЗржЪ ржХрж░рж╛ рж╕ржорзНржкржирзНржи рж╣ржпрж╝
- `'Bob'` рж░рзЗржирзНржбрж╛рж░рзЗрж░ Effect `setBio('This is Bob's bio')` ржХрж▓ ржХрж░рзЗ

ржПржЗ ржХрж╛рж░ржгрзЗржЗ ржЖржкржирж┐ Taylor ржирж┐рж░рзНржмрж╛ржЪрж┐ржд ржерж╛ржХрж╛ рж╕рждрзНрждрзНржмрзЗржУ Bob-ржПрж░ bio ржжрзЗржЦржЫрзЗржиред ржПржЗ ржзрж░ржирзЗрж░ ржмрж╛ржЧржЧрзБрж▓рзЛржХрзЗ [race condition](https://en.wikipedia.org/wiki/Race_condition) ржмрж▓рж╛ рж╣ржпрж╝ ржХрж╛рж░ржг ржжрзБржЯрж┐ ржЕрзНржпрж╛рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛рж╕ ржЕржкрж╛рж░рзЗрж╢ржи ржПржХрзЗ ржЕржкрж░рзЗрж░ рж╕рж╛ржерзЗ "race" (ржкрзНрж░рждрж┐ржпрзЛржЧрж┐рждрж╛) ржХрж░ржЫрзЗ, ржПржмржВ рждрж╛рж░рж╛ ржЕржкрзНрж░рждрзНржпрж╛рж╢рж┐ржд ржХрзНрж░ржорзЗ рж╕ржорзНржкржирзНржи рж╣рждрзЗ ржкрж╛рж░рзЗред

ржПржЗ рж░рзЗрж╕ ржХржирзНржбрж┐рж╢ржи ржлрж┐ржХрзНрж╕ ржХрж░рждрзЗ, ржПржХржЯрж┐ ржХрзНрж▓рж┐ржиржЖржк ржлрж╛ржВрж╢ржи ржпрзЛржЧ ржХрж░рзБржиржГ

<Sandpack>

```js src/App.js
import { useState, useEffect } from 'react';
import { fetchBio } from './api.js';

export default function Page() {
  const [person, setPerson] = useState('Alice');
  const [bio, setBio] = useState(null);
  useEffect(() => {
    let ignore = false;
    setBio(null);
    fetchBio(person).then(result => {
      if (!ignore) {
        setBio(result);
      }
    });
    return () => {
      ignore = true;
    }
  }, [person]);

  return (
    <>
      <select value={person} onChange={e => {
        setPerson(e.target.value);
      }}>
        <option value="Alice">Alice</option>
        <option value="Bob">Bob</option>
        <option value="Taylor">Taylor</option>
      </select>
      <hr />
      <p><i>{bio ?? 'Loading...'}</i></p>
    </>
  );
}
```

```js src/api.js hidden
export async function fetchBio(person) {
  const delay = person === 'Bob' ? 2000 : 200;
  return new Promise(resolve => {
    setTimeout(() => {
      resolve('This is ' + person + 'тАЩs bio.');
    }, delay);
  })
}

```

</Sandpack>

ржкрзНрж░рждрж┐ржЯрж┐ рж░рзЗржирзНржбрж╛рж░рзЗрж░ Effect-ржПрж░ ржирж┐ржЬрж╕рзНржм `ignore` ржнрзНржпрж╛рж░рж┐ржпрж╝рзЗржмрж▓ ржЖржЫрзЗред ржкрзНрж░рж╛ржержорж┐ржХржнрж╛ржмрзЗ, `ignore` ржнрзНржпрж╛рж░рж┐ржпрж╝рзЗржмрж▓ржЯрж┐ `false` рж╕рзЗржЯ ржХрж░рж╛ рж╣ржпрж╝ред рждржмрзЗ, ржпржжрж┐ ржПржХржЯрж┐ Effect ржХрзНрж▓рж┐ржи ржЖржк ржХрж░рж╛ рж╣ржпрж╝ (ржпрзЗржоржи ржпржЦржи ржЖржкржирж┐ ржПржХржЯрж┐ ржнрж┐ржирзНржи ржмрзНржпржХрзНрждрж┐ рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзЗржи), рждрж╛рж░ `ignore` ржнрзНржпрж╛рж░рж┐ржпрж╝рзЗржмрж▓ `true` рж╣ржпрж╝рзЗ ржпрж╛ржпрж╝ред рждрж╛ржЗ ржПржЦржи рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯржЧрзБрж▓рзЛ ржХрзЛржи ржХрзНрж░ржорзЗ рж╕ржорзНржкржирзНржи рж╣ржпрж╝ рждрж╛рждрзЗ ржХрж┐ржЫрзБ ржпрж╛рзЯ ржЖрж╕рзЗ ржирж╛ред рж╢рзБржзрзБржорж╛рждрзНрж░ рж╢рзЗрж╖ ржмрзНржпржХрзНрждрж┐рж░ Effect-ржПрж░ `ignore`-ржЗ `false` рж╕рзЗржЯ ржерж╛ржХржмрзЗ, рждрж╛ржЗ ржПржЯрж┐ `setBio(result)` ржХрж▓ ржХрж░ржмрзЗред ржкрзВрж░рзНржмржмрж░рзНрждрзА Effect-ржЧрзБрж▓рзЛ ржЗрждрж┐ржоржзрзНржпрзЗ ржХрзНрж▓рж┐ржи ржЖржк ржХрж░рж╛ рж╣ржпрж╝рзЗ ржЧрзЗржЫрзЗ, рждрж╛ржЗ `if (!ignore)` ржЪрзЗржХ рж╕рзЗржЧрзБрж▓рзЛржХрзЗ `setBio` ржХрж▓ ржХрж░рж╛ ржерзЗржХрзЗ ржкрзНрж░рждрж┐рж░рзЛржз ржХрж░ржмрзЗржГ

- `'Bob'` рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рж╛ `fetchBio('Bob')` ржЯрзНрж░рж┐ржЧрж╛рж░ ржХрж░рзЗ
- `'Taylor'` рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рж╛ `fetchBio('Taylor')` ржЯрзНрж░рж┐ржЧрж╛рж░ ржХрж░рзЗ **ржПржмржВ ржкрзВрж░рзНржмржмрж░рзНрждрзА (Bob-ржПрж░) Effect ржХрзНрж▓рж┐ржи ржЖржк ржХрж░рзЗ**
- `'Taylor'` ржлрзЗржЪ ржХрж░рж╛ `'Bob'` ржлрзЗржЪ ржХрж░рж╛рж░ *ржЖржЧрзЗ* рж╕ржорзНржкржирзНржи рж╣ржпрж╝
- `'Taylor'` рж░рзЗржирзНржбрж╛рж░рзЗрж░ Effect `setBio('This is Taylor's bio')` ржХрж▓ ржХрж░рзЗ
- `'Bob'` ржлрзЗржЪ ржХрж░рж╛ рж╕ржорзНржкржирзНржи рж╣ржпрж╝
- `'Bob'` рж░рзЗржирзНржбрж╛рж░рзЗрж░ Effect **ржХрж┐ржЫрзБржЗ ржХрж░рзЗ ржирж╛ ржХрж╛рж░ржг ржПрж░ `ignore` ржлрзНрж▓рзНржпрж╛ржЧ `true` рж╕рзЗржЯ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрж┐рж▓**

ржЖржЙржЯржбрзЗржЯрзЗржб API ржХрж▓рзЗрж░ ржлрж▓рж╛ржлрж▓ ignore ржХрж░рж╛рж░ ржкрж╛рж╢рж╛ржкрж╛рж╢рж┐, ржЖржкржирж┐ [`AbortController`](https://developer.mozilla.org/en-US/docs/Web/API/AbortController) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржпрзЗрж╕ржм рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯрзЗрж░ ржЖрж░ ржкрзНрж░ржпрж╝рзЛржЬржи ржирзЗржЗ рж╕рзЗржЧрзБрж▓рзЛ ржмрж╛рждрж┐рж▓ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред рждржмрзЗ, рж╢рзБржзрзБржорж╛рждрзНрж░ ржПржЯрж╛ржЗ рж░рзЗрж╕ ржХржирзНржбрж┐рж╢ржи ржерзЗржХрзЗ рж░ржХрзНрж╖рж╛ ржХрж░рж╛рж░ ржЬржирзНржп ржпржерзЗрж╖рзНржЯ ржиржпрж╝ред ржлрзЗржЪрзЗрж░ ржкрж░рзЗ ржЖрж░ржУ ржЕрзНржпрж╛рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛рж╕ ржзрж╛ржк ржпрзБржХрзНржд рж╣рждрзЗ ржкрж╛рж░рзЗ, рждрж╛ржЗ `ignore` ржПрж░ ржорждрзЛ ржПржХржЯрж┐ рж╕рзНржкрж╖рзНржЯ ржлрзНрж▓рзНржпрж╛ржЧ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржПржЗ ржзрж░ржирзЗрж░ рж╕ржорж╕рзНржпрж╛ рж╕ржорж╛ржзрж╛ржирзЗрж░ рж╕ржмржЪрзЗржпрж╝рзЗ ржирж┐рж░рзНржнрж░ржпрзЛржЧрзНржп ржЙржкрж╛ржпрж╝ред

</Solution>

</Challenges>


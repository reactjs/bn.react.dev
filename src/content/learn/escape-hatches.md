---
title: Escape Hatches
---

<Intro>

ржЖржкржирж╛рж░ ржХрж┐ржЫрзБ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ рж╕ржорзНржнржмржд React ржПрж░ ржмрж╛ржЗрж░рзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржоржЧрзБрж▓рж┐рж░ рж╕рж╛ржерзЗ ржирж┐ржпрж╝ржирзНрждрзНрж░ржг ржПржмржВ рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛ржЗржЬ ржХрж░рж╛рж░ ржкрзНрж░ржпрж╝рзЛржЬржи рж╣рждрзЗ ржкрж╛рж░рзЗред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржЖржкржирж╛рж░ ржмрзНрж░рж╛ржЙржЬрж╛рж░ API ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржХржЯрж┐ ржЗржиржкрзБржЯрзЗ ржлрзЛржХрж╛рж╕ ржХрж░рж╛ рж▓рж╛ржЧрждрзЗ ржкрж╛рж░рзЗ, React ржмрзНржпржмрж╣рж╛рж░ ржирж╛ ржХрж░рзЗ ржмрж╛ржирж╛ржирзЛ ржПржХржЯрж┐ ржнрж┐ржбрж┐ржУ ржкрзНрж▓рзЗржпрж╝рж╛рж░ ржЪрж╛рж▓рзБ ржПржмржВ ржмржирзНржз ржХрж░рждрзЗ рж╣рждрзЗ ржкрж╛рж░рзЗ, ржЕржержмрж╛ ржПржХржЯрж┐ рж░рж┐ржорзЛржЯ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзБржХрзНржд рж╣рзЯрзЗ message listen ржХрж░рждрзЗ рж╣рждрзЗ ржкрж╛рж░рзЗред ржПржЗ ржЕржзрзНржпрж╛ржпрж╝рзЗ, ржЖржкржирж┐ рж╢рж┐ржЦржмрзЗржи ржпрзЗ escape hatch ржЖржкржирж╛ржХрзЗ React ржерзЗржХрзЗ "ржмрж╛ржЗрж░рзЗ ржкржжржХрзНрж╖рзЗржк" ржирж┐рждрзЗ ржПржмржВ ржмрж╛ржЗрж░рзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржоржЧрзБрж▓рж┐рж░ рж╕рж╛ржерзЗ рж╕ржВржпрзЛржЧ ржХрж░рждрзЗ ржжрзЗрзЯред ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржирзЗрж░ ржЕржзрж┐ржХрж╛ржВрж╢ ржпрзБржХрзНрждрж┐ ржПржмржВ ржбрж╛ржЯрж╛ ржлрзНрж▓рзЛ ржПржЗ ржлрж┐ржЪрж╛рж░ржЧрзБрж▓рж┐рж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рж╛ ржЙржЪрж┐ржд ржиржпрж╝ред

</Intro>

<YouWillLearn isChapter={true}>

* [ржХрзАржнрж╛ржмрзЗ re-render ржирж╛ ржХрж░рзЗ рждржерзНржп "ржоржирзЗ рж░рж╛ржЦржмрзЗржи"](/learn/referencing-values-with-refs)
* [ржХрзАржнрж╛ржмрзЗ React ржПрж░ ржкрж░рж┐ржЪрж╛рж▓рж┐ржд DOM ржПрж▓рж┐ржорзЗржирзНржЯрзЗ ржврзБржХржмрзЗржи](/learn/manipulating-the-dom-with-refs)
* [ржХрзАржнрж╛ржмрзЗ ржмрж╛ржЗрж░рзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ рж╕рж╛ржерзЗ рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛ржЗржЬ ржХрж░ржмрзЗржи](/learn/synchronizing-with-effects)
* [ржХрзАржнрж╛ржмрзЗ ржХржорзНржкрзЛржирзЗржирзНржЯ ржерзЗржХрзЗ ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ Effect рж╕рж░рж┐рзЯрзЗ ржлрзЗрж▓ржмрзЗржи](/learn/you-might-not-need-an-effect)
* [ржХрзАржнрж╛ржмрзЗ ржПржХржЯрж┐ Effect ржПрж░ рж▓рж╛ржЗржл рж╕рж╛ржЗржХрзЗрж▓ ржПржХржЯрж┐ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ рж▓рж╛ржЗржл рж╕рж╛ржЗржХрзЗрж▓ ржерзЗржХрзЗ ржнрж┐ржирзНржи](/learn/lifecycle-of-reactive-effects)
* [ржХрзАржнрж╛ржмрзЗ ржХрж┐ржЫрзБ ржнрзНржпрж╛рж▓рзБржХрзЗ Effects re-triggering ржХрж░рж╛ ржерзЗржХрзЗ ржмрж┐рж░ржд рж░рж╛ржЦржмрзЗржи](/learn/separating-events-from-effects)
* [ржХрзАржнрж╛ржмрзЗ ржЖржкржирж╛рж░ Effect ржЧрзБрж▓рзЛрж░ re-run ржПрж░ рж╕ржВржЦрзНржпрж╛ ржХржорж╛ржмрзЗржи](/learn/removing-effect-dependencies)
* [ржХрзАржнрж╛ржмрзЗ ржПржХрж╛ржзрж┐ржХ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржоржзрзНржпрзЗ рж▓ржЬрж┐ржХ ржнрж╛ржЧрж╛ржнрж╛ржЧрж┐ ржХрж░рзЗ ржирзЗржмрзЗржи](/learn/reusing-logic-with-custom-hooks)

</YouWillLearn>

## ref ржПрж░ рж╕рж╛рж╣рж╛ржпрзНржпрзЗ value referencing {/*referencing-values-with-refs*/}

ржЖржкржирж┐ ржпржЦржи ржПржХржЯрж┐ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржХрж┐ржЫрзБ рждржерзНржп 'remember' ржХрж░рж╛рж░ ржЪрж╛рж╣рж┐ржжрж╛ ржЕржирзБржнржм ржХрж░рзЗржи, ржХрж┐ржирзНрждрзБ ржЖржкржирж┐ ржЪрж╛ржи ржирж╛ ржпрзЗ ржУржЗ рждржерзНржп [ржирждрзБржи рж░рзЗржирзНржбрж╛рж░ ржЪрж╛рж▓рзБ ржХрж░рзБржХ](/learn/render-and-commit), рждржЦржи ржЖржкржирж┐ *ref* ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи:

```js
const ref = useRef(0);
```

state ржПрж░ ржорждрзЛ, re-render ржПрж░ ржлрж╛ржБржХрзЗ ржлрж╛ржБржХрзЗ React ref ржЧрзБрж▓рзЛржХрзЗ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзЗред рждржмрзЗ, state рж╕рзЗржЯ ржХрж░рж▓рзЗ ржПржХржЯрж┐ ржХржорзНржкрзЛржирзЗржирзНржЯ re-render рж╣рзЯред ржПржХржЯрж┐ ref ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж▓рзЗ рждрж╛ рж╣рзЯ ржирж╛! ржЖржкржирж┐ `ref.current` ржкрзНрж░ржкрж╛рж░рзНржЯрж┐рж░ ржорж╛ржзрзНржпржорзЗ ржУржЗ ref ржПрж░ ржмрж░рзНрждржорж╛ржи ржорж╛ржи ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред

<Sandpack>

```js
import { useRef } from 'react';

export default function Counter() {
  let ref = useRef(0);

  function handleClick() {
    ref.current = ref.current + 1;
    alert('You clicked ' + ref.current + ' times!');
  }

  return (
    <button onClick={handleClick}>
      Click me!
    </button>
  );
}
```

</Sandpack>

ref рж╣рж▓ ржЖржкржирж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржПржоржи ржПржХржЯрж┐ ржЧрзЛржкржи ржкржХрзЗржЯ ржпрзЗржЯрж┐ React ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рзЗ ржирж╛ред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржЖржкржирж┐ [timeout IDs](https://developer.mozilla.org/en-US/docs/Web/API/setTimeout#return_value), [DOM ржПрж▓рж┐ржорзЗржирзНржЯ](https://developer.mozilla.org/en-US/docs/Web/API/Element), ржПржмржВ ржЕржирзНржпрж╛ржирзНржп ржЕржмржЬрзЗржХрзНржЯ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рж╛рж░ ржЬржирзНржп ref ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи, ржпрж╛ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ рж░рзЗржирзНржбрж╛рж░рж┐ржВ ржЖржЙржЯржкрзБржЯрзЗ ржкрзНрж░ржнрж╛ржм ржлрзЗрж▓рзЗ ржирж╛ред

<LearnMore path="/learn/referencing-values-with-refs">

рждржерзНржп ржоржирзЗ рж░рж╛ржЦрж╛рж░ ржЦрж╛рждрж┐рж░рзЗ ref ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╢рж┐ржЦрждрзЗ ржкрзЬрзБржи **[Referencing Values with Refs](/learn/referencing-values-with-refs)**ред

</LearnMore>

## ref ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ DOM ржПрж░ ржкрж░рж┐ржмрж░рзНрждржи {/*manipulating-the-dom-with-refs*/}

React рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ ржЖржкржирж╛рж░ рж░рзЗржирзНржбрж╛рж░ ржЖржЙржЯржкрзБржЯрзЗрж░ рж╕рж╛ржерзЗ ржорж┐рж▓рж┐ржпрж╝рзЗ DOM ржЖржкржбрзЗржЯ ржХрж░рзЗ, рждрж╛ржЗ ржЖржкржирж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯржЧрзБрж▓рзЛрж░ ржкрзНрж░рж╛ржпрж╝рж╢ржЗ ржПржЯрж┐ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж╛рж░ ржжрж░ржХрж╛рж░ рж╣ржпрж╝ ржирж╛ред рждржмрзЗ, ржорж╛ржЭрзЗ ржорж╛ржЭрзЗ ржЖржкржирж╛рж░ DOM ржПрж▓рж┐ржорзЗржирзНржЯржЧрзБрж▓рзЛрждрзЗ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржкрзНрж░ржпрж╝рзЛржЬржи рж╣рждрзЗ ржкрж╛рж░рзЗ ржпрж╛ React ржжрзНржмрж╛рж░рж╛ ржкрж░рж┐ржЪрж╛рж▓рж┐рждтАФржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржПржХржЯрж┐ ржирзЛржбрзЗ ржлрзЛржХрж╛рж╕ ржХрж░рж╛, ржПржЯрж┐рждрзЗ рж╕рзНржХрзНрж░рж▓ ржХрж░рж╛, ржЕржержмрж╛ ржПрж░ ржЖржХрж╛рж░ ржПржмржВ ржЕржмрж╕рзНржерж╛ржи ржорж╛ржкрж╛ред React ржП ржПрж░ржХржо ржХрж┐ржЫрзБ ржХрж░рж╛рж░ ржЬржирзНржп ржХрзЛржирзЛ ржмрж┐рж▓рзНржЯ-ржЗржи ржЙржкрж╛ржпрж╝ ржирзЗржЗ, рждрж╛ржЗ ржЖржкржирж╛рж░ DOM ржирзЛржбрзЗрж░ ржЬржирзНржп ржПржХржЯрж┐ ref ржкрзНрж░ржпрж╝рзЛржЬржи рж╣ржмрзЗред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржмрж╛ржЯржиржЯрж┐ ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ ржПржХржЯрж┐ ref ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЗржиржкрзБржЯрзЗ ржлрзЛржХрж╛рж╕ рж╣ржмрзЗ:

<Sandpack>

```js
import { useRef } from 'react';

export default function Form() {
  const inputRef = useRef(null);

  function handleClick() {
    inputRef.current.focus();
  }

  return (
    <>
      <input ref={inputRef} />
      <button onClick={handleClick}>
        Focus the input
      </button>
    </>
  );
}
```

</Sandpack>

<LearnMore path="/learn/manipulating-the-dom-with-refs">

React ржкрж░рж┐ржЪрж╛рж▓рж┐ржд DOM ржПрж▓рж┐ржорзЗржирзНржЯрзЗ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржирзЗржУрзЯрж╛ рж╢рж┐ржЦрждрзЗ ржкрзЬрзБржи **[Manipulating the DOM with Refs](/learn/manipulating-the-dom-with-refs)**ред

</LearnMore>

## Effect ржПрж░ рж╕рж╛ржерзЗ рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛ржЗржЬрзЗрж╕ржи {/*synchronizing-with-effects*/}

ржХрж┐ржЫрзБ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржмрж╛ржЗрж░рзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржоржЧрзБрж▓рзЛрж░ рж╕рж╛ржерзЗ рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛ржЗржЬ ржХрж░рж╛рж░ ржкрзНрж░ржпрж╝рзЛржЬржи рж╣рждрзЗ ржкрж╛рж░рзЗред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, рж╣рждрзЗ ржкрж╛рж░рзЗ ржЖржкржирж┐ React state ржПрж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ ржПржХржЯрж┐ non-React ржХржорзНржкрзЛржирзЗржирзНржЯ ржирж┐ржпрж╝ржирзНрждрзНрж░ржг ржХрж░рждрзЗ ржЪрж╛ржи, ржЕржержмрж╛ ржЪрж╛ржи ржПржХржЯрж┐ рж╕рж╛рж░рзНржнрж╛рж░ рж╕ржВржпрзЛржЧ рж╕рзЗржЯ ржЖржк ржХрж░рждрзЗ, ржЕржержмрж╛ ржПржХржЯрж┐ ржХржорзНржкрзЛржирзЗржирзНржЯ рж╕рзНржХрзНрж░рж┐ржирзЗ ржкрзНрж░ржжрж░рзНрж╢рж┐ржд рж╣рж▓рзЗ ржПржХржЯрж┐ ржПржирж╛рж▓рж┐ржЯрж┐ржХрзНрж╕ рж▓ржЧ ржкрж╛ржарж╛рждрзЗ ржЪрж╛ржЗрждрзЗ ржкрж╛рж░рзЗржиред ржпрзЗржЦрж╛ржирзЗ event handler ржЖржкржирж╛ржХрзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ event ржкрж░рж┐ржЪрж╛рж▓ржирж╛ ржХрж░рждрзЗ ржжрзЗржпрж╝, Effects рж░рзЗржирзНржбрж╛рж░рж┐ржВ ржПрж░ ржкрж░рзЗ ржХрж┐ржЫрзБ ржХрзЛржб ржЪрж╛рж▓рж╛рждрзЗ ржжрзЗржпрж╝ред ржЖржкржирж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯржХрзЗ React ржПрж░ ржмрж╛ржЗрж░рзЗрж░ ржПржХржЯрж┐ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ рж╕рж╛ржерзЗ рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛ржЗржЬ ржХрж░рж╛рж░ ржЬржирзНржп Effects ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред

ржХрзЯрзЗржХржмрж╛рж░ Play/Pause ржП ржЪрж╛ржк ржжрж┐ржи ржПржмржВ ржЦрзЗрзЯрж╛рж▓ ржХрж░рзБржи ржХрзАржнрж╛ржмрзЗ ржнрж┐ржбрж┐ржУ ржкрзНрж▓рзЗрзЯрж╛рж░ `isPlaying` prop ржПрж░ рж╕рж╛ржерзЗ рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛ржЗржЬржб  ржерж╛ржХржЫрзЗред

<Sandpack>

```js
import { useState, useRef, useEffect } from 'react';

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() => {
    if (isPlaying) {
      ref.current.play();
    } else {
      ref.current.pause();
    }
  }, [isPlaying]);

  return <video ref={ref} src={src} loop playsInline />;
}

export default function App() {
  const [isPlaying, setIsPlaying] = useState(false);
  return (
    <>
      <button onClick={() => setIsPlaying(!isPlaying)}>
        {isPlaying ? 'Pause' : 'Play'}
      </button>
      <VideoPlayer
        isPlaying={isPlaying}
        src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
      />
    </>
  );
}
```

```css
button { display: block; margin-bottom: 20px; }
video { width: 250px; }
```

</Sandpack>


ржЕржирзЗржХ Effects ржирж┐ржЬрзЗржжрзЗрж░ "clean up" ржирж┐ржЬрзЗрж░рж╛ржЗ ржХрж░рзЗ ржирзЗржпрж╝ред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржПржХржЯрж┐ ржЪрзНржпрж╛ржЯ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзЛржЧ рж╕рзНржерж╛ржкржи ржХрж░рж╛ Effect ржПрж░ ржЙржЪрж┐ржд ржПржХржЯрж┐ *cleanup function* ржлрзЗрж░ржд ржжрзЗржУрзЯрж╛ ржпрж╛ React ржХрзЗ ржмрж▓рзЗ ржжрж┐ржмрзЗ ржЖржкржирж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯржХрзЗ рж╕рзЗржЗ рж╕рж╛рж░рзНржнрж╛рж░ ржерзЗржХрзЗ рж╕ржВржпрзЛржЧ ржмрж┐ржЪрзНржЫрж┐ржирзНржи ржХрж░рждрзЗред

<Sandpack>

```js
import { useState, useEffect } from 'react';
import { createConnection } from './chat.js';

export default function ChatRoom() {
  useEffect(() => {
    const connection = createConnection();
    connection.connect();
    return () => connection.disconnect();
  }, []);
  return <h1>Welcome to the chat!</h1>;
}
```

```js chat.js
export function createConnection() {
  // A real implementation would actually connect to the server
  return {
    connect() {
      console.log('тЬЕ Connecting...');
    },
    disconnect() {
      console.log('тЭМ Disconnected.');
    }
  };
}
```

```css
input { display: block; margin-bottom: 20px; }
```

</Sandpack>

ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗ, React ржЖржкржирж╛рж░ Effect ржЯрж┐ рждрж╛рзОржХрзНрж╖ржгрж┐ржХржнрж╛ржмрзЗ ржЪрж╛рж▓рж╛ржмрзЗ ржПржмржВ ржПржХржмрж╛рж░ ржЕрждрж┐рж░рж┐ржХрзНржд clean up ржХрж░ржмрзЗред ржПржЗ ржХрж╛рж░ржгрзЗржЗ ржЖржкржирж┐ "тЬЕ Connecting..." ┬аржжрзБржмрж╛рж░ ржжрзЗржЦржмрзЗржиред ржПржЯрж┐ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ ржпрзЗ ржЖржкржирж┐ cleanup function ржмрж╛рж╕рзНрждржмрж╛ржпрж╝ржи ржХрж░рждрзЗ ржнрзБрж▓ржЫрзЗржи ржирж╛ред

<LearnMore path="/learn/synchronizing-with-effects">

ржмрж╛ржЗрж░рзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржоржЧрзБрж▓рж┐рж░ рж╕рж╛ржерзЗ ржХржорзНржкрзЛржирзЗржирзНржЯржЧрзБрж▓рж┐ рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛ржЗржЬ ржХрж░рж╛ рж╢рж┐ржЦрждрзЗ **[Effects ржПрж░ рж╕рж╛ржерзЗ рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛ржЗржЬрзЗрж╢ржи](/learn/synchronizing-with-effects)** ржкрзЬрзБржиред

</LearnMore>

## ржЖржкржирж╛рж░ Effect ржПрж░ ржкрзНрж░рзЯрзЛржЬржи ржирж╛ржУ ржкрзЬрждрзЗ ржкрж╛рж░рзЗ {/*you-might-not-need-an-effect*/}

Effect рж╣рж▓ React ржПрж░ ржЬржЧржд ржерзЗржХрзЗ ржПржХржЯрж┐ escape hatchред ржПржЯрж┐ ржЖржкржирж╛ржХрзЗ "React ржПрж░ ржмрж╛ржЗрж░рзЗ ржкржжржХрзНрж╖рзЗржк" ржирж┐рждрзЗ ржжрзЗрзЯ ржПржмржВ рж╕рж╛ржерзЗ ржЖржкржирж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯржЧрзБрж▓рж┐ржХрзЗ ржХрж┐ржЫрзБ ржмрж╛ржЗрж░рзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ рж╕рж╛ржерзЗ рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛ржЗржЬ ржХрж░рждрзЗ ржжрзЗрзЯред ржпржжрж┐ ржХрзЛржирзЛ ржмрж╛ржЗрж░рзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржо ржЬржбрж╝рж┐ржд ржирж╛ ржерж╛ржХрзЗ (ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржЖржкржирж┐ ржпржжрж┐ ржХрж┐ржЫрзБ props ржЕржержмрж╛ state ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ ржПржХржЯрж┐ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ state ржЖржкржбрзЗржЯ ржХрж░рждрзЗ ржЪрж╛ржи), ржЖржкржирж╛рж░ Effect ржПрж░ ржкрзНрж░рзЯрзЛржЬржи рж╣ржмрж╛рж░ ржХржерж╛ ржирж╛ред ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ Effect рж╕рж░рж┐рзЯрзЗ ржлрзЗрж▓рж▓рзЗ ржЖржкржирж╛рж░ ржХрзЛржб рж╕рж╣ржЬрзЗ ржкрзЬрж╛ ржпрж╛ржмрзЗ, ржжрзНрж░рзБржд ржЪрж▓ржмрзЗ, ржПржмржВ ржнрзБрж▓ ржХржо рж╣ржмрзЗред 

рж╕рж╛ржзрж╛рж░ржгржд ржжрзБржЯрж┐ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржЖржкржирж╛рж░ Effect ржжрж░ржХрж╛рж░ рж╣ржмрзЗ ржирж╛ржГ
- **рж░рзЗржирзНржбрж╛рж░рзЗрж░ ржЬржирзНржп ржбрзЗржЯрж╛ transform ржХрж░рждрзЗ Effect ржПрж░ ржжрж░ржХрж╛рж░ ржирзЗржЗред**
- **User event ржжрзЗржЦрж╛рж╢рзЛржирж╛ ржХрж░рж╛рж░ ржЬржирзНржп ржЖржкржирж╛рж░ Effect ржПрж░ ржкрзНрж░рзЯрзЛржЬржи ржирзЗржЗред**

```js {5-9}
function Form() {
  const [firstName, setFirstName] = useState('Taylor');
  const [lastName, setLastName] = useState('Swift');

  // ЁЯФ┤ Avoid: redundant state and unnecessary Effect
  const [fullName, setFullName] = useState('');
  useEffect(() => {
    setFullName(firstName + ' ' + lastName);
  }, [firstName, lastName]);
  // ...
}
```

ржмрж░ржВ, рж░рзЗржирзНржбрж╛рж░ ржХрж░рж╛рж░ рж╕ржорзЯ ржпрждржЯрж╛ рж╕ржорзНржнржм рж╣рж┐рж╕рзЗржм ржХрж░рзЗ рж░рж╛ржЦрзЗржиржГ

```js {4-5}
function Form() {
  const [firstName, setFirstName] = useState('Taylor');
  const [lastName, setLastName] = useState('Swift');
  // тЬЕ Good: calculated during rendering
  const fullName = firstName + ' ' + lastName;
  // ...
}
```

ржХрж┐ржирзНрждрзБ, ржмрж╛ржЗрж░рзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ рж╕рж╛ржерзЗ рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛ржЗржЬ ржХрж░рждрзЗ ржЖржкржирж╛рж░ Effect *рж▓рж╛ржЧржмрзЗржЗ*ред

<LearnMore path="/learn/you-might-not-need-an-effect">

ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ Effect ржХрзАржнрж╛ржмрзЗ рж╕рж░рж╛ржмрзЗржи рж╢рж┐ржЦрж╛рж░ ржЬржирзНржп ржкрзЬрзБржи **[ржЖржкржирж╛рж░ Effect ржПрж░ ржкрзНрж░рзЯрзЛржЬржи ржирж╛ржУ ржкрзЬрждрзЗ ржкрж╛рж░рзЗ](/learn/you-might-not-need-an-effect)**

</LearnMore>

## Reactive effects ржПрж░ ржЬрзАржмржиржЪржХрзНрж░ {/*lifecycle-of-reactive-effects*/}

Effect ржПрж░ ржЬрзАржмржиржЪржХрзНрж░ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржЪрзЗржпрж╝рзЗ ржЖрж▓рж╛ржжрж╛ред ржХржорзНржкрзЛржирзЗржирзНржЯ ржорж╛ржЙржирзНржЯ, ржЖржкржбрзЗржЯ ржЕржержмрж╛ ржЖржиржорж╛ржЙржирзНржЯ ржХрж░рждрзЗ ржкрж╛рж░рзЗред ржПржХржЯрж┐ Effect ржХрзЗржмрж▓ ржжрзБржЯрж┐ ржХрж╛ржЬ ржХрж░рждрзЗ ржкрж╛рж░рзЗ: ржХрж┐ржЫрзБ рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛ржЗржЬ рж╢рзБрж░рзБ ржХрж░рж╛, ржПржмржВ ржкрж░рзЗ ржПржЯрж┐ рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛ржЗржЬ ржмржирзНржз ржХрж░рж╛ред ржЖржкржирж╛рж░ Effect ржпржжрж┐ props ржПржмржВ state ржПрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рзЗ ржерж╛ржХрзЗ ржпрж╛ рж╕ржоржпрж╝рзЗрж░ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣ржпрж╝, рждржмрзЗ ржПржЗ ржЪржХрзНрж░ржЯрж┐ ржПржХрж╛ржзрж┐ржХржмрж╛рж░ ржШржЯрждрзЗ ржкрж╛рж░рзЗред

ржПржЗ Effect ржЯрж┐ `roomId` prop ржПрж░ ржорж╛ржирзЗрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рзЗред Prop рж╣рж▓ *reactive value,* ржпрж╛рж░ ржЕрж░рзНрже рждрж╛рж░рж╛ ржПржХржЯрж┐ re-render ржП ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣рждрзЗ ржкрж╛рж░рзЗред рж▓ржХрзНрж╖рзНржп ржХрж░рзБржи ржпрзЗ `roomId` ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣рж▓рзЗ Effect *re-synchronize* ржХрж░рзЗред (ржПржмржВ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ ржкрзБржирж░рж╛ржпрж╝ рж╕ржВржпрзЛржЧ рж╕рзНржерж╛ржкржи ржХрж░рзЗ):

<Sandpack>

```js
import { useState, useEffect } from 'react';
import { createConnection } from './chat.js';

const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]);

  return <h1>Welcome to the {roomId} room!</h1>;
}

export default function App() {
  const [roomId, setRoomId] = useState('general');
  return (
    <>
      <label>
        Choose the chat room:{' '}
        <select
          value={roomId}
          onChange={e => setRoomId(e.target.value)}
        >
          <option value="general">general</option>
          <option value="travel">travel</option>
          <option value="music">music</option>
        </select>
      </label>
      <hr />
      <ChatRoom roomId={roomId} />
    </>
  );
}
```

```js chat.js
export function createConnection(serverUrl, roomId) {
  // A real implementation would actually connect to the server
  return {
    connect() {
      console.log('тЬЕ Connecting to "' + roomId + '" room at ' + serverUrl + '...');
    },
    disconnect() {
      console.log('тЭМ Disconnected from "' + roomId + '" room at ' + serverUrl);
    }
  };
}
```

```css
input { display: block; margin-bottom: 20px; }
button { margin-left: 10px; }
```

</Sandpack>

React ржПржХржЯрж┐ linter rule ржжрзЗрзЯ ржпрж╛ рж▓ржХрзНрж╖рзНржп ржХрж░рзЗ ржпрзЗ ржЖржкржирж┐ ржЖржкржирж╛рж░ Effect ржПрж░ ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ рж╕ржарж┐ржХржнрж╛ржмрзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрж░рзЗржЫрзЗржи ржХрж┐ржирж╛ред ржпржжрж┐ ржЖржкржирж┐ ржЙржкрж░рзЗрж░ ржЙржжрж╛рж╣рж░ржгрзЗ ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ржЧрзБрж▓рж┐рж░ рждрж╛рж▓рж┐ржХрж╛ржпрж╝ `roomId` ржЙрж▓рзНрж▓рзЗржЦ ржХрж░рждрзЗ ржнрзБрж▓рзЗ ржпрж╛ржи, рждржмрзЗ linter рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ рж╕рзЗржЗ ржмрж╛ржЧржЯрж┐ ржЦрзБржБржЬрзЗ ржмрзЗрж░ ржХрж░ржмрзЗред

<LearnMore path="/learn/lifecycle-of-reactive-effects">

ржПржХржЯрж╛ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржЬрзАржмржиржЪржХрзНрж░ ржерзЗржХрзЗ ржПржХржЯрж╛ Effect ржПрж░ ржЬрзАржмржиржЪржХрзНрж░ ржХрзАржнрж╛ржмрзЗ ржЖрж▓рж╛ржжрж╛ рж╢рж┐ржЦрж╛рж░ ржЬржирзНржп ржкрзЬрзБржи **[Reactive Events ржПрж░ ржЬрзАржмржиржЪржХрзНрж░](/learn/lifecycle-of-reactive-effects)**

</LearnMore>

## Events ржерзЗржХрзЗ Effects ржЖрж▓рж╛ржжрж╛ ржХрж░рж╛ {/*separating-events-from-effects*/}

<Wip>

ржПржЗ рж╕рзЗржХрж╢ржирзЗ ржПржХржЯрж┐ **ржЧржмрзЗрж╖ржгрж╛ржорзВрж▓ржХ API** ржирж┐рзЯрзЗ ржмрж┐ржмрж░ржг ржжрзЗржУрзЯрж╛ рж╣рзЯрзЗржЫрзЗ **ржпрж╛ ржПржЦржирзЛ React ржПрж░ ржХрзЛржи рж╕рзНржЯрзЗржмрж▓ ржнрж╛рж░рзНрж╢ржирзЗ ржЙржирзНржорзБржХрзНржд ржХрж░рж╛ рж╣рзЯржирж┐**ред

</Wip>

Event handler-ржЧрзБрж▓рж┐ рждржЦржирж┐ ржкрзБржирж░рж╛ржпрж╝ ржЪрж╛рж▓рж╛ржирзЛ рж╣рзЯ ржпржЦржи ржЖржкржирж┐ ржПржХржЗ interaction ржЖржмрж╛рж░ ржХрж░рзЗржиред Event handler ржПрж░ ржмрж┐ржкрж░рзАрждрзЗ, Effects ржкрзБржирж░рж╛ржпрж╝ рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛ржЗржЬ ржХрж░рзЗ ржпржжрж┐ рждрж╛рж░рж╛ ржПржоржи ржХрзЛржи ржорж╛ржи read ржХрж░рзЗ ржпрж╛ ржЖржЧрзЗрж░ рж░рзЗржирзНржбрж╛рж░ ржерзЗржХрзЗ ржЖрж▓рж╛ржжрж╛, ржпрзЗржоржи props ржмрж╛ state ржПрж░ ржорж╛ржиред ржорж╛ржЭрзЗ ржорж╛ржЭрзЗ, ржЖржкржирж┐ ржжрзБржЯрж┐ ржЖржЪрж░ржгрзЗрж░ ржорж┐рж╢рзНрж░ржг ржЪрж╛ржи: ржПржоржи ржПржХржЯрж┐ Effect ржпрж╛ ржХрж┐ржЫрзБ ржорж╛ржирзЗрж░ Response ржП ржЖржмрж╛рж░ ржЪрж▓рзЗ, ржХрж┐ржирзНрждрзБ ржЕржирзНржпрж╛ржирзНржпржЧрзБрж▓рзЛрж░ ржмрж┐рж╖рзЯрзЗ re-run ржХрж░рзЗ ржирж╛ред 

Effect ржПрж░ ржоржзрзНржп ржерж╛ржХрж╛ рж╕ржм ржХрзЛржб *reactive.* ржПржЯрж╛ ржЖржмрж╛рж░ ржЪрж▓ржмрзЗ ржпржжрж┐ ржПржЯрж╛ re-render ржПрж░ ржХрж╛рж░ржгрзЗ ржкрж░рж┐ржмрж░рзНрждрж┐ржд ржХрзЛржи ржорж╛ржи read ржХрж░рзЗред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржПржЗ Effect ржЯрж╛ ржЪрзНржпрж╛ржЯрзЗрж░ рж╕рж╛ржерзЗ ржкрзБржирж░рж╛рзЯ рж╕ржВржпрзЛржЧ рж╕рзНржерж╛ржкржи ржХрж░ржмрзЗ ржпржжрж┐ `roomId` ржЕржержмрж╛ `theme` ржПрж░ ржорж╛ржи ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣рзЯред

<Sandpack>

```json package.json hidden
{
  "dependencies": {
    "react": "latest",
    "react-dom": "latest",
    "react-scripts": "latest",
    "toastify-js": "1.12.0"
  },
  "scripts": {
    "start": "react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test --env=jsdom",
    "eject": "react-scripts eject"
  }
}
```

```js
import { useState, useEffect } from 'react';
import { createConnection, sendMessage } from './chat.js';
import { showNotification } from './notifications.js';

const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId, theme }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.on('connected', () => {
      showNotification('Connected!', theme);
    });
    connection.connect();
    return () => connection.disconnect();
  }, [roomId, theme]);

  return <h1>Welcome to the {roomId} room!</h1>
}

export default function App() {
  const [roomId, setRoomId] = useState('general');
  const [isDark, setIsDark] = useState(false);
  return (
    <>
      <label>
        Choose the chat room:{' '}
        <select
          value={roomId}
          onChange={e => setRoomId(e.target.value)}
        >
          <option value="general">general</option>
          <option value="travel">travel</option>
          <option value="music">music</option>
        </select>
      </label>
      <label>
        <input
          type="checkbox"
          checked={isDark}
          onChange={e => setIsDark(e.target.checked)}
        />
        Use dark theme
      </label>
      <hr />
      <ChatRoom
        roomId={roomId}
        theme={isDark ? 'dark' : 'light'} 
      />
    </>
  );
}
```

```js chat.js
export function createConnection(serverUrl, roomId) {
  // A real implementation would actually connect to the server
  let connectedCallback;
  let timeout;
  return {
    connect() {
      timeout = setTimeout(() => {
        if (connectedCallback) {
          connectedCallback();
        }
      }, 100);
    },
    on(event, callback) {
      if (connectedCallback) {
        throw Error('Cannot add the handler twice.');
      }
      if (event !== 'connected') {
        throw Error('Only "connected" event is supported.');
      }
      connectedCallback = callback;
    },
    disconnect() {
      clearTimeout(timeout);
    }
  };
}
```

```js notifications.js
import Toastify from 'toastify-js';
import 'toastify-js/src/toastify.css';

export function showNotification(message, theme) {
  Toastify({
    text: message,
    duration: 2000,
    gravity: 'top',
    position: 'right',
    style: {
      background: theme === 'dark' ? 'black' : 'white',
      color: theme === 'dark' ? 'white' : 'black',
    },
  }).showToast();
}
```

```css
label { display: block; margin-top: 10px; }
```

</Sandpack>

ржПржЯрж┐ ржЖржжрж░рзНрж╢ ржиржпрж╝ред ржЖржкржирж┐ ржХрзЗржмрж▓ржорж╛рждрзНрж░ `roomId` ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣рж▓рзЗ ржЪрзНржпрж╛ржЯрзЗ ржкрзБржирж░рж╛ржпрж╝ рж╕ржВржпрзЛржЧ ржХрж░рждрзЗ ржЪрж╛ржиред `theme` ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж╛ рж╣рж▓рзЗржЗ ржЪрзНржпрж╛ржЯрзЗ ржкрзБржирж░рж╛ржпрж╝ рж╕ржВржпрзЛржЧ ржХрж░рж╛ ржЙржЪрж┐ржд ржиржпрж╝! ржЖржкржирж╛рж░ Effect ржерзЗржХрзЗ theme read ржХрж░рж╛рж░ ржХрзЛржбржЯрж┐ ржПржХржЯрж┐ *Effect Event* ржП рж╕рж░рж┐ржпрж╝рзЗ ржирж┐ржи:

<Sandpack>

```json package.json hidden
{
  "dependencies": {
    "react": "experimental",
    "react-dom": "experimental",
    "react-scripts": "latest",
    "toastify-js": "1.12.0"
  },
  "scripts": {
    "start": "react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test --env=jsdom",
    "eject": "react-scripts eject"
  }
}
```

```js
import { useState, useEffect } from 'react';
import { experimental_useEffectEvent as useEffectEvent } from 'react';
import { createConnection, sendMessage } from './chat.js';
import { showNotification } from './notifications.js';

const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId, theme }) {
  const onConnected = useEffectEvent(() => {
    showNotification('Connected!', theme);
  });

  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.on('connected', () => {
      onConnected();
    });
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]);

  return <h1>Welcome to the {roomId} room!</h1>
}

export default function App() {
  const [roomId, setRoomId] = useState('general');
  const [isDark, setIsDark] = useState(false);
  return (
    <>
      <label>
        Choose the chat room:{' '}
        <select
          value={roomId}
          onChange={e => setRoomId(e.target.value)}
        >
          <option value="general">general</option>
          <option value="travel">travel</option>
          <option value="music">music</option>
        </select>
      </label>
      <label>
        <input
          type="checkbox"
          checked={isDark}
          onChange={e => setIsDark(e.target.checked)}
        />
        Use dark theme
      </label>
      <hr />
      <ChatRoom
        roomId={roomId}
        theme={isDark ? 'dark' : 'light'} 
      />
    </>
  );
}
```

```js chat.js
export function createConnection(serverUrl, roomId) {
  // A real implementation would actually connect to the server
  let connectedCallback;
  let timeout;
  return {
    connect() {
      timeout = setTimeout(() => {
        if (connectedCallback) {
          connectedCallback();
        }
      }, 100);
    },
    on(event, callback) {
      if (connectedCallback) {
        throw Error('Cannot add the handler twice.');
      }
      if (event !== 'connected') {
        throw Error('Only "connected" event is supported.');
      }
      connectedCallback = callback;
    },
    disconnect() {
      clearTimeout(timeout);
    }
  };
}
```

```js notifications.js hidden
import Toastify from 'toastify-js';
import 'toastify-js/src/toastify.css';

export function showNotification(message, theme) {
  Toastify({
    text: message,
    duration: 2000,
    gravity: 'top',
    position: 'right',
    style: {
      background: theme === 'dark' ? 'black' : 'white',
      color: theme === 'dark' ? 'white' : 'black',
    },
  }).showToast();
}
```

```css
label { display: block; margin-top: 10px; }
```

</Sandpack>

Code inside Effect Events isn't reactive, so changing the `theme` no longer makes your Effect re-connect.

<LearnMore path="/learn/separating-events-from-effects">

Read **[Separating Events from Effects](/learn/separating-events-from-effects)** to learn how to prevent some values from re-triggering Effects.

</LearnMore>

## Effect dependencies рж╕рж░рж╛ржирзЛ {/*removing-effect-dependencies*/}

ржЖржкржирж┐ ржпржЦржи ржПржХржЯрж┐ Effect рж▓рж┐ржЦрзЗржи, linter ржпрж╛ржЪрж╛ржЗ ржХрж░ржмрзЗ ржпрзЗ ржЖржкржирж┐ Effect ржПрж░ ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ржЧрзБрж▓рж┐рж░ рждрж╛рж▓рж┐ржХрж╛ржпрж╝ Effect ржпрзЗ рж╕ржорж╕рзНржд reactive ржорж╛ржи (ржпрзЗржоржи props ржПржмржВ state) read ржХрж░рзЗ рждрж╛рж░ рж╕ржм ржЕржирзНрждрж░рзНржнрзБржХрзНржд ржХрж░рзЗржЫрзЗржи ржХрж┐ ржирж╛ред ржПржЯрж┐ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ ржпрзЗ ржЖржкржирж╛рж░ Effect ржЖржкржирж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ рж╕рж░рзНржмрж╢рзЗрж╖ props ржПржмржВ state ржПрж░ рж╕рж╛ржерзЗ рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛ржЗржЬрзЗрж╢ржи ржмржЬрж╛ржпрж╝ рж░рж╛ржЦржЫрзЗред ржЕржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ржЧрзБрж▓рж┐ ржЖржкржирж╛рж░ Effect ржЕрждрж┐рж░рж┐ржХрзНржд ржмрж╛рж░ ржЪрж╛рж▓рж╛рждрзЗ ржкрж╛рж░рзЗ, ржмрж╛ ржПржоржиржХрж┐ ржПржХржЯрж┐ ржХржЦржирзЛ рж╢рзЗрж╖ рж╣ржмрзЗ ржирж╛ ржПржоржи рж▓рзБржк рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЗред ржЖржкржирж┐ рждрж╛ржжрзЗрж░ ржХрзАржнрж╛ржмрзЗ рж╕рж░рж╛ржмрзЗржи рждрж╛ case ржПрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рзЗред

ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржПржЗ Effect `options` ржЕржмржЬрзЗржХрзНржЯрзЗрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рзЗ ржпрж╛ ржЖржкржирж┐ ржкрзНрж░рждрж┐ржмрж╛рж░ ржЗржиржкрзБржЯ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж▓рзЗ  ржкрзБржирж░рж╛ржпрж╝ рждрзИрж░рж┐ рж╣ржпрж╝:

<Sandpack>

```js
import { useState, useEffect } from 'react';
import { createConnection } from './chat.js';

const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId }) {
  const [message, setMessage] = useState('');

  const options = {
    serverUrl: serverUrl,
    roomId: roomId
  };

  useEffect(() => {
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [options]);

  return (
    <>
      <h1>Welcome to the {roomId} room!</h1>
      <input value={message} onChange={e => setMessage(e.target.value)} />
    </>
  );
}

export default function App() {
  const [roomId, setRoomId] = useState('general');
  return (
    <>
      <label>
        Choose the chat room:{' '}
        <select
          value={roomId}
          onChange={e => setRoomId(e.target.value)}
        >
          <option value="general">general</option>
          <option value="travel">travel</option>
          <option value="music">music</option>
        </select>
      </label>
      <hr />
      <ChatRoom roomId={roomId} />
    </>
  );
}
```

```js chat.js
export function createConnection({ serverUrl, roomId }) {
  // A real implementation would actually connect to the server
  return {
    connect() {
      console.log('тЬЕ Connecting to "' + roomId + '" room at ' + serverUrl + '...');
    },
    disconnect() {
      console.log('тЭМ Disconnected from "' + roomId + '" room at ' + serverUrl);
    }
  };
}
```

```css
input { display: block; margin-bottom: 20px; }
button { margin-left: 10px; }
```

</Sandpack>

ржЖржкржирж┐ ржЪрж╛ржЗржмрзЗржи ржирж╛ ржпрзЗ ржкрзНрж░рждрж┐ржмрж╛рж░ ржЖржкржирж┐ ржорзЗрж╕рзЗржЬ рж▓рж┐ржЦрждрзЗ ржЧрзЗрж▓рзЗржЗ ржЪрзНржпрж╛ржЯ ржкрзБржирж░рж╛рзЯ рж╕ржВржпрзЛржЧ рж╕рзНржерж╛ржкржи ржХрж░рзБржХред ржПржЗ рж╕ржорж╕рзНржпрж╛ рж╕ржорж╛ржзрж╛ржи ржХрж░рждрзЗ, `options` ржЕржмржЬрзЗржХрзНржЯрзЗрж░ ржЙрзОржкрждрзНрждрж┐ Effect ржПрж░ ржоржзрзНржпрзЗ ржирж┐рзЯрзЗ ржпрж╛ржиред ржПрждрзЗ Effect ржХрзЗржмрж▓ ржорж╛рждрзНрж░ `roomId` рж╕рзНржЯрзНрж░рж┐ржВ ржПрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░ржмрзЗред

<Sandpack>

```js
import { useState, useEffect } from 'react';
import { createConnection } from './chat.js';

const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId }) {
  const [message, setMessage] = useState('');

  useEffect(() => {
    const options = {
      serverUrl: serverUrl,
      roomId: roomId
    };
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]);

  return (
    <>
      <h1>Welcome to the {roomId} room!</h1>
      <input value={message} onChange={e => setMessage(e.target.value)} />
    </>
  );
}

export default function App() {
  const [roomId, setRoomId] = useState('general');
  return (
    <>
      <label>
        Choose the chat room:{' '}
        <select
          value={roomId}
          onChange={e => setRoomId(e.target.value)}
        >
          <option value="general">general</option>
          <option value="travel">travel</option>
          <option value="music">music</option>
        </select>
      </label>
      <hr />
      <ChatRoom roomId={roomId} />
    </>
  );
}
```

```js chat.js
export function createConnection({ serverUrl, roomId }) {
  // A real implementation would actually connect to the server
  return {
    connect() {
      console.log('тЬЕ Connecting to "' + roomId + '" room at ' + serverUrl + '...');
    },
    disconnect() {
      console.log('тЭМ Disconnected from "' + roomId + '" room at ' + serverUrl);
    }
  };
}
```

```css
input { display: block; margin-bottom: 20px; }
button { margin-left: 10px; }
```

</Sandpack>

рж▓ржХрзНрж╖рзНржп ржХрж░рзБржи ржпрзЗ ржЖржкржирж┐ `options` ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ржЯрж┐ рж╕рж░рж╛ржирзЛрж░ ржЬржирзНржп ржЖржкржирж┐ рж╢рзБрж░рзБрждрзЗ ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ рждрж╛рж▓рж┐ржХрж╛ ржарж┐ржХ ржХрж░рждрзЗ ржпрж╛ржиржирж┐ред ржПржЯрж╛ ржХрж░рж╛ ржнрзБрж▓ рж╣ржмрзЗред ржПрж░ ржкрж░рж┐ржмрж░рзНрждрзЗ, ржЖржкржирж┐ ржЖрж╢ржкрж╛рж╢рзЗрж░ ржХрзЛржб ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзЗржЫрзЗржи ржпрж╛рждрзЗ ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ржЯрж┐ *ржЕржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝* рж╣ржпрж╝ред ржзрж░рзЗ ржирж┐ржи ржпрзЗ, ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ рждрж╛рж▓рж┐ржХрж╛ рж╣ржЪрзНржЫрзЗ ржЖржкржирж╛рж░ Effect ржПрж░ ржХрзЛржб ржжрзНржмрж╛рж░рж╛ ржмрзНржпржмрж╣рзГржд рж╕ржорж╕рзНржд reactive ржорж╛ржирзЗрж░ рждрж╛рж▓рж┐ржХрж╛ред ржЖржкржирж┐ рж╕ржЪрзЗрждржиржнрж╛ржмрзЗ ржарж┐ржХ ржХрж░рзЗржи ржирж╛ ржпрзЗ ржЖржкржирж┐ ржР рждрж╛рж▓рж┐ржХрж╛ржпрж╝ ржХрзА рж░рж╛ржЦржмрзЗржиред ржмрж░ржВ, рждрж╛рж▓рж┐ржХрж╛ржЯрж┐ ржЖржкржирж╛рж░ ржХрзЛржбржХрзЗ ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░рзЗред ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ рждрж╛рж▓рж┐ржХрж╛ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ, ржХрзЛржб ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзБржиред

<LearnMore path="/learn/removing-effect-dependencies">

ржХрзА ржХрж░ржмрзЗржи ржпрзЗржи ржЖржкржирж╛рж░ Effect ржХржо ржмрж╛рж░ re-run рж╣рзЯ, рж╢рзЗржЦрж╛рж░ ржЬржирзНржп **[Effect ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ рж╕рж░рж╛ржирзЛ](/learn/removing-effect-dependencies)** ржкрзЬрзБржиред

</LearnMore>

## ржХрж╛рж╕рзНржЯржо Hooks ржПрж░ рж╕рж╛рж╣рж╛ржпрзНржпрзЗ рж▓ржЬрж┐ржХрзЗрж░ ржкрзБржирж░рзНржмрзНржпржмрж╣рж╛рж░ {/*reusing-logic-with-custom-hooks*/}

React ржП `useState`, `useContext`, and `useEffect` ржПрж░ ржоржд built-in hooks ржЖржЫрзЗред ржорж╛ржЭрзЗ ржорж╛ржЭрзЗ, ржЖржкржирж╛рж░ ржоржирзЗ рж╣ржмрзЗ ржпрзЗ ржЖрж░ржУ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрзЛржи ржЙржжрзНржжрзЗрж╢рзНржпрзЗрж░ ржЬржирзНржп ржПржХржЯрж┐ Hook ржерж╛ржХржд ржпрзЗржоржи, ржбрзЗржЯрж╛ ржирж┐рзЯрзЗ ржЖрж╕рж╛, ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржЕржирж▓рж╛ржЗржирзЗ ржЖржЫрзЗржи ржХрж┐ ржирж╛ рждрж╛ ржиржЬрж░рзЗ рж░рж╛ржЦрж╛, ржмрж╛ ржПржХржЯрж┐ ржЪрзНржпрж╛ржЯ рж░рзБржорзЗрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзЛржЧ ржХрж░рж╛ред ржПржЯрж┐ ржХрж░рж╛рж░ ржЬржирзНржп, ржЖржкржирж┐ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржирзЗрж░ ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝рждрж╛ ржорж╛ржерж╛рзЯ рж░рзЗржЦрзЗ ржЖржкржирж╛рж░ ржирж┐ржЬрж╕рзНржм Hooks рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред

ржПржЗ ржЙржжрж╛рж╣рж░ржгрзЗ, `usePointerPosition` ржХрж╛рж╕рзНржЯржо Hook-ржЯрж┐ ржХрж╛рж░рзНрж╕рж░рзЗрж░ ржЕржмрж╕рзНржерж╛ржи ржиржЬрж░рзЗ рж░рж╛ржЦрзЗ, ржЕржирзНржпржжрж┐ржХрзЗ `useDelayedValue` ржХрж╛рж╕рзНржЯржо Hook-ржЯрж┐ ржПржоржи ржПржХржЯрзБ ржорж╛ржи return ржХрж░рзЗ ржпрж╛ ржЖржкржирж╛рж░ pass ржХрж░рж╛ ржорж╛ржи ржерзЗржХрзЗ ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржВржЦрзНржпржХ ржорж┐рж▓рж┐рж╕рзЗржХрзЗржирзНржбрзЗрж░ ржмрзНржпржмржзрж╛ржирзЗ "ржкрж┐ржЫрж┐рзЯрзЗ ржЖржЫрзЗ"ред рж╕рзНржпрж╛ржирзНржбржмржХрзНрж╕рзЗрж░ ржкрзНрж░рж┐ржнрж┐ржЙ ржЕржВрж╢рзЗрж░ ржЙржкрж░рзЗ ржХрж╛рж░рзНрж╕рж░ рж╕рж░рж┐рзЯрзЗ ржЦрзНржпрзЗрзЯрж╛рж▓ ржХрж░рзБржи ржпрзЗ ржХрж╛рж░рзНрж╕рж░рзЗрж░ ржкрж┐ржЫржирзЗ ржХрзЯрзЗржХржЯрж┐ ржмрж┐ржирзНржжрзБрж░ ржПржХржЯрж┐ ржкржерж░рзЗржЦрж╛ ржжрзЗржЦрж╛ ржпрж╛ржЪрзНржЫрзЗржГ

<Sandpack>

```js
import { usePointerPosition } from './usePointerPosition.js';
import { useDelayedValue } from './useDelayedValue.js';

export default function Canvas() {
  const pos1 = usePointerPosition();
  const pos2 = useDelayedValue(pos1, 100);
  const pos3 = useDelayedValue(pos2, 200);
  const pos4 = useDelayedValue(pos3, 100);
  const pos5 = useDelayedValue(pos4, 50);
  return (
    <>
      <Dot position={pos1} opacity={1} />
      <Dot position={pos2} opacity={0.8} />
      <Dot position={pos3} opacity={0.6} />
      <Dot position={pos4} opacity={0.4} />
      <Dot position={pos5} opacity={0.2} />
    </>
  );
}

function Dot({ position, opacity }) {
  return (
    <div style={{
      position: 'absolute',
      backgroundColor: 'pink',
      borderRadius: '50%',
      opacity,
      transform: `translate(${position.x}px, ${position.y}px)`,
      pointerEvents: 'none',
      left: -20,
      top: -20,
      width: 40,
      height: 40,
    }} />
  );
}
```

```js usePointerPosition.js
import { useState, useEffect } from 'react';

export function usePointerPosition() {
  const [position, setPosition] = useState({ x: 0, y: 0 });
  useEffect(() => {
    function handleMove(e) {
      setPosition({ x: e.clientX, y: e.clientY });
    }
    window.addEventListener('pointermove', handleMove);
    return () => window.removeEventListener('pointermove', handleMove);
  }, []);
  return position;
}
```

```js useDelayedValue.js
import { useState, useEffect } from 'react';

export function useDelayedValue(value, delay) {
  const [delayedValue, setDelayedValue] = useState(value);

  useEffect(() => {
    setTimeout(() => {
      setDelayedValue(value);
    }, delay);
  }, [value, delay]);

  return delayedValue;
}
```

```css
body { min-height: 300px; }
```

</Sandpack>

ржЖржкржирж┐ ржХрж╛рж╕рзНржЯржо Hooks рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи, ржПржЧрзБрж▓рзЛржХрзЗ ржПржХрждрзНрж░рж┐ржд ржХрж░рждрзЗ ржкрж╛рж░рзЗржи, ржПржжрзЗрж░ ржоржзрзНржпрзЗ ржбрж╛ржЯрж╛ pass ржХрж░рждрзЗ ржкрж╛рж░рзЗржи, ржПржмржВ ржХржорзНржкрзЛржирзЗржирзНржЯржЧрзБрж▓рж┐рж░ ржоржзрзНржпрзЗ ржПржжрзЗрж░ ржкрзБржирж░рж╛ржпрж╝ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржк ржмрзЬ рж╣ржмрж╛рж░ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ, ржЖржкржирж┐ ржирждрзБржи ржХрж░рзЗ Effects ржХржо рж▓рж┐ржЦржмрзЗржи ржХрж╛рж░ржг ржЖржкржирж┐ ржЗрждрзЛржоржзрзНржпрзЗ рж▓рж┐ржЦрзЗржЫрзЗржи ржПржоржи ржХрж╛рж╕рзНржЯржо Hooks ржкрзБржирж░рж╛ржпрж╝ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржиред React ржХржорж┐ржЙржирж┐ржЯрж┐ ржжрзЗржЦрж╛рж╢рзЛржирж╛ ржХрж░рзЗ ржПржоржи ржмрзЗрж╢ ржЕржирзЗржХржЧрзБрж▓рж┐ ржнрж╛рж▓ ржХрж╛рж╕рзНржЯржо Hook рж░рзЯрзЗржЫрзЗред

<LearnMore path="/learn/reusing-logic-with-custom-hooks">

ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржоржзрзНржпрзЗ рж▓ржЬрж┐ржХ рж╢рзЗрзЯрж╛рж░ ржХрзАржнрж╛ржмрзЗ ржХрж░рждрзЗ рж╣рзЯрзЗ рж╢рзЗржЦрж╛рж░ ржЬржирзНржп ржкрзЬрзБржи  **[ржХрж╛рж╕рзНржЯржо Hooks ржПрж░ рж╕рж╛рж╣рж╛ржпрзНржпрзЗ рж▓ржЬрж┐ржХрзЗрж░ ржкрзБржирж░рзНржмрзНржпржмрж╣рж╛рж░](/learn/reusing-logic-with-custom-hooks)**ред

</LearnMore>

## ржПрж░ ржкрж░ ржХрзА? {/*whats-next*/}

ржПржЗ ржЕржзрзНржпрж╛рзЯржЯрж┐ ржмрж┐рж╕рзНрждрж╛рж░рж┐рждржнрж╛ржмрзЗ ржкрзЬрж╛рж░ ржЬржирзНржп ржЪрж▓рзЗ ржпрж╛ржи [Ref ржПрж░ рж╕рж╛рж╣рж╛ржпрзНржп value referencing](/learn/referencing-values-with-refs) ржЕржВрж╢рзЗред

---
title: flushSync
---

<Pitfall>

`flushSync` ржПрж░ ржмрзНржпржмрж╣рж╛рж░ ржЦрзБржм ржПржХржЯрж╛ рж╣рзЯ ржирж╛ ржПржмржВ ржПржЯрж╛ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкрзЗрж░ ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕рзЗ ржмрж┐рж░рзВржк ржкрзНрж░ржнрж╛ржм ржлрзЗрж▓рждрзЗ ржкрж╛рж░рзЗред

</Pitfall>

<Intro>

`flushSync` ржЖржкржирж╛ржХрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░ржмрзЗ ржпржжрж┐ ржЖржкржирж┐ ржХрзЛржи ржПржХржЯрж┐ ржХрж▓ржмрзНржпрж╛ржХрзЗрж░ ржоржзрзНржпржХрж╛рж░ ржпрзЗржХрзЛржи ржЖржкржбрзЗржЯ рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛рж╕ржнрж╛ржмрзЗ flush ржХрж░рж╛рж░ ржЬржирзНржп React ржХрзЗ ржмрж╛ржзрзНржп ржХрж░рждрзЗ ржЪрж╛ржиред ржПржЯрж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ ржпрзЗ DOM рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ ржЖржкржбрзЗржЯ рж╣рзЯрзЗ ржпрж╛ржЪрзНржЫрзЗред 

```js
flushSync(callback)
```

</Intro>

<InlineToc />

---

## рж░рзЗржлрж╛рж░рзЗржирзНрж╕ {/*reference*/}

### `flushSync(callback)` {/*flushsync*/}

ржХрзЛржи ржПржХржЯрж┐ pending ржХрж╛ржЬ ржлрзНрж▓рж╛рж╢ ржХрж░рж╛рж░ ржЬржирзНржп ржПржмржВ ржПржХржЗ рж╕рж╛ржерзЗ DOM ржЖржкржбрзЗржЯ ржХрж░рж╛рж░ ржЬржирзНржп React ржХрзЗ ржмрж╛ржзрзНржп ржХрж░рждрзЗ ржПржмржВ `flushSync` ржХрж▓ ржХрж░рзБржиред

```js
import { flushSync } from 'react-dom';

flushSync(() => {
  setSomething(123);
});
```

ржмрзЗрж╢рж┐рж░ ржнрж╛ржЧ рж╕ржорзЯ, `flushSync` ржПрж░ ржмрзНржпржмрж╣рж╛рж░ ржПрзЬрж┐рзЯрзЗ ржЪрж▓рж╛ ржпрж╛рзЯред `flushSync` ржХрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи last resort рж╣рж┐рж╕рзЗржмрзЗред

[ржирж┐ржЪрзЗ ржЖрж░рзЛ ржЙржжрж╛рж╣рж░ржг ржжрзЗржЦрзБржиред](#usage)

#### ржкрзНржпрж╛рж░рж╛ржорж┐ржЯрж╛рж░ {/*parameters*/}


* `callback`: ржПржХржЯрж┐ ржлрж╛ржВрж╢ржиред React рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ ржПржЗ ржХрж▓ржмрзНржпрж╛ржХ ржХрж▓ ржжрж┐ржмрзЗ ржПржмржВ ржПрж░ ржоржзрзНржпрзЗ ржерж╛ржХрж╛ ржпрзЗржХрзЛржи ржЖржкржбрзЗржЯ рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛рж╕ржнрж╛ржмрзЗ ржлрзНрж▓рж╛рж╢ ржХрж░рзЗ ржжрж┐ржмрзЗред ржПржЯрж╛ ржПржХржЗ рж╕рж╛ржерзЗ ржпрзЗржХрзЛржи ржкрзЗржирзНржбрзАржВ ржЖржкржбрзЗржЯ, Effect ржЕржержмрж╛ Effect ржПрж░ ржоржзрзНржпржХрж╛рж░ ржЖржкржбрзЗржЯ ржлрзНрж▓рж╛рж╢ ржХрж░рзЗ ржжрж┐рждрзЗ ржкрж╛рж░рзЗред ржпржжрж┐ ржПржЗ `flushSync` ржХрж▓рзЗрж░ ржЬржирзНржп ржПржХржЯрж┐ ржЖржкржбрзЗржЯ рж╕рж╛рж╕ржкрзЗржирзНржб рж╣рзЯрзЗ ржпрж╛рзЯ, ржлрж▓ржмрзНржпрж╛ржХ ржЖржмрж╛рж░ ржжрзЗржЦрж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред

#### рж░рж┐ржЯрж╛рж░рзНржи {/*returns*/}

`flushSync` рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ `undefined`ред

#### рж╕рждрж░рзНржХрждрж╛ {/*caveats*/}

* `flushSync` ржмрзЗрж╢ ржЙрж▓рзНрж▓рзЗржЦржЬржиржХржнрж╛ржмрзЗ ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржХржорж┐рзЯрзЗ ржжрж┐рждрзЗ ржкрж╛рж░рзЗ, ржХржо ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред
* `flushSync` ржкрзЗржирзНржбрж┐ржВ рж╕рж╛рж╕ржкрзЗржирзНрж╕ ржмрж╛ржЙржирзНржбрж╛рж░рж┐ржЧрзБрж▓рзЛржХрзЗ рждрж╛ржжрзЗрж░ `fallback` state ржжрзЗржЦрж╛рждрзЗ ржмрж╛ржзрзНржп ржХрж░рждрзЗ ржкрж╛рж░рзЗред
* `flushSync` ржкрзЗржирзНржбрж┐ржВ Effect ржЧрзБрж▓рзЛ рж░рж╛ржи ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржПржмржВ рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛рж╕ржнрж╛ржмрзЗ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рж╛рж░ ржЖржЧрзЗ рж╕рзЗржЧрзБрж▓рзЛрж░ ржоржзрзНржпрзЗ ржерж╛ржХрж╛ ржЖржкржбрзЗржЯ ржПржкрзНрж▓рж╛ржЗ ржХрж░рждрзЗ ржкрж╛рж░рзЗред 
* `flushSync` ржкрзНрж░рзЯрзЛржЬржирзЗ ржХрж▓ржмрзНржпрж╛ржХрзЗрж░ ржнрж┐рждрж░рзЗрж░ ржЖржкржбрзЗржЯ flush ржХрж░рж╛рж░ ржЬржирзНржп ржХрж▓ржмрзНржпрж╛ржХрзЗрж░ ржмрж╛ржЗрж░рзЗ ржЖржкржбрзЗржЯ flush ржХрж░рждрзЗ ржкрж╛рж░рзЗред ржпрзЗржоржи, ржпржжрж┐ ржХрзЛржи ржПржХржЯрж┐ ржХрзНрж▓рж┐ржХ ржерзЗржХрзЗ ржХрзЛржи ржЖржкржбрзЗржЯ ржкрзЗржирзНржбрзАржВ ржерж╛ржХрзЗ, React ржХрж▓ржмрзНржпрж╛ржХрзЗрж░ ржнрж┐рждрж░рзЗрж░ ржЖржкржбрзЗржЯ flush ржХрж░рж╛рж░ ржЖржЧрзЗ ржУржЧрзБрж▓рзЛ flush ржХрж░рждрзЗ ржкрж╛рж░рзЗред

---

## ржмрзНржпржмрж╣рж╛рж░ {/*usage*/}

### ржерж╛рж░рзНржб ржкрж╛рж░рзНржЯрж┐ ржЗржирзНржЯрж┐ржЧрзНрж░рзЗрж╢ржирзЗрж░ ржЬржирзНржп flushing updates {/*flushing-updates-for-third-party-integrations*/}

ржпржЦржи ржерж╛рж░рзНржб-ржкрж╛рж░рзНржЯрж┐ ржХрзЛржб ржпрзЗржоржи ржмрзНрж░рж╛ржЙржЬрж╛рж░ API ржмрж╛ UI рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐рж░ рж╕рж╛ржерзЗ ржЗржирзНржЯрж┐ржЧрзНрж░рзЗржЯ ржХрж░рж╛ рж╣рзЯ, React ржХрзЗ ржЖржкржбрзЗржЯ flush ржХрж░рж╛рж░ ржЬржирзНржп ржмрж╛ржзрзНржп ржХрж░рж╛рж░ ржкрзНрж░рзЯрзЛржЬржи ржкрзЬрждрзЗ ржкрж╛рж░рзЗред ржХрж▓ржмрзНржпрж╛ржХрзЗрж░ ржоржзрзНржпрзЗ ржпрзЗржХрзЛржи <CodeStep step={1}>state ржЖржкржбрзЗржЯрзЗрж░</CodeStep> synchronously flush ржХрж░рж╛рж░ ржЬржирзНржп React ржХрзЗ ржмрж╛ржзрзНржп ржХрж░рждрзЗ `flushSync` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиржГ

```js [[1, 2, "setSomething(123)"]]
flushSync(() => {
  setSomething(123);
});
// By this line, the DOM is updated.
```

ржПржЯрж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ ржпрзЗ, ржпрждржХрзНрж╖ржгрзЗ ржПрж░ ржкрж░рзЗрж░ рж▓рж╛ржЗржирзЗрж░ ржХрзЛржб рж░рж╛ржи рж╣ржЪрзНржЫрзЗ, рждрждржХрзНрж╖ржгрзЗ ржпрзЗржи React DOM ржЖржкржбрзЗржЯ ржХрж░рзЗ ржлрзЗрж▓рзЗред

**`flushSync` ржПрж░ ржмрзНржпржмрж╣рж╛рж░ ржмрж┐рж░рж▓, ржПрж░ ржирж┐рзЯржорж┐ржд ржмрзНржпржмрж╣рж╛рж░ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкрзЗрж░ ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржЙрж▓рзНрж▓рзЗржЦржпрзЛржЧрзНржп ржнрж╛ржмрзЗ ржХржорж┐рзЯрзЗ ржлрзЗрж▓рждрзЗ ржкрж╛рж░рзЗред** ржпржжрж┐ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржк ржХрзЗржмрж▓ ржорж╛рждрзНрж░ React APIs ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ, ржПржмржВ ржерж╛рж░рзНржб ржкрж╛рж░рзНржЯрж┐ рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐рж░ рж╕рж╛ржерзЗ ржЗржирзНржЯрж┐ржЧрзНрж░рзЗржЯ ржирж╛ ржХрж░рзЗ, `flushSync` ржПрж░ ржкрзНрж░рзЯрзЛржЬржи рж╣ржмрж╛рж░ ржХржерж╛ ржирж╛ред

рждржмрзЗ, ржмрзНрж░рж╛ржЙржЬрж╛рж░ API ржПрж░ ржоржд ржерж╛рж░рзНржб ржкрж╛рж░рзНржЯрж┐ ржХрзЛржбрзЗрж░ рж╕рж╛ржерзЗ ржЗржирзНржЯрж┐ржЧрзНрж░рзЗрж╢ржирзЗрж░ ржЬржирзНржп ржПржЯрж╛ ржХрж╛ржЬрзЗ рж▓рж╛ржЧрждрзЗ ржкрж╛рж░рзЗред

ржХрж┐ржЫрзБ ржмрзНрж░рж╛ржЙржЬрж╛рж░ API ржкрзНрж░рждрзНржпрж╛рж╢рж╛ ржХрж░рзЗ ржХрж▓ржмрзНржпрж╛ржХрзЗрж░ ржоржзрзНржпржХрж╛рж░ рж░рзЗржЬрж╛рж▓рзНржЯ DOM ржП рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛рж╕ржнрж╛ржмрзЗ рж▓рзЗржЦрж╛ рж╣рзЯрзЗ ржпрж╛ржмрзЗ, ржХрж▓ржмрзНржпрж╛ржХ рж╢рзЗрж╖ рж╣ржмрж╛рж░ ржЖржЧрзЗржЗ, ржпрж╛рждрзЗ ржмрзНрж░рж╛ржЙржЬрж╛рж░ рж░рзЗржирзНржбрж╛рж░ рж╣ржУрзЯрж╛ DOM ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржХрж┐ржЫрзБ ржХрж░рждрзЗ ржкрж╛рж░рзЗред ржмрзЗрж╢рж┐рж░рж╛ржнржЧ ржХрзНрж╖рзЗрждрзНрж░рзЗ React ржПржЯрж╛ ржЖржкржирж╛рж░ ржЬржирзНржп рж╕рзНржмрзЯржВржХрзНрж░рж┐рзЯржнрж╛ржмрзЗ рж╣рзНржпрж╛ржирзНржбрзЗрж▓ ржХрж░ржмрзЗред ржХрж┐ржирзНрждрзБ ржХрж┐ржЫрзБ ржХрж┐ржЫрзБ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржПржХржЯрж╛ рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛рж╕ ржЖржкржбрзЗржЯ ржЬрзЛрж░ ржХрж░рзЗ ржХрж░рж╛ ржЬрж░рзБрж░рзА рж╣рждрзЗ ржкрж╛рж░рзЗред

ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржмрзНрж░рж╛ржЙржЬрж╛рж░ `onbeforeprint` API ржЖржкржирж╛ржХрзЗ ржкрзНрж░рж┐ржирзНржЯ ржбрж╛рзЯрж╛рж▓ржЧ ржЦрзБрж▓рж╛рж░ ржарж┐ржХ ржЖржЧ ржорзБрж╣рзБрж░рзНрждрзЗ ржкрзЗржЗржЬ ржмржжрж▓рж╛рждрзЗ ржжрзЗрзЯред ржпрзЗрж╕ржм ржХрж╛рж╕рзНржЯржо ржкрзНрж░рж┐ржирзНржЯ рж╕рзНржЯрж╛ржЗрж▓ ржбржХрзБржорзЗржирзНржЯрзЗрж░ ржкрзНрж░рж┐ржирзНржЯрж┐ржВ рж╕рзБржирзНржжрж░ ржХрж░рзЗ ржбрж┐рж╕ржкрзНрж▓рзЗ ржХрж░рждрзЗ ржжрзЗрзЯ рж╕рзЗржЧрзБрж▓рзЛ ржПржкрзНрж▓рж╛ржЗ ржХрж░рж╛рж░ ржЬржирзНржп ржПржЯрж╛ ржХрж╛ржЬрзЗ рж▓рж╛ржЧрзЗред ржирж┐ржЪрзЗрж░ ржЙржжрж╛рж╣рж░ржгрзЗ, `onbeforeprint` ржХрж▓ржмрзНржпрж╛ржХрзЗрж░ ржоржзрзНржпрзЗ DOM ржП рждрзОржХрзНрж╖ржгрж╛рзО React state "flush" ржХрж░рзЗ ржжрзЗржмрж╛рж░ ржЬржирзНржп `flushSync` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред рждрж╛рж░ржкрж░, ржпрждржХрзНрж╖ржгрзЗ ржкрзНрж░рж┐ржирзНржЯ ржбрж╛рзЯрж╛рж▓ржЧ ржЦрзБрж▓ржЫрзЗ, `isPrinting` "yes" ржжрзЗржЦрж╛ржмрзЗред

<Sandpack>

```js src/App.js active
import { useState, useEffect } from 'react';
import { flushSync } from 'react-dom';

export default function PrintApp() {
  const [isPrinting, setIsPrinting] = useState(false);

  useEffect(() => {
    function handleBeforePrint() {
      flushSync(() => {
        setIsPrinting(true);
      })
    }

    function handleAfterPrint() {
      setIsPrinting(false);
    }

    window.addEventListener('beforeprint', handleBeforePrint);
    window.addEventListener('afterprint', handleAfterPrint);
    return () => {
      window.removeEventListener('beforeprint', handleBeforePrint);
      window.removeEventListener('afterprint', handleAfterPrint);
    }
  }, []);

  return (
    <>
      <h1>isPrinting: {isPrinting ? 'yes' : 'no'}</h1>
      <button onClick={() => window.print()}>
        Print
      </button>
    </>
  );
}
```

</Sandpack>

`flushSync` ржмрзНржпрждрзАржд, ржкрзНрж░рж┐ржирзНржЯ ржбрж╛рзЯрж╛рж▓ржЧ `isPrinting` ржХрзЗ "no" рж╣рж┐рж╕рзЗржмрзЗ ржжрзЗржЦрж╛ржмрзЗред ржПрж░ ржХрж╛рж░ржг React ржЖржкржбрзЗржЯржЧрзБрж▓рзЛржХрзЗ asynchronous ржнрж╛ржмрзЗ ржмрзНржпрж╛ржЪ ржХрж░рзЗ ржПржмржВ state ржЖржкржбрзЗржЯ рж╣ржмрж╛рж░ ржЖржЧрзЗржЗ ржкрзНрж░рж┐ржирзНржЯ ржбрж╛рзЯрж╛рж▓ржЧ ржжрзЗржЦрж╛ ржпрж╛рзЯред

<Pitfall>

`flushSync` ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржЙрж▓рзНрж▓рзЗржЦржпрзЛржЧрзНржп ржнрж╛ржмрзЗ ржХржорж┐рзЯрзЗ ржлрзЗрж▓рждрзЗ ржкрж╛рж░рзЗ, ржПржмржВ ржкрзЗржирзНржбрзАржВ рж╕рж╛рж╕ржкрзЗржирзНрж╕ ржмрж╛ржЙржирзНржбрж╛рж░рж┐ржЧрзБрж▓рзЛржХрзЗ ржЕржкрзНрж░рждрзНржпрж╛рж╢рж┐рждржнрж╛ржмрзЗ рждрж╛ржжрзЗрж░ ржлрж▓ржмрзНржпрж╛ржХ state ржжрзЗржЦрж╛рждрзЗ ржмрж╛ржзрзНржп ржХрж░рждрзЗ ржкрж╛рж░рзЗред

ржмрзЗрж╢рж┐рж░ ржнрж╛ржЧ рж╕ржорзЯ, `flushSync` ржПрж░ ржмрзНржпржмрж╣рж╛рж░ ржПрзЬрж┐рзЯрзЗ ржЪрж▓рж╛ ржпрж╛рзЯред `flushSync` ржХрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи last resort рж╣рж┐рж╕рзЗржмрзЗред

</Pitfall>

---

## Troubleshooting {/*troubleshooting*/}

### I'm getting an error: "flushSync was called from inside a lifecycle method" {/*im-getting-an-error-flushsync-was-called-from-inside-a-lifecycle-method*/}


React cannot `flushSync` in the middle of a render. If you do, it will noop and warn:

<ConsoleBlock level="error">

Warning: flushSync was called from inside a lifecycle method. React cannot flush when React is already rendering. Consider moving this call to a scheduler task or micro task.

</ConsoleBlock>

This includes calling `flushSync` inside:

- rendering a component.
- `useLayoutEffect` or `useEffect` hooks.
- Class component lifecycle methods.

For example, calling `flushSync` in an Effect will noop and warn:

```js
import { useEffect } from 'react';
import { flushSync } from 'react-dom';

function MyComponent() {
  useEffect(() => {
    // ЁЯЪй Wrong: calling flushSync inside an effect
    flushSync(() => {
      setSomething(newValue);
    });
  }, []);

  return <div>{/* ... */}</div>;
}
```

To fix this, you usually want to move the `flushSync` call to an event:

```js
function handleClick() {
  // тЬЕ Correct: flushSync in event handlers is safe
  flushSync(() => {
    setSomething(newValue);
  });
}
```


If it's difficult to move to an event, you can defer `flushSync` in a microtask:

```js {3,7}
useEffect(() => {
  // тЬЕ Correct: defer flushSync to a microtask
  queueMicrotask(() => {
    flushSync(() => {
      setSomething(newValue);
    });
  });
}, []);
```

This will allow the current render to finish and schedule another syncronous render to flush the updates.

<Pitfall>

`flushSync` can significantly hurt performance, but this particular pattern is even worse for performance. Exhaust all other options before calling `flushSync` in a microtask as an escape hatch.

</Pitfall>
